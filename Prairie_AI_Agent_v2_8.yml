app:
  description: ''
  icon: ğŸ¤–
  icon_background: '#FFEAD5'
  mode: advanced-chat
  name: Prairie AI Agent_v2
  use_icon_as_answer_icon: true
dependencies:
- current_identifier: null
  type: marketplace
  value:
    marketplace_plugin_unique_identifier: langgenius/openai:0.2.3@5a7f82fa86e28332ad51941d0b491c1e8a38ead539656442f7bf4c6129cd15fa
kind: app
version: 0.3.1
workflow:
  conversation_variables:
  - description: ''
    id: 2d78619c-e8f1-454c-8dab-c057a7f60e9e
    name: captured_profile_cache
    selector:
    - conversation
    - captured_profile_cache
    value: {}
    value_type: object
  - description: 'èª¬æ˜: ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒªãƒ³ã‚°ä¸­ã«ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒå…ˆè¡Œã—ã¦è©±ã—ãŸãƒªã‚¯ã‚¨ã‚¹ãƒˆå†…å®¹ã‚’ã€ä¸€æ™‚çš„ã«ä¿æŒã—ã¦ãŠããŸã‚ã®ã‚­ãƒ£ãƒƒã‚·ãƒ¥'
    id: 17c12107-fb3e-4087-93a7-551fc0bcc6cf
    name: captured_request_cache
    selector:
    - conversation
    - captured_request_cache
    value: ''
    value_type: string
  - description: ''
    id: bacbfac5-a1da-420e-a022-7f90d554da80
    name: memory
    selector:
    - conversation
    - memory
    value: []
    value_type: array[object]
  environment_variables: []
  features:
    file_upload:
      allowed_file_extensions:
      - .JPG
      - .JPEG
      - .PNG
      - .GIF
      - .WEBP
      - .SVG
      allowed_file_types:
      - image
      allowed_file_upload_methods:
      - local_file
      - remote_url
      enabled: false
      fileUploadConfig:
        audio_file_size_limit: 50
        batch_count_limit: 5
        file_size_limit: 15
        image_file_size_limit: 10
        video_file_size_limit: 100
        workflow_file_upload_limit: 10
      image:
        enabled: false
        number_limits: 3
        transfer_methods:
        - local_file
        - remote_url
      number_limits: 3
    opening_statement: 'ã“ã‚“ã«ã¡ã¯ï¼ç§ã¯ã€ã‚ãªãŸã®ç›®æ¨™é”æˆã«æœ€é©ãªäººç‰©ã¨ã®å‡ºä¼šã„ã‚’å‰µå‡ºã™ã‚‹AIã€Prairie AIã§ã™ã€‚


      ã¾ãšåˆã‚ã«ã€ã‚ãªãŸã®ã“ã¨ã«ã¤ã„ã¦å°‘ã—æ•™ãˆã¦ã„ãŸã ã‘ã¾ã™ã‹ï¼Ÿ

      ç¾åœ¨ã©ã®ã‚ˆã†ãªã“ã¨ã«å–ã‚Šçµ„ã‚“ã§ã„ã¦ã€ã©ã®ã‚ˆã†ãªäººç‰©ã¨ã®å‡ºä¼šã„ã‚’æ±‚ã‚ã¦ã„ã‚‹ã‹ãªã©ã€è‡ªç”±ã«ãŠèã‹ã›ãã ã•ã„ã€‚'
    retriever_resource:
      enabled: false
    sensitive_word_avoidance:
      enabled: false
    speech_to_text:
      enabled: false
    suggested_questions: []
    suggested_questions_after_answer:
      enabled: true
    text_to_speech:
      enabled: false
      language: ''
      voice: ''
  graph:
    edges:
    - data:
        isInLoop: false
        sourceType: llm
        targetType: if-else
      id: 17550600850210-source-17550601184610-target
      selected: false
      source: '17550600850210'
      sourceHandle: source
      target: '17550601184610'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: if-else
        targetType: llm
      id: 17550601184610-true-17550603659250-target
      selected: false
      source: '17550601184610'
      sourceHandle: 'true'
      target: '17550603659250'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: llm
        targetType: code
      id: 17550603659250-source-17550620390260-target
      selected: false
      source: '17550603659250'
      sourceHandle: source
      target: '17550620390260'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: code
        targetType: assigner
      id: 17550620390260-source-17550620667450-target
      selected: false
      source: '17550620390260'
      sourceHandle: source
      target: '17550620667450'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: llm
        targetType: answer
      id: 17550621642540-source-17550621744400-target
      selected: false
      source: '17550621642540'
      sourceHandle: source
      target: '17550621744400'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: llm
        targetType: if-else
      id: 17550661175780-source-17550669548750-target
      selected: false
      source: '17550661175780'
      sourceHandle: source
      target: '17550669548750'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: if-else
        targetType: llm
      id: 17550601184610-false-17550621642540-target
      selected: false
      source: '17550601184610'
      sourceHandle: 'false'
      target: '17550621642540'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: if-else
        targetType: llm
      id: 17550669548750-false-17551596791270-target
      selected: false
      source: '17550669548750'
      sourceHandle: 'false'
      target: '17551596791270'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: llm
        targetType: if-else
      id: 17551596791270-source-17551656610950-target
      selected: false
      source: '17551596791270'
      sourceHandle: source
      target: '17551656610950'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: llm
        targetType: answer
      id: 17551658398830-source-17551660070480-target
      selected: false
      source: '17551658398830'
      sourceHandle: source
      target: '17551660070480'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: llm
        targetType: answer
      id: 17551688288560-source-17551689386760-target
      selected: false
      source: '17551688288560'
      sourceHandle: source
      target: '17551689386760'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: llm
        targetType: answer
      id: 17551660546480-source-17551689434150-target
      selected: false
      source: '17551660546480'
      sourceHandle: source
      target: '17551689434150'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: if-else
        targetType: llm
      id: 17550601184610-5dbbfc0b-a6f1-4b10-b8fb-f1367e00b417-17551596791270-target
      selected: false
      source: '17550601184610'
      sourceHandle: 5dbbfc0b-a6f1-4b10-b8fb-f1367e00b417
      target: '17551596791270'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: llm
        targetType: answer
      id: 17550621642540-fail-branch-1755214503739-target
      selected: false
      source: '17550621642540'
      sourceHandle: fail-branch
      target: '1755214503739'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: code
        targetType: assigner
      id: 1755253097776-source-1755253253995-target
      selected: false
      source: '1755253097776'
      sourceHandle: source
      target: '1755253253995'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: assigner
        targetType: answer
      id: 1755253253995-source-17550670509390-target
      selected: false
      source: '1755253253995'
      sourceHandle: source
      target: '17550670509390'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: if-else
        targetType: llm
      id: 17550601184610-ad396fd1-064e-4653-af5d-df4db2ee89a8-17555693082030-target
      selected: false
      source: '17550601184610'
      sourceHandle: ad396fd1-064e-4653-af5d-df4db2ee89a8
      target: '17555693082030'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: llm
        targetType: code
      id: 17555693082030-source-17555701360760-target
      selected: false
      source: '17555693082030'
      sourceHandle: source
      target: '17555701360760'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: code
        targetType: assigner
      id: 17555701360760-source-17555702366390-target
      selected: false
      source: '17555701360760'
      sourceHandle: source
      target: '17555702366390'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: llm
        targetType: answer
      id: 17555754302730-source-17555756807370-target
      selected: false
      source: '17555754302730'
      sourceHandle: source
      target: '17555756807370'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: assigner
        targetType: llm
      id: 1755576682837-source-17555754302730-target
      selected: false
      source: '1755576682837'
      sourceHandle: source
      target: '17555754302730'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: if-else
        targetType: assigner
      id: 17550601184610-ee2fb873-9609-4b49-b919-a87861680e62-1755576682837-target
      selected: false
      source: '17550601184610'
      sourceHandle: ee2fb873-9609-4b49-b919-a87861680e62
      target: '1755576682837'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: llm
        targetType: code
      id: 17555772893160-source-1755253097776-target
      selected: false
      source: '17555772893160'
      sourceHandle: source
      target: '1755253097776'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: if-else
        targetType: if-else
      id: 17550669548750-true-1755581527444-target
      selected: false
      source: '17550669548750'
      sourceHandle: 'true'
      target: '1755581527444'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: if-else
        targetType: llm
      id: 1755581527444-true-17555816082210-target
      selected: false
      source: '1755581527444'
      sourceHandle: 'true'
      target: '17555816082210'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: llm
        targetType: code
      id: 17555816082210-source-1755583116426-target
      selected: false
      source: '17555816082210'
      sourceHandle: source
      target: '1755583116426'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: code
        targetType: assigner
      id: 1755583116426-source-17555832109000-target
      selected: false
      source: '1755583116426'
      sourceHandle: source
      target: '17555832109000'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: llm
        targetType: if-else
      id: 1755583954150-source-1755584117347-target
      selected: false
      source: '1755583954150'
      sourceHandle: source
      target: '1755584117347'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: if-else
        targetType: llm
      id: 1755584117347-false-17550600850210-target
      selected: false
      source: '1755584117347'
      sourceHandle: 'false'
      target: '17550600850210'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: llm
        targetType: answer
      id: 1755584864069-source-1755585672345-target
      selected: false
      source: '1755584864069'
      sourceHandle: source
      target: '1755585672345'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: if-else
        targetType: llm
      id: 17550601184610-917267ba-3223-46ff-b32e-5888ad815262-1755587098480-target
      selected: false
      source: '17550601184610'
      sourceHandle: 917267ba-3223-46ff-b32e-5888ad815262
      target: '1755587098480'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: llm
        targetType: answer
      id: 1755587098480-source-1755587184420-target
      selected: false
      source: '1755587098480'
      sourceHandle: source
      target: '1755587184420'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: llm
        targetType: if-else
      id: 17555989086750-source-1755599062653-target
      selected: false
      source: '17555989086750'
      sourceHandle: source
      target: '1755599062653'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: if-else
        targetType: answer
      id: 1755599062653-false-17555706503860-target
      selected: false
      source: '1755599062653'
      sourceHandle: 'false'
      target: '17555706503860'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: if-else
        targetType: answer
      id: 17555991306140-false-17555832835340-target
      selected: false
      source: '17555991306140'
      sourceHandle: 'false'
      target: '17555832835340'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: llm
        targetType: if-else
      id: 1755598782790-source-17555991306140-target
      selected: false
      source: '1755598782790'
      sourceHandle: source
      target: '17555991306140'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: code
        targetType: llm
      id: 1755599442832-source-1755598782790-target
      selected: false
      source: '1755599442832'
      sourceHandle: source
      target: '1755598782790'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: assigner
        targetType: code
      id: 17555832109000-source-1755599442832-target
      selected: false
      source: '17555832109000'
      sourceHandle: source
      target: '1755599442832'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: assigner
        targetType: code
      id: 17555702366390-source-17555996655750-target
      selected: false
      source: '17555702366390'
      sourceHandle: source
      target: '17555996655750'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: code
        targetType: llm
      id: 17555996655750-source-17555989086750-target
      selected: false
      source: '17555996655750'
      sourceHandle: source
      target: '17555989086750'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: assigner
        targetType: code
      id: 17550620667450-source-17555998217170-target
      selected: false
      source: '17550620667450'
      sourceHandle: source
      target: '17555998217170'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: code
        targetType: llm
      id: 17555998217170-source-17550661175780-target
      source: '17555998217170'
      sourceHandle: source
      target: '17550661175780'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: if-else
        targetType: code
      id: 1755581527444-false-17555998980340-target
      source: '1755581527444'
      sourceHandle: 'false'
      target: '17555998980340'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: code
        targetType: llm
      id: 17555998980340-source-17555772893160-target
      source: '17555998980340'
      sourceHandle: source
      target: '17555772893160'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: if-else
        targetType: code
      id: 17551656610950-true-17556000000140-target
      source: '17551656610950'
      sourceHandle: 'true'
      target: '17556000000140'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: code
        targetType: llm
      id: 17556000000140-source-17551660546480-target
      source: '17556000000140'
      sourceHandle: source
      target: '17551660546480'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: if-else
        targetType: code
      id: 17551656610950-0ecb0700-9c3b-4bfa-8433-ed335e40937e-17556000708650-target
      source: '17551656610950'
      sourceHandle: 0ecb0700-9c3b-4bfa-8433-ed335e40937e
      target: '17556000708650'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: code
        targetType: llm
      id: 17556000708650-source-17551658398830-target
      source: '17556000708650'
      sourceHandle: source
      target: '17551658398830'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: if-else
        targetType: code
      id: 17551656610950-false-17556000775140-target
      source: '17551656610950'
      sourceHandle: 'false'
      target: '17556000775140'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: code
        targetType: llm
      id: 17556000775140-source-17551688288560-target
      selected: false
      source: '17556000775140'
      sourceHandle: source
      target: '17551688288560'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: if-else
        targetType: llm
      id: 17555991306140-true-1755600212316-target
      source: '17555991306140'
      sourceHandle: 'true'
      target: '1755600212316'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: llm
        targetType: answer
      id: 1755600212316-source-1755600389924-target
      source: '1755600212316'
      sourceHandle: source
      target: '1755600389924'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: llm
        targetType: answer
      id: 17556004106170-source-17556004131570-target
      source: '17556004106170'
      sourceHandle: source
      target: '17556004131570'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: if-else
        targetType: llm
      id: 1755599062653-true-17556004106170-target
      source: '1755599062653'
      sourceHandle: 'true'
      target: '17556004106170'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: start
        targetType: if-else
      id: 1723433389887-source-1755604753838-target
      source: '1723433389887'
      sourceHandle: source
      target: '1755604753838'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: if-else
        targetType: llm
      id: 1755604753838-true-1755583954150-target
      source: '1755604753838'
      sourceHandle: 'true'
      target: '1755583954150'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: if-else
        targetType: llm
      id: 1755584117347-true-1755584864069-target
      source: '1755584117347'
      sourceHandle: 'true'
      target: '1755584864069'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: if-else
        targetType: llm
      id: 1755604753838-false-17550600850210-target
      source: '1755604753838'
      sourceHandle: 'false'
      target: '17550600850210'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: if-else
        targetType: llm
      id: 1755584117347-19e220aa-d4b8-4c18-a8be-0d8d897de6a4-1756201560250-target
      source: '1755584117347'
      sourceHandle: 19e220aa-d4b8-4c18-a8be-0d8d897de6a4
      target: '1756201560250'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: llm
        targetType: answer
      id: 1756201560250-source-1756201679026-target
      source: '1756201560250'
      sourceHandle: source
      target: '1756201679026'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: if-else
        targetType: llm
      id: 17550601184610-9ea327bd-0f55-4454-bc22-1078a0861237-1756202663914-target
      source: '17550601184610'
      sourceHandle: 9ea327bd-0f55-4454-bc22-1078a0861237
      target: '1756202663914'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: llm
        targetType: answer
      id: 1756202663914--1756202837930-target
      source: '1756202663914'
      sourceHandle: source
      target: '1756202837930'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: if-else
        targetType: llm
      id: 17550601184610-38b1c5dc-9063-464c-aa80-7b2d2ade48d1-1756203059035-target
      source: '17550601184610'
      sourceHandle: 38b1c5dc-9063-464c-aa80-7b2d2ade48d1
      target: '1756203059035'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: llm
        targetType: answer
      id: 1756203059035-source-1756203308614-target
      source: '1756203059035'
      sourceHandle: source
      target: '1756203308614'
      targetHandle: target
      type: custom
      zIndex: 0
    nodes:
    - data:
        desc: ''
        selected: false
        title: ãƒ¦ãƒ¼ã‚¶ãƒ¼å…¥åŠ›
        type: start
        variables: []
      height: 54
      id: '1723433389887'
      position:
        x: 30
        y: 2153.5
      positionAbsolute:
        x: 30
        y: 2153.5
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        context:
          enabled: false
          variable_selector: []
        desc: ''
        memory:
          query_prompt_template: "# ã‚ãªãŸãŒåˆ©ç”¨ã§ãã‚‹æƒ…å ±ï¼ˆã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆï¼‰\n- ã“ã‚Œã¯ç¾åœ¨ã®ãƒ¯ãƒ¼ã‚­ãƒ³ã‚°ãƒ¡ãƒ¢ãƒªã®çŠ¶æ…‹ã§ã™ã€‚ã‚‚ã—ç©ºï¼ˆ{}ï¼‰ã‚„ç©ºã®é…åˆ—ï¼ˆ[]ï¼‰ãªã‚‰ã°ã€ã“ã‚ŒãŒæœ€åˆã®å¯¾è©±ã§ã™ã€‚\n\
            \  - ç¾åœ¨ã®ãƒ¯ãƒ¼ã‚­ãƒ³ã‚°ãƒ¡ãƒ¢ãƒª: {{#conversation.memory#}}\n- ã“ã‚Œã¯ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‹ã‚‰ã®æœ€æ–°ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã§ã™ã€‚\n\
            \  - ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æœ€æ–°ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸: {{#sys.query#}}"
          role_prefix:
            assistant: ''
            user: ''
          window:
            enabled: false
            size: 50
        model:
          completion_params:
            temperature: 0.7
          mode: chat
          name: gpt-4o
          provider: langgenius/openai/openai
        prompt_template:
        - id: 4447a6dc-5818-47ff-9b4d-a64792e4e8dc
          role: system
          text: '# ã‚ãªãŸã®å½¹å‰²ï¼ˆã‚¢ã‚¤ãƒ‡ãƒ³ãƒ†ã‚£ãƒ†ã‚£ï¼‰

            ã‚ãªãŸã¯ã€ŒProfile AIã€ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ã‚’æ§‹ç¯‰ã™ã‚‹ãŸã‚ã«ã€å¯¾è©±ã®æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—ã‚’æ±ºå®šã™ã‚‹ã€æˆ¦ç•¥çš„ãªAIã‚¤ãƒ³ã‚¿ãƒ“ãƒ¥ã‚¢ãƒ¼ã§ã™ã€‚


            # æ™®éçš„ãªãƒ«ãƒ¼ãƒ«

            å‡ºåŠ›ã¯ã€ã€Œtopicã€ã€Œthinking_processã€ã€Œnext_actionã€ã€Œcaptured_requestã€ã€ãã—ã¦ã€Œcaptured_profile_infoã€ã®5ã¤ã®ã‚­ãƒ¼ã‚’æŒã¤JSONã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã§ãªã‘ã‚Œã°ãªã‚Šã¾ã›ã‚“ã€‚'
        - id: 3920b088-f8f3-48d5-8c54-c3a82c023507
          role: user
          text: "# ã‚ãªãŸã®å³å¯†ãªã‚¿ã‚¹ã‚¯\nã‚ãªãŸã®å”¯ä¸€ã®ã‚¿ã‚¹ã‚¯ã¯ã€ä»¥ä¸‹ã®ãƒ«ãƒ¼ãƒ«ã«**å³å¯†ã«**å¾“ã£ã¦ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æ„å›³ã‚’åˆ¤æ–­ã—ã€æ¬¡ã«å–ã‚‹ã¹ãæœ€é©ãªã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚’æ±ºå®šã™ã‚‹ã“ã¨ã§ã™ã€‚\n\
            \n## æ€è€ƒã®ã‚¹ãƒ†ãƒƒãƒ— å…¼ ã‚¢ã‚¯ã‚·ãƒ§ãƒ³æ±ºå®šã®ãƒ«ãƒ¼ãƒ«\n\n1.  **ã€æœ€å„ªå…ˆã€‘ãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ—æç¤ºã®åˆ¤æ–­:**\n    - ã¾ãšã€ãƒ¯ãƒ¼ã‚­ãƒ³ã‚°ãƒ¡ãƒ¢ãƒªã®`interaction_state`ã«`roadmap_presented:\
            \ true`ã¨ã„ã†ãƒ•ãƒ©ã‚°ãŒã‚ã‚‹ã‹ç¢ºèªã—ã¾ã™ã€‚\n    - **ã‚‚ã—ãƒ•ãƒ©ã‚°ãŒãªã„å ´åˆï¼ˆï¼ã¾ã ãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ—ã‚’æç¤ºã—ã¦ã„ãªã„ï¼‰:**\n  \
            \      - ã‹ã¤ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æœ€æ–°ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã«**åå‰ã€ä¼šç¤¾åã€å½¹è·**ã¨ã„ã£ãŸå…·ä½“çš„ãªãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«æƒ…å ±ãŒ**ä¸€ã¤ã§ã‚‚å«ã¾ã‚Œã¦ã„ã‚‹**ã‹ã€ã‚ã‚‹ã„ã¯ãƒ¡ãƒ¢ãƒªå†…ã«ãã‚Œã‚‰ã®æƒ…å ±ãŒ**ä¸€ã¤ã§ã‚‚å­˜åœ¨ã™ã‚‹**å ´åˆã€`next_action`ã¯å¿…ãš**`PRESENT_ROADMAP`**ã«ã—ã¦ãã ã•ã„ã€‚\n\
            \n2.  **ã€æ¬¡ã«ã€‘æ‚©ã¿ã¸ã®ã‚³ãƒ¼ãƒãƒ³ã‚°ä»‹å…¥:**\n    - ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒã€Œåˆ†ã‹ã‚‰ãªã„ã€ã€Œé›£ã—ã„ã€ã¨ã„ã£ãŸ**æ€è€ƒã®åœæ»ã‚„æ‚©ã¿**ã‚’ç¤ºã—ã¦ã„ã‚‹å ´åˆã€`next_action`ã¯`COACHING_INTERVENTION`ã«ã—ã¦ãã ã•ã„ã€‚\n\
            \n3.  **ã€é€šå¸¸ãƒ•ãƒ­ãƒ¼ã€‘ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒªãƒ³ã‚° or ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒ’ã‚¢ãƒªãƒ³ã‚°:**\n    - `phase`ãŒ`request_hearing`ãªã‚‰\
            \ â†’ `PROCESS_REQUEST`\n    - `phase`ãŒ`profiling`ï¼ˆã¾ãŸã¯`consulting`ï¼‰ã§ã€\n\
            \        - `topic`ãŒ`PROFILING`ãªã‚‰ â†’ `UPDATE_MEMORY`\n        - `topic`ãŒ`REQUEST`ãªã‚‰\
            \ â†’ `GUIDE_TO_PROFILING`\n\nï¼ˆâ€»ã“ã‚Œã¾ã§ã®`ASK_FOR_NAME_FIRST`ãªã©ã®ãƒ«ãƒ¼ãƒ«ã¯ã€ã“ã®æ–°ã—ã„`PRESENT_ROADMAP`ã®ãƒ­ã‚¸ãƒƒã‚¯ã«å¸åãƒ»çµ±åˆã•ã‚Œã¾ã™ï¼‰"
        - id: d91a897b-2487-4588-b2b5-cf7790a6da08
          role: assistant
          text: "# å‡ºåŠ›ä¾‹ï¼ˆãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ã¨ãƒªã‚¯ã‚¨ã‚¹ãƒˆãŒæ··åœ¨ã—ãŸå ´åˆï¼‰\n{\n  \"topic\": \"REQUEST\",\n  \"thinking_process\"\
            : \"ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯ãƒªã‚¯ã‚¨ã‚¹ãƒˆã¨ä¸€éƒ¨ã®ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«æƒ…å ±ã‚’åŒæ™‚ã«è©±ã—ã¦ã„ã¾ã™ãŒã€ã¾ã ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒªãƒ³ã‚°ãŒå®Œäº†ã—ã¦ã„ã¾ã›ã‚“ã€‚ã¾ãšå¯¾è©±ã‚’èª˜å°ã—ã€ãã®é–“ã«æä¾›ã•ã‚ŒãŸãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«æƒ…å ±ã‚’ä¸€æ™‚çš„ã«è¨˜æ†¶ã—ã¾ã™ã€‚\"\
            ,\n  \"next_action\": \"GUIDE_TO_PROFILING\",\n  \"captured_request\"\
            : \"åŒã˜åˆ†é‡ã§äº‹æ¥­ã‚’ç«‹ã¡ä¸Šã’ãŸçµŒé¨“ã®ã‚ã‚‹èµ·æ¥­å®¶ã¨è©±ã—ãŸã„\",\n  \"captured_profile_info\": {\n  \
            \  \"name\": \"ä½è—¤çœŸç†å­\",\n    \"company\": \"Connect Inc.\",\n    \"role\"\
            : null\n  }\n}"
        retry_config:
          max_retries: 3
          retry_enabled: true
          retry_interval: 1000
        selected: false
        structured_output:
          schema:
            properties:
              captured_profile_info:
                description: ã‚‚ã—`next_action`ãŒ`GUIDE_TO_PROFILING`ã®å ´åˆã§ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ç™ºè¨€ã«ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«æƒ…å ±ãŒå«ã¾ã‚Œã¦ã„ã‚Œã°ã€ã“ã“ã«ãã®æƒ…å ±ãŒã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¨ã—ã¦å…¥ã‚‹ã€‚ãã‚Œä»¥å¤–ã¯nullã€‚
                properties:
                  company:
                    type:
                    - string
                    - 'null'
                  name:
                    type:
                    - string
                    - 'null'
                  role:
                    type:
                    - string
                    - 'null'
                type:
                - object
                - 'null'
              captured_request:
                description: ã‚‚ã—`next_action`ãŒ`GUIDE_TO_PROFILING`ã®å ´åˆã€ã“ã“ã«ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆå†…å®¹ã®è¦ç´„ãŒå…¥ã‚‹ã€‚ãã‚Œä»¥å¤–ã¯nullã€‚
                type:
                - string
                - 'null'
              next_action:
                description: æ¬¡ã«å®Ÿè¡Œã™ã¹ãã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚³ãƒ¼ãƒ‰ã€‚
                enum:
                - UPDATE_MEMORY
                - ASK_FOR_MORE_INFO
                - ANALYZE_RESPONSE_INTENT
                - PROCESS_REQUEST
                - GUIDE_TO_PROFILING
                - COACHING_INTERVENTION
                type: string
              thinking_process:
                description: ãªãœæ¬¡ã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚’é¸æŠã—ãŸã®ã‹ã€ãã®æ€è€ƒãƒ—ãƒ­ã‚»ã‚¹ã®ç°¡æ½”ãªèª¬æ˜ã€‚
                type: string
              topic:
                description: ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ç™ºè¨€ã®ä¸»é¡Œã€‚'PROFILING'ï¼ˆè‡ªå·±ç´¹ä»‹ãªã©ï¼‰ã€'REQUEST'ï¼ˆä¼šã„ãŸã„äººã®è©±ï¼‰ã€ã¾ãŸã¯'OTHER'ï¼ˆãã®ä»–ï¼‰ã®ã„ãšã‚Œã‹ã€‚
                enum:
                - PROFILING
                - REQUEST
                - OTHER
                type: string
            required:
            - topic
            - thinking_process
            - next_action
            - captured_request
            - captured_profile_info
            type: object
        structured_output_enabled: true
        title: 2. æ€è€ƒã¨åˆ¤æ–­
        type: llm
        variables: []
        vision:
          configs:
            detail: high
          enabled: false
      height: 119
      id: '17550600850210'
      position:
        x: 2216
        y: 2089
      positionAbsolute:
        x: 2216
        y: 2089
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        cases:
        - case_id: 'true'
          conditions:
          - comparison_operator: contains
            id: ce01e29b-8afa-42c9-9cd0-16aa9c3dc06e
            value: UPDATE_MEMORY
            varType: string
            variable_selector:
            - '17550600850210'
            - structured_output
            - next_action
          id: 'true'
          logical_operator: and
        - case_id: ad396fd1-064e-4653-af5d-df4db2ee89a8
          conditions:
          - comparison_operator: is
            id: 073edddd-f686-474e-a26a-b9c5ce002205
            value: PROCESS_REQUEST
            varType: object
            variable_selector:
            - '17550600850210'
            - structured_output
            - next_action
          id: ad396fd1-064e-4653-af5d-df4db2ee89a8
          logical_operator: and
        - case_id: ee2fb873-9609-4b49-b919-a87861680e62
          conditions:
          - comparison_operator: contains
            id: 174c0ecd-c642-4f45-a4e5-c9e29c00f530
            value: GUIDE_TO_PROFILING
            varType: string
            variable_selector:
            - '17550600850210'
            - structured_output
            - next_action
          id: ee2fb873-9609-4b49-b919-a87861680e62
          logical_operator: and
        - case_id: 5dbbfc0b-a6f1-4b10-b8fb-f1367e00b417
          conditions:
          - comparison_operator: is
            id: 09fd9182-15b5-4725-ab68-d1cd8c7cd438
            value: ANALYZE_RESPONSE_INTENT
            varType: object
            variable_selector:
            - '17550600850210'
            - structured_output
            - next_action
          id: 5dbbfc0b-a6f1-4b10-b8fb-f1367e00b417
          logical_operator: and
        - case_id: 917267ba-3223-46ff-b32e-5888ad815262
          conditions:
          - comparison_operator: is
            id: 6890e59e-e81d-4e9d-a111-7f335a563a71
            value: ASK_FOR_NAME_FIRST
            varType: object
            variable_selector:
            - '17550600850210'
            - structured_output
            - next_action
          id: 917267ba-3223-46ff-b32e-5888ad815262
          logical_operator: and
        - case_id: 9ea327bd-0f55-4454-bc22-1078a0861237
          conditions:
          - comparison_operator: is
            id: c7108901-10ea-4b5d-a96c-7d3524f9e043
            value: PRESENT_ROADMAP
            varType: object
            variable_selector:
            - '17550600850210'
            - structured_output
            - next_action
          id: 9ea327bd-0f55-4454-bc22-1078a0861237
          logical_operator: and
        - case_id: 38b1c5dc-9063-464c-aa80-7b2d2ade48d1
          conditions:
          - comparison_operator: is
            id: f6815072-6c3b-4dc9-8c50-3153eade4de5
            value: COACHING_INTERVENTION
            varType: object
            variable_selector:
            - '17550600850210'
            - structured_output
            - next_action
          logical_operator: and
        desc: ''
        selected: false
        title: ã‚¢ã‚¯ã‚·ãƒ§ãƒ³åˆ†å²
        type: if-else
      height: 414
      id: '17550601184610'
      position:
        x: 2550
        y: 2053.5
      positionAbsolute:
        x: 2550
        y: 2053.5
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        context:
          enabled: false
          variable_selector: []
        desc: ''
        memory:
          query_prompt_template: "# ã‚ãªãŸãŒåˆ©ç”¨ã§ãã‚‹æƒ…å ±ï¼ˆã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆï¼‰\n- ã“ã‚ŒãŒ**æ›´æ–°å‰**ã®ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«æƒ…å ±ã§ã™ï¼ˆç©ºã®å ´åˆã‚‚ã‚ã‚Šã¾ã™ï¼‰ã€‚\n\
            \  - å‰å›ã®ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«æƒ…å ±: {{#conversation.memory#}}\n\n- ã“ã‚Œã¯ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒå…ˆè¡Œã—ã¦è©±ã—ãŸ**ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«æƒ…å ±ã®æ–­ç‰‡**ã§ã™ï¼ˆç©ºã®å ´åˆã‚‚ã‚ã‚Šã¾ã™ï¼‰ã€‚ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã•ã‚ŒãŸãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«æƒ…å ±:\
            \ {{#conversation.captured_profile_cache#}}\n- ã“ã‚ŒãŒã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‹ã‚‰æä¾›ã•ã‚ŒãŸ**æœ€æ–°ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸**ã§ã™ã€‚\n\
            \  - ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æœ€æ–°ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸: {{#sys.query#}}"
          role_prefix:
            assistant: ''
            user: ''
          window:
            enabled: false
            size: 50
        model:
          completion_params:
            temperature: 0.7
          mode: chat
          name: gpt-4o
          provider: langgenius/openai/openai
        prompt_template:
        - id: c99691e0-c192-4f14-8caa-3ea897c01bea
          role: system
          text: '# ã‚ãªãŸã®å½¹å‰²ï¼ˆã‚¢ã‚¤ãƒ‡ãƒ³ãƒ†ã‚£ãƒ†ã‚£ï¼‰

            ã‚ãªãŸã¯ã€ŒProfile AIã€ã€è¤‡æ•°ã®æƒ…å ±æºã‚’çµ±åˆã—ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ã€Œãƒ¯ãƒ¼ã‚­ãƒ³ã‚°ãƒ¡ãƒ¢ãƒªã€ã‚’æ§‹é€ åŒ–ã•ã‚ŒãŸJSONå½¢å¼ã§ã€ç´°å¿ƒã®æ³¨æ„ã‚’æ‰•ã£ã¦ç¶­æŒç®¡ç†ã™ã‚‹ã€é«˜åº¦ãªãƒ‡ãƒ¼ã‚¿çµ±åˆAIã§ã™ã€‚


            # æ™®éçš„ãªãƒ«ãƒ¼ãƒ«

            ã‚ãªãŸã®å‡ºåŠ›ã¯ã€å¿…ãšã€Œæ§‹é€ åŒ–å‡ºåŠ›ã€ã§å®šç¾©ã•ã‚ŒãŸJSONã‚¹ã‚­ãƒ¼ãƒã«å³å¯†ã«å¾“ã£ãŸã€ç”Ÿã®JSONã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®ã¿ã§ãªã‘ã‚Œã°ãªã‚Šã¾ã›ã‚“ã€‚'
        - id: 5476fec1-333c-4236-a6ca-9c135097f7bb
          role: user
          text: '# ã‚ãªãŸã®å³å¯†ãªã‚¿ã‚¹ã‚¯

            ã‚ãªãŸã®å”¯ä¸€ã®ã‚¿ã‚¹ã‚¯ã¯ã€**ä¸Šè¨˜3ã¤ã®æƒ…å ±æºã™ã¹ã¦ã‚’è€ƒæ…®**ã—ã€**æ›´æ–°ã•ã‚ŒãŸå®Œå…¨ãªãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«æƒ…å ±ã®JSONã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ç”Ÿæˆã™ã‚‹ã“ã¨**ã§ã™ã€‚


            ## æ›´æ–°ã®çµ¶å¯¾çš„ãªãƒ«ãƒ¼ãƒ«

            1.  **çµ±åˆ:** ã€Œå‰å›ã®ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«æƒ…å ±ã€ã€Œã‚­ãƒ£ãƒƒã‚·ãƒ¥ã•ã‚ŒãŸãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«æƒ…å ±ã€ã€Œãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æœ€æ–°ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã€ã«å«ã¾ã‚Œã‚‹**ã™ã¹ã¦ã®æƒ…å ±ã‚’ã€é‡è¤‡ãªãçµ±åˆ**ã—ã¦ãã ã•ã„ã€‚

            2.  **ã‚¼ãƒ­ã‹ã‚‰ä½œæˆ:** ã™ã¹ã¦ã®æƒ…å ±æºãŒç©ºã®å ´åˆã€æœ€æ–°ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã ã‘ã‚’å…ƒã«æ§‹ç¯‰ã—ã¦ãã ã•ã„ã€‚

            3.  **æ—¢å­˜æƒ…å ±ã®ä¿æŒ:** æ—¢å­˜ã®æƒ…å ±ã¯ã€æ–°ã—ã„æƒ…å ±ã§æ˜ç¢ºã«ä¸Šæ›¸ãã•ã‚Œãªã„é™ã‚Šã€å¿…ãšä¿æŒã—ã¦ãã ã•ã„ã€‚

            4.  **æ¨è«–:** ã™ã¹ã¦ã®æƒ…å ±ã‚’å…ƒã«ã€`qualitative_info`ï¼ˆä¾¡å€¤è¦³ã€å‹•æ©Ÿãªã©ï¼‰ã‚’è±Šã‹ã«ã—ã¦ãã ã•ã„ã€‚


            # åå‰ã®æŠ½å‡ºã«é–¢ã™ã‚‹ç‰¹åˆ¥ãƒ«ãƒ¼ãƒ«

            - ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã«ã€Œç§ã¯ã€‡ã€‡ã§ã™ã€ã€Œã€‡ã€‡ã¨ç”³ã—ã¾ã™ã€ã¨ã„ã£ãŸã€æ˜ç¢ºãªåå‰ã®æç¤ºãŒã‚ã‚Œã°ã€ãã‚Œã‚’å¿…ãš`profile.static_info.name`ã«æ ¼ç´ã—ã¦ãã ã•ã„ã€‚'
        retry_config:
          max_retries: 3
          retry_enabled: true
          retry_interval: 1000
        selected: false
        structured_output:
          schema:
            properties:
              interaction_state:
                description: ç¾åœ¨ã®å¯¾è©±ã®çŠ¶æ…‹ã‚’ç®¡ç†ã™ã‚‹ã€‚
                properties:
                  last_update:
                    description: æœ€çµ‚æ›´æ–°æ—¥æ™‚
                    type: string
                  phase:
                    default: profiling
                    description: ç¾åœ¨ã®ä¼šè©±ãƒ•ã‚§ãƒ¼ã‚ºã€‚'profiling' ã¾ãŸã¯ 'request_hearing'ã€‚
                    type: string
                type: object
              profile:
                description: å¯¾è©±ã‹ã‚‰æŠ½å‡ºã•ã‚ŒãŸãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«æƒ…å ±ã€‚
                properties:
                  qualitative_info:
                    description: ãƒ“ã‚¸ãƒ§ãƒ³ã€ä¾¡å€¤è¦³ã€å‹•æ©Ÿãªã©ã®å®šæ€§çš„ãªæƒ…å ±ã€‚
                    properties:
                      core_vision:
                        description: ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒæŒã¤ä¸­å¿ƒçš„ãªãƒ“ã‚¸ãƒ§ãƒ³ã‚„æŠ½è±¡çš„ãªç›®æ¨™
                        type: string
                      motivations:
                        description: æ¨æ¸¬ã•ã‚Œã‚‹ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®å‹•æ©Ÿã®ãƒªã‚¹ãƒˆ
                        items:
                          type: string
                        type: array
                      values:
                        description: æ¨æ¸¬ã•ã‚Œã‚‹ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ä¾¡å€¤è¦³ã®ãƒªã‚¹ãƒˆ
                        items:
                          type: string
                        type: array
                    type: object
                  static_info:
                    description: åå‰ã€ä¼šç¤¾ã€å½¹å‰²ãªã©ã®äº‹å®Ÿæƒ…å ±ã€‚
                    properties:
                      company:
                        description: ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒæ‰€å±ã™ã‚‹ä¼šç¤¾å
                        type: string
                      name:
                        description: ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®åå‰
                        type: string
                      role:
                        description: ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®å½¹å‰²ã‚„å½¹è·
                        type: string
                    type: object
                type: object
              user_id:
                description: ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ä¸€æ„ãªIDã€‚æœ€åˆã¯ãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€ãƒ¼ã§è‰¯ã„ã€‚
                type: string
            required:
            - profile
            - interaction_state
            type: object
        structured_output_enabled: true
        title: ãƒ¡ãƒ¢ãƒªæŠ½å‡ºãƒ»æ›´æ–°
        type: llm
        variables: []
        vision:
          configs:
            detail: high
          enabled: false
      height: 119
      id: '17550603659250'
      position:
        x: 2975
        y: 630
      positionAbsolute:
        x: 2975
        y: 630
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        code: "import json\nimport datetime\n\ndef main(**kwargs) -> dict:\n    \"\
          \"\"\n    LLMã‹ã‚‰å‡ºåŠ›ã•ã‚ŒãŸJSONæ–‡å­—åˆ—ã‚’ãƒ‘ãƒ¼ã‚¹ã—ã€\n    æ–°ã—ã„ã‚¹ã‚­ãƒ¼ãƒã«åˆã‚ã›ã¦ãƒ¯ãƒ¼ã‚­ãƒ³ã‚°ãƒ¡ãƒ¢ãƒªã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’æ§‹ç¯‰ãƒ»æ›´æ–°ã™ã‚‹ã€‚\n\
          \    \"\"\"\n    try:\n        llm_output_str = kwargs.get('arg1', '')\n\
          \        # â˜…è¿½åŠ ï¼šå‰å›ã®ãƒ¡ãƒ¢ãƒªã‚‚å…¥åŠ›ã¨ã—ã¦å—ã‘å–ã‚‹ï¼ˆæ›´æ–°å‡¦ç†ã®ãŸã‚ï¼‰\n        previous_memory_str =\
          \ kwargs.get('arg2', '{}')\n        \n        # --- LLMå‡ºåŠ›ã®ãƒ‘ãƒ¼ã‚¹å‡¦ç†ï¼ˆå¤‰æ›´ãªã—ï¼‰ ---\n\
          \        if not isinstance(llm_output_str, str) or not llm_output_str.strip():\n\
          \            return {\"error\": \"Input from LLM node is empty or not a\
          \ string.\"}\n\n        start_index = llm_output_str.find('{')\n       \
          \ end_index = llm_output_str.rfind('}') + 1\n        \n        if start_index\
          \ == -1 or end_index == 0:\n            raise json.JSONDecodeError(\"JSON\
          \ object not found in the input string.\", llm_output_str, 0)\n        \
          \    \n        json_str = llm_output_str[start_index:end_index]\n      \
          \  new_data = json.loads(json_str)\n        \n        # --- ãƒ¡ãƒ¢ãƒªã®æ›´æ–°ãƒ­ã‚¸ãƒƒã‚¯ã‚’å¼·åŒ–\
          \ ---\n        # å‰å›ã®ãƒ¡ãƒ¢ãƒªã‚’dictã«ãƒ‘ãƒ¼ã‚¹\n        try:\n            previous_memory\
          \ = json.loads(previous_memory_str) if previous_memory_str and previous_memory_str\
          \ != '{}' else {}\n        except:\n            previous_memory = {}\n\n\
          \        # â˜…â˜…â˜… ã“ã“ã‹ã‚‰ãŒæ–°ã—ã„æ§‹é€ ã«å¯¾å¿œã—ãŸæ›´æ–°å‡¦ç† â˜…â˜…â˜…\n        \n        # profileéƒ¨åˆ†ã®æ›´æ–°ï¼ˆæ·±ã„éšå±¤ã¾ã§ãƒãƒ¼ã‚¸ï¼‰\n\
          \        updated_profile = previous_memory.get(\"profile\", {})\n      \
          \  new_profile = new_data.get(\"profile\", {})\n        \n        if new_profile.get(\"\
          static_info\"):\n            updated_profile.setdefault(\"static_info\"\
          , {}).update(new_profile[\"static_info\"])\n        if new_profile.get(\"\
          qualitative_info\"):\n             updated_profile.setdefault(\"qualitative_info\"\
          , {}).update(new_profile[\"qualitative_info\"])\n\n        # interaction_stateéƒ¨åˆ†ã®æ›´æ–°\n\
          \        updated_state = previous_memory.get(\"interaction_state\", {})\n\
          \        # ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ãƒ•ã‚§ãƒ¼ã‚ºã‚’è¨­å®š\n        if \"phase\" not in updated_state:\n \
          \           updated_state[\"phase\"] = \"profiling\"\n        # æœ€çµ‚æ›´æ–°æ—¥æ™‚ã‚’ç¾åœ¨æ™‚åˆ»ã«è¨­å®š\n\
          \        updated_state[\"last_update\"] = datetime.datetime.utcnow().isoformat()\
          \ + \"Z\"\n\n        # Difyã®å¤‰æ•°ä»£å…¥ãƒãƒ¼ãƒ‰ã«æ¸¡ã™ãŸã‚ã®æœ€çµ‚çš„ãªã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’æ§‹ç¯‰ã™ã‚‹\n        result\
          \ = {\n            \"user_id\": previous_memory.get(\"user_id\") or new_data.get(\"\
          user_id\", \"placeholder\"),\n            \"interaction_state\": updated_state,\n\
          \            \"profile\": updated_profile\n        }\n        \n       \
          \ return {\n            \"mem\": result\n        }\n\n    except json.JSONDecodeError\
          \ as e:\n        return { \"error\": f\"Invalid JSON format: {e}\" }\n \
          \   except Exception as e:\n        return { \"error\": f\"An unexpected\
          \ error occurred: {str(e)}\" }"
        code_language: python3
        desc: ''
        outputs:
          mem:
            children: null
            type: object
        selected: false
        title: JSON -> ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆå¤‰æ›
        type: code
        variables:
        - value_selector:
          - '17550603659250'
          - text
          value_type: string
          variable: arg1
      height: 54
      id: '17550620390260'
      position:
        x: 3309
        y: 630
      positionAbsolute:
        x: 3309
        y: 630
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        assigned_variable_selector:
        - conversation
        - memory
        desc: ''
        input_variable_selector:
        - '1723441002334'
        - mem
        items:
        - input_type: variable
          operation: append
          value:
          - '17550620390260'
          - mem
          variable_selector:
          - conversation
          - memory
          write_mode: over-write
        selected: false
        title: ãƒ¡ãƒ¢ãƒªä¿å­˜
        type: assigner
        version: '2'
        write_mode: append
      height: 86
      id: '17550620667450'
      position:
        x: 3643
        y: 630
      positionAbsolute:
        x: 3643
        y: 630
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        context:
          enabled: false
          variable_selector: []
        desc: ''
        error_strategy: fail-branch
        memory:
          query_prompt_template: "# ã‚ãªãŸãŒåˆ©ç”¨ã§ãã‚‹æƒ…å ±ï¼ˆã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆï¼‰\n- ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®å…¥åŠ›ï¼š{{#sys.query#}}\n\
            - ãªãœæ¬¡ã®è³ªå•ãŒå¿…è¦ã‹ã®ç†ç”±ï¼ˆã‚ãªãŸã®è‡ªå·±åˆ†æï¼‰: \n{{#17550600850210.structured_output.thinking_process#}}\n\
            - ç¾åœ¨ã®ãƒ¯ãƒ¼ã‚­ãƒ³ã‚°ãƒ¡ãƒ¢ãƒªã®çŠ¶æ…‹ï¼ˆç©ºã®å ´åˆã‚‚ã‚ã‚Šã¾ã™ï¼‰: {{#conversation.memory#}}"
          role_prefix:
            assistant: ''
            user: ''
          window:
            enabled: false
            size: 50
        model:
          completion_params:
            temperature: 0.7
          mode: chat
          name: gpt-4o
          provider: langgenius/openai/openai
        prompt_template:
        - id: c162dbfd-5159-4df9-9e06-9d638522c6be
          role: system
          text: '# ã‚ãªãŸã®å½¹å‰²ï¼ˆã‚¢ã‚¤ãƒ‡ãƒ³ãƒ†ã‚£ãƒ†ã‚£ï¼‰

            ã‚ãªãŸã¯ã€ŒProfile AIã€ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¨ã®å¯¾è©±ã‚’å¸¸ã«æœ¬è³ªçš„ãªç›®çš„ã«å‘ã‘ã¦ã€å„ªã—ãã‚¬ã‚¤ãƒ‰ã™ã‚‹ã®ãŒå¾—æ„ãªã€è¶…ä¸€æµã®ã‚¤ãƒ³ã‚¿ãƒ“ãƒ¥ã‚¢ãƒ¼ã§ã™ã€‚'
        - id: 936c311a-93d0-4649-8ef6-bcb11a261247
          role: user
          text: '# ã‚ãªãŸã®å³å¯†ãªã‚¿ã‚¹ã‚¯

            ã‚ãªãŸã®å½¹å‰²ã¯ã€ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã‚’åˆ†æã—ã€**åœæ»ã—ã¦ã„ã‚‹å¯¾è©±ã‚’ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒªãƒ³ã‚°ã®æœ¬é¡Œã¸ã¨è‡ªç„¶ã«æˆ»ã™ãŸã‚ã®ã€æ¸©ã‹ã¿ã®ã‚ã‚‹è³ªå•ã‚’1ã¤ã ã‘**ç”Ÿæˆã™ã‚‹ã“ã¨ã§ã™ã€‚

            - ã‚‚ã—ãƒ¯ãƒ¼ã‚­ãƒ³ã‚°ãƒ¡ãƒ¢ãƒªãŒã¾ã ç©ºãªã‚‰ã€ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒªãƒ³ã‚°ã‚’é–‹å§‹ã™ã‚‹ãŸã‚ã®æœ€åˆã®è³ªå•ã‚’ã—ã¦ãã ã•ã„ã€‚

            - ã‚‚ã—ãƒ¡ãƒ¢ãƒªã«æƒ…å ±ãŒå°‘ã—ã§ã‚‚ã‚ã‚‹ãªã‚‰ã€ãã®æƒ…å ±ã‚’è‚¯å®šã—ã¤ã¤ã€æ¬¡ãªã‚‹æƒ…å ±ã‚’å°‹ã­ã¦ãã ã•ã„ã€‚

            - ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ç›´å‰ã®ç™ºè¨€ï¼ˆæŒ¨æ‹¶ã‚„ãŠç¤¼ãªã©ï¼‰ã«ã‚‚ã€è»½ãè§¦ã‚Œã‚‹ã¨ã‚ˆã‚Šè‡ªç„¶ãªä¼šè©±ã«ãªã‚Šã¾ã™ã€‚

            - å‡ºåŠ›ã¯ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«å•ã„ã‹ã‘ã‚‹**è³ªå•æ–‡ãã®ã‚‚ã®ã ã‘**ã«ã—ã¦ãã ã•ã„ã€‚


            ## å¿œç­”ã®ãƒ‘ãƒ¼ã‚½ãƒŠãƒ©ã‚¤ã‚ºã«é–¢ã™ã‚‹ãƒ«ãƒ¼ãƒ«

            - ã‚‚ã—ã€Œãƒ¦ãƒ¼ã‚¶ãƒ¼ã®åå‰ã€ãŒåˆ¤æ˜ã—ã¦ã„ã‚‹å ´åˆã¯ã€å¿œç­”ã®å†’é ­ã§ã€Œã€‡ã€‡ã•ã‚“ã€ã€ã¨è‡ªç„¶ã«å‘¼ã³ã‹ã‘ã‚‹ã“ã¨ã‹ã‚‰å§‹ã‚ã¦ãã ã•ã„ã€‚

            - ãŸã ã—ã€ä¸è‡ªç„¶ã«ãªã‚‰ãªã„ã‚ˆã†ã€æ¯å›å¿…ãšå‘¼ã³ã‹ã‘ã‚‹å¿…è¦ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚æ–‡è„ˆã«å¿œã˜ã¦ã€æœ€ã‚‚äººé–“ã‚‰ã—ã„ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’é¸æŠã—ã¦ãã ã•ã„ã€‚'
        - id: 6caf7266-fba3-4d34-83eb-5eb3525eab26
          role: assistant
          text: '# å‡ºåŠ›ä¾‹


            ## ä¾‹1ï¼ˆãƒ¡ãƒ¢ãƒªãŒç©ºã§ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒã€Œã“ã‚“ã«ã¡ã¯ã€ã¨è¨€ã£ãŸå ´åˆï¼‰

            ã“ã‚“ã«ã¡ã¯ï¼ãŠè©±ã—ã§ãã‚‹ã“ã¨ã‚’å¬‰ã—ãæ€ã„ã¾ã™ã€‚

            æ—©é€Ÿã§ã™ãŒã€ã‚ãªãŸã®ã“ã¨ã‚’å°‘ã—æ•™ãˆã¦ã„ãŸã ã‘ã¾ã™ã‹ï¼Ÿã¾ãšã¯ãŠåå‰ã‹ã‚‰ãŠä¼ºã„ã—ã¦ã‚‚ã‚ˆã‚ã—ã„ã§ã—ã‚‡ã†ã‹ã€‚


            ## ä¾‹2ï¼ˆãƒ¡ãƒ¢ãƒªã«åå‰ã ã‘ã‚ã‚Šã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒã€Œã‚ã‚ŠãŒã¨ã†ã€ã¨è¨€ã£ãŸå ´åˆï¼‰

            ã©ã†ã„ãŸã—ã¾ã—ã¦ï¼ç”°ä¸­ã•ã‚“ã®ã“ã¨ã‚’ã‚‚ã£ã¨çŸ¥ã‚‹ã®ãŒæ¥½ã—ã¿ã§ã™ã€‚

            æ¬¡ã«ã€ç”°ä¸­ã•ã‚“ãŒç¾åœ¨ã©ã®ã‚ˆã†ãªä¼šç¤¾ã§ã€ã©ã‚“ãªå½¹å‰²ã‚’æ‹…ã£ã¦ã„ã‚‰ã£ã—ã‚ƒã‚‹ã®ã‹ã€æ•™ãˆã¦ã„ãŸã ã‘ã¾ã™ã‹ï¼Ÿ'
        retry_config:
          max_retries: 3
          retry_enabled: true
          retry_interval: 1000
        selected: false
        title: è¿½åŠ è³ªå•ç”Ÿæˆ
        type: llm
        variables: []
        vision:
          configs:
            detail: high
          enabled: false
      height: 155
      id: '17550621642540'
      position:
        x: 6983
        y: 2143
      positionAbsolute:
        x: 6983
        y: 2143
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        answer: '{{#17550621642540.text#}}'
        desc: ''
        selected: false
        title: è¿½åŠ è³ªå•å¿œç­”
        type: answer
        variables: []
      height: 105
      id: '17550621744400'
      position:
        x: 7317
        y: 2186
      positionAbsolute:
        x: 7317
        y: 2186
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        context:
          enabled: false
          variable_selector: []
        desc: ''
        error_strategy: fail-branch
        memory:
          query_prompt_template: "# ã‚ãªãŸãŒåˆ©ç”¨ã§ãã‚‹æƒ…å ±ï¼ˆã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆï¼‰\n- ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®å…¥åŠ›ï¼š{{#sys.query#}}\n\
            - ç¾åœ¨ã®ãƒ¯ãƒ¼ã‚­ãƒ³ã‚°ãƒ¡ãƒ¢ãƒªã®çŠ¶æ…‹ï¼ˆç©ºã®å ´åˆã‚‚ã‚ã‚Šã¾ã™ï¼‰: {{#conversation.memory#}}\n- ã“ã‚ŒãŒã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‹ã‚‰å—ã‘å–ã£ãŸæœ€æ–°ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆæƒ…å ±ã§ã™ã€‚\n\
            \  - ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒªã‚¯ã‚¨ã‚¹ãƒˆ: {{#17555998217170.requests_context#}}\n- å‚è€ƒã¾ã§ã«ã€ã“ã‚ŒãŒãƒ¦ãƒ¼ã‚¶ãƒ¼è‡ªèº«ã®ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ã§ã™ã€‚\n\
            \  - ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«: {{#17555998217170.profile_context#}}"
          role_prefix:
            assistant: ''
            user: ''
          window:
            enabled: false
            size: 50
        model:
          completion_params:
            temperature: 0.7
          mode: chat
          name: gpt-4o
          provider: langgenius/openai/openai
        prompt_template:
        - id: 4447a6dc-5818-47ff-9b4d-a64792e4e8dc
          role: system
          text: "# ã‚ãªãŸã®å½¹å‰²ï¼ˆã‚¢ã‚¤ãƒ‡ãƒ³ãƒ†ã‚£ãƒ†ã‚£ï¼‰\nã‚ãªãŸã¯ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«ã®å®Œæˆåº¦ã‚’è©•ä¾¡ã—ã€æ¬¡ãªã‚‹å¯¾è©±ã®æ–¹å‘æ€§ã‚’æ±ºå®šã™ã‚‹ã€ç†Ÿç·´ã®ã‚¤ãƒ³ã‚¿ãƒ“ãƒ¥ã‚¢ãƒ¼ã§ã™ã€‚ã‚ãªãŸã®æœ€çµ‚ç›®æ¨™ã¯ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ã€Œãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ã€ã¨ã€Œä¼šã„ãŸã„äººã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã€ã®ä¸¡æ–¹ã‚’å®Œç’§ã«æŠŠæ¡ã™ã‚‹ã“ã¨ã§ã™ã€‚\n\
            \n# ã‚ãªãŸã®å³å¯†ãªã‚¿ã‚¹ã‚¯\næœ€æ–°ã®ãƒ¯ãƒ¼ã‚­ãƒ³ã‚°ãƒ¡ãƒ¢ãƒªã‚’åˆ†æã—ã€ç¾æ®µéšã§ã‚ã‚‹ã€Œãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒªãƒ³ã‚°ã€ãŒå®Œäº†ã—ãŸã‹ã€ãã‚Œã¨ã‚‚ã€Œã•ã‚‰ãªã‚‹æ·±æ˜ã‚ŠãŒå¿…è¦ã€ã‹ã‚’åˆ¤æ–­ã—ã¦ãã ã•ã„ã€‚\n\
            ã‚ãªãŸã®å‡ºåŠ›ã¯ã€ã€Œstatusã€ã¨ã€Œreasoningã€ã¨ã„ã†2ã¤ã®ã‚­ãƒ¼ã‚’æŒã¤JSONã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã§ãªã‘ã‚Œã°ãªã‚Šã¾ã›ã‚“ã€‚\n\n1.  **status**:\
            \ ä»¥ä¸‹ã®ã†ã¡ã€å¿…ãš1ã¤ã‚’é¸æŠã—ã¦ãã ã•ã„ã€‚\n    - `PROFILE_COMPLETE`: ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒªãƒ³ã‚°ãŒå®Œäº†ã—ãŸã¨åˆ¤æ–­ã§ãã‚‹å ´åˆã€‚å…·ä½“çš„ã«ã¯ã€ãƒ¯ãƒ¼ã‚­ãƒ³ã‚°ãƒ¡ãƒ¢ãƒªå†…ã®\
            \ `profile` ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«ãŠã„ã¦ã€`static_info` ã® `name` ã¨ `role`ã€ãã—ã¦ `qualitative_info`\
            \ ã® `core_vision` ã®ã™ã¹ã¦ã«å…·ä½“çš„ãªå†…å®¹ãŒè¨˜è¿°ã•ã‚Œã¦ã„ã‚‹å ´åˆã€‚\n    - `NEED_MORE_DETAILS`: ä¸Šè¨˜ã®æ¡ä»¶ã‚’1ã¤ã§ã‚‚æº€ãŸã—ã¦ã„ãªã„å ´åˆã€‚\n\
            \n2.  **reasoning**: ãªãœãã® `status` ã‚’é¸æŠã—ãŸã®ã‹ã€ãã®ç†ç”±ã¨ã€**æ¬¡ã«æ·±æ˜ã‚Šã™ã¹ãå…·ä½“çš„ãªé …ç›®**ã‚’ç°¡æ½”ã«è¨˜è¿°ã—ã¦ãã ã•ã„ã€‚"
        retry_config:
          max_retries: 3
          retry_enabled: true
          retry_interval: 1000
        selected: false
        structured_output:
          schema:
            properties:
              reasoning:
                type: string
              status:
                type: string
            required:
            - status
            - reasoning
            type: object
        structured_output_enabled: true
        title: ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«å®Œæˆåº¦ãƒã‚§ãƒƒã‚¯
        type: llm
        variables: []
        vision:
          configs:
            detail: high
          enabled: false
      height: 155
      id: '17550661175780'
      position:
        x: 4311
        y: 630
      positionAbsolute:
        x: 4311
        y: 630
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        cases:
        - case_id: 'true'
          conditions:
          - comparison_operator: contains
            id: ce01e29b-8afa-42c9-9cd0-16aa9c3dc06e
            value: PROFILE_COMPLETE
            varType: string
            variable_selector:
            - '17550661175780'
            - structured_output
            - status
          id: 'true'
          logical_operator: and
        desc: ''
        selected: false
        title: å®Œæˆåº¦ã«ã‚ˆã‚‹å¿œç­”åˆ†å²
        type: if-else
      height: 126
      id: '17550669548750'
      position:
        x: 4645
        y: 630
      positionAbsolute:
        x: 4645
        y: 630
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        answer: '{{#17555772893160.text#}}'
        desc: ''
        selected: false
        title: ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«å®Œäº†å¿œç­”
        type: answer
        variables: []
      height: 105
      id: '17550670509390'
      position:
        x: 7651
        y: 538.5
      positionAbsolute:
        x: 7651
        y: 538.5
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        context:
          enabled: false
          variable_selector: []
        desc: ''
        error_strategy: fail-branch
        memory:
          query_prompt_template: '# ã‚ãªãŸãŒåˆ©ç”¨ã§ãã‚‹æƒ…å ±ï¼ˆã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆï¼‰

            - ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æœ€æ–°ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸: {{#sys.query#}}'
          role_prefix:
            assistant: ''
            user: ''
          window:
            enabled: false
            size: 50
        model:
          completion_params:
            temperature: 0.7
          mode: chat
          name: gpt-4o
          provider: langgenius/openai/openai
        prompt_template:
        - id: 4447a6dc-5818-47ff-9b4d-a64792e4e8dc
          role: system
          text: '# ã‚ãªãŸã®å½¹å‰²

            ã‚ãªãŸã¯ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®å¿œç­”ã‚’åˆ†æã—ã€ãã®æ„å›³ã‚’åˆ†é¡ã™ã‚‹ã€é«˜åº¦ãªè‡ªç„¶è¨€èªç†è§£ï¼ˆNLUï¼‰ã‚¨ãƒ³ã‚¸ãƒ³ã§ã™ã€‚'
        - id: 58624808-3673-4fac-8fc8-95d7e6fc9c70
          role: user
          text: "# ã‚ãªãŸã®å³å¯†ãªã‚¿ã‚¹ã‚¯\nãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æœ€æ–°ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’æ³¨æ„æ·±ãèª­ã¿ã€ãã®å¿œç­”ã®æ„å›³ãŒä»¥ä¸‹ã®ã©ã‚Œã«æœ€ã‚‚è¿‘ã„ã‹ã‚’åˆ¤æ–­ã—ã¦ãã ã•ã„ã€‚\n\
            ã‚ãªãŸã®å‡ºåŠ›ã¯ã€ã€Œintentã€ã¨ã€Œsummaryã€ã®2ã¤ã®ã‚­ãƒ¼ã‚’æŒã¤JSONã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã§ãªã‘ã‚Œã°ãªã‚Šã¾ã›ã‚“ã€‚\n\n1.  **intent**:\
            \ ä»¥ä¸‹ã®**å³å¯†ãªå®šç¾©**ã«å¾“ã„ã€å¿…ãš1ã¤ã‚’é¸æŠã—ã¦ãã ã•ã„ã€‚\n    - `POSITIVE_RESPONSE`: ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒã€å°‹ã­ã‚‰ã‚ŒãŸè³ªå•ã«å¯¾ã—ã¦ã€**ä½•ã‚‰ã‹ã®å…·ä½“çš„ãªæƒ…å ±ã‚’æä¾›ã—ã‚ˆã†ã¨ã—ã¦ã„ã‚‹**å ´åˆã€‚ï¼ˆä¾‹ï¼šã€Œã€‡ã€‡ç¤¾ã§åƒã„ã¦ã„ã¾ã™ã€ã€Œç§ã®ç›®æ¨™ã¯â€¦ã€ï¼‰\n\
            \    - `NEGATIVE_RESPONSE`: ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒã€è³ªå•ã«å¯¾ã—ã¦**æ˜ç¢ºã«ã€Œãªã„ã€ã€Œåˆ†ã‹ã‚‰ãªã„ã€ã€Œè¨€ã„ãŸããªã„ã€ã¨ã„ã£ãŸå¦å®šçš„ãªæ„æ€è¡¨ç¤º**ã‚’ã—ã¦ã„ã‚‹å ´åˆã€‚ã‚ã‚‹ã„ã¯ã€ã€Œé›£ã—ã„ã§ã™ã­ã€ã€Œè€ƒãˆãŸã“ã¨ã‚‚ãªã„ã§ã™ã€ã®ã‚ˆã†ã«ã€**æƒ…å ±æä¾›ã‚’ãŸã‚ã‚‰ã†**å¿œç­”ã‚‚ã“ã‚Œã«å«ã¿ã¾ã™ã€‚\n\
            \    - `NEUTRAL_OR_UNRELATED`: ä¸Šè¨˜ã®ã©ã¡ã‚‰ã§ã‚‚ãªã„ã€å˜ç´”ãªç›¸æ§Œï¼ˆä¾‹ï¼šã€Œãªã‚‹ã»ã©ã€ã€Œã¯ã„ã€ï¼‰ã€æ„Ÿè¬ï¼ˆä¾‹ï¼šã€Œã‚ã‚ŠãŒã¨ã†ã€ï¼‰ã€ã‚ã‚‹ã„ã¯å…¨ãé–¢ä¿‚ã®ãªã„è©±é¡Œã§ã‚ã‚‹å ´åˆã€‚\n\
            \n2.  **summary**: ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®å¿œç­”ã®è¦ç‚¹ã‚’10æ–‡å­—ç¨‹åº¦ã§ç°¡æ½”ã«è¦ç´„ã—ã¦ãã ã•ã„ã€‚"
        - id: 8fe09b2d-c8de-4437-ae80-8e1bd55fceab
          role: assistant
          text: '# åˆ¤æ–­ã®å…·ä½“ä¾‹


            ## ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒã€Œãƒ“ã‚¸ãƒ§ãƒ³ã¨ã‹ã¯ç‰¹ã«ãªã„ã§ã™ã­â€¦ã€ã®å ´åˆ

            { "intent": "NEGATIVE_RESPONSE", "summary": "ãƒ“ã‚¸ãƒ§ãƒ³ã‚’å¦å®š" }


            ## ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒã€Œã†ãƒ¼ã‚“ã€é›£ã—ã„è³ªå•ã§ã™ã­ã€ã®å ´åˆ

            { "intent": "NEGATIVE_RESPONSE", "summary": "å›ç­”ã‚’ãŸã‚ã‚‰ã†" }


            ## ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒã€ŒConnect Inc.ã§PMã‚’ã—ã¦ã„ã¾ã™ã€ã®å ´åˆ

            { "intent": "POSITIVE_RESPONSE", "summary": "ä¼šç¤¾ã¨å½¹å‰²ã‚’å›ç­”" }


            ## ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒã€Œãªã‚‹ã»ã©ã€ã®å ´åˆ

            { "intent": "NEUTRAL_OR_UNRELATED", "summary": "ç›¸æ§Œ" }'
        retry_config:
          max_retries: 3
          retry_enabled: true
          retry_interval: 1000
        selected: false
        structured_output:
          schema:
            properties:
              intent:
                type: string
              summary:
                type: string
            required:
            - intent
            - summary
            type: object
        structured_output_enabled: true
        title: ãƒ¦ãƒ¼ã‚¶ãƒ¼å¿œç­”ã®æ„å›³åˆ†æ
        type: llm
        variables: []
        vision:
          configs:
            detail: high
          enabled: false
      height: 155
      id: '17551596791270'
      position:
        x: 5647
        y: 1296.5
      positionAbsolute:
        x: 5647
        y: 1296.5
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        cases:
        - case_id: 'true'
          conditions:
          - comparison_operator: contains
            id: ce01e29b-8afa-42c9-9cd0-16aa9c3dc06e
            value: POSITIVE_RESPONSE
            varType: string
            variable_selector:
            - '17551596791270'
            - structured_output
            - intent
          id: 'true'
          logical_operator: and
        - case_id: 0ecb0700-9c3b-4bfa-8433-ed335e40937e
          conditions:
          - comparison_operator: is
            id: 41f84699-0ce0-4e5f-a4e6-13c751d7c021
            value: NEGATIVE_RESPONSE
            varType: object
            variable_selector:
            - '17551596791270'
            - structured_output
            - intent
          id: 0ecb0700-9c3b-4bfa-8433-ed335e40937e
          logical_operator: and
        desc: ''
        selected: false
        title: è³ªå•æˆ¦ç•¥ã®åˆ†å²
        type: if-else
      height: 174
      id: '17551656610950'
      position:
        x: 5981
        y: 1303.5
      positionAbsolute:
        x: 5981
        y: 1303.5
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        context:
          enabled: false
          variable_selector: []
        desc: ''
        error_strategy: fail-branch
        memory:
          query_prompt_template: "# ã‚ãªãŸãŒåˆ©ç”¨ã§ãã‚‹æƒ…å ±ï¼ˆã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆï¼‰\n\n- ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®å…¥åŠ›ï¼š{{#sys.query#}}\n\
            - ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒå¦å®šçš„ãªå¿œç­”ã‚’ã—ãŸã¨ã„ã†äº‹å®Ÿï¼ˆ{{#17551596791270.structured_output.intent#}}: NEGATIVE_RESPONSEï¼‰ã€‚\n\
            - ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®å¿œç­”ã®è¦ç´„: {{#17551596791270.structured_output.summary#}}\n- ç¾åœ¨ã®ãƒ¯ãƒ¼ã‚­ãƒ³ã‚°ãƒ¡ãƒ¢ãƒªã®çŠ¶æ…‹:\
            \ {{#conversation.memory#}}\n- ã“ã‚ŒãŒã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‹ã‚‰å—ã‘å–ã£ãŸæœ€æ–°ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆæƒ…å ±ã§ã™ã€‚\n  - ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒªã‚¯ã‚¨ã‚¹ãƒˆ:\
            \ {{#17555998217170.requests_context#}}\n- å‚è€ƒã¾ã§ã«ã€ã“ã‚ŒãŒãƒ¦ãƒ¼ã‚¶ãƒ¼è‡ªèº«ã®ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ã§ã™ã€‚\n\
            \  - ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«: {{#17555998217170.profile_context#}}"
          role_prefix:
            assistant: ''
            user: ''
          window:
            enabled: false
            size: 50
        model:
          completion_params:
            temperature: 0.7
          mode: chat
          name: gpt-4o
          provider: langgenius/openai/openai
        prompt_template:
        - id: 4447a6dc-5818-47ff-9b4d-a64792e4e8dc
          role: system
          text: '# ã‚ãªãŸã®å½¹å‰²ï¼ˆã‚¢ã‚¤ãƒ‡ãƒ³ãƒ†ã‚£ãƒ†ã‚£ï¼‰


            ã‚ãªãŸã¯ã€ç›¸æ‰‹ã®æ°—æŒã¡ã«æ·±ãå¯„ã‚Šæ·»ã„ã€ç„¡ç†å¼·ã„ã›ãšã«å¯¾è©±ã®è§’åº¦ã‚’å·§ã¿ã«å¤‰ãˆã‚‹ã“ã¨ãŒã§ãã‚‹ã€å…±æ„ŸåŠ›ã«å„ªã‚ŒãŸã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®å°‚é–€å®¶ã§ã™ã€‚ã‚ãªãŸã®ä»•äº‹ã¯ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒè¡Œãè©°ã¾ã£ãŸæ™‚ã«ã€ã€Œãã‚Œã§ã‚‚å…¨ç„¶å¤§ä¸ˆå¤«ã§ã™ã‚ˆï¼ã€ã¨ã„ã†å®‰å¿ƒæ„Ÿã‚’ä¸ãˆã€åˆ¥ã®è¦–ç‚¹ã‹ã‚‰æ–°ãŸãªæ°—ã¥ãã‚’ä¿ƒã™ã“ã¨ã§ã™ã€‚'
        - id: 58624808-3673-4fac-8fc8-95d7e6fc9c70
          role: user
          text: "# ã‚ãªãŸã®å³å¯†ãªã‚¿ã‚¹ã‚¯\nã‚ãªãŸã®å”¯ä¸€ã®ã‚¿ã‚¹ã‚¯ã¯ã€**ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®å¿œç­”ã‚’å®Œå…¨ã«å—ã‘å…¥ã‚ŒãŸä¸Šã§ã€å…¨ãç•°ãªã‚‹è§’åº¦ã‹ã‚‰ã€ãƒã‚¸ãƒ†ã‚£ãƒ–ã§ç­”ãˆã‚„ã™ã„ä»£æ›¿è³ªå•ã‚’1ã¤ã ã‘ç”Ÿæˆã™ã‚‹ã“ã¨**ã§ã™ã€‚\n\
            \n## è³ªå•ç”Ÿæˆã®ãƒ«ãƒ¼ãƒ«\n1.  **å®Œå…¨ãªå—å®¹ã¨å®‰å¿ƒæ„Ÿã®æä¾›:** ã¾ãšã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ã€Œãªã„ã€ã€Œåˆ†ã‹ã‚‰ãªã„ã€ã¨ã„ã†æ°—æŒã¡ã‚’**å…¨é¢çš„ã«è‚¯å®š**ã—ã€ãã‚ŒãŒ**å…¨ãå•é¡Œãªã„**ã“ã¨ã‚’ä¼ãˆã¦ãã ã•ã„ã€‚ï¼ˆä¾‹ï¼šã€Œã¨ã‚“ã§ã‚‚ãªã„ã§ã™ï¼ã€ã€Œãã†ã„ã†å¤§ããªå•ã„ã¯ã€ã™ãã«ç­”ãˆã‚‰ã‚Œã‚‹æ–¹ãŒçã—ã„ã§ã™ã‚ˆã€ï¼‰\n\
            2.  **è³ªå•ã®æˆ¦ç•¥çš„è»¢æ›:** ç§ãŒä»¥å‰èã“ã†ã¨ã—ã¦ã„ãŸã“ã¨ï¼ˆ`reasoning`ï¼‰ã®æœ¬è³ªã‚’æ‰ãˆã€ãã‚Œã‚’**éå»ã®å…·ä½“çš„ãªã€ŒçµŒé¨“ã€ã‚„ã€Œæ„Ÿæƒ…ã€**ã‚’å°‹ã­ã‚‹è³ªå•ã«å¤‰æ›ã—ã¦ãã ã•ã„ã€‚\n\
            \    - **ã€Œãƒ“ã‚¸ãƒ§ãƒ³ã¯ï¼Ÿã€** ï¼ˆæœªæ¥ãƒ»æŠ½è±¡ï¼‰ â†’ **ã€Œæœ€è¿‘ã€æ¥½ã—ã‹ã£ãŸã“ã¨ã¯ï¼Ÿã€** ï¼ˆéå»ãƒ»å…·ä½“ãƒ»æ„Ÿæƒ…ï¼‰\n    - **ã€Œä¾¡å€¤è¦³ã¯ï¼Ÿã€**\
            \ ï¼ˆä¿¡æ¡ãƒ»æŠ½è±¡ï¼‰ â†’ **ã€Œã©ã‚“ãªæ™‚ã«ã€è‰¯ã„ä»•äº‹ãŒã§ããŸã€ã¨æ„Ÿã˜ã¾ã™ã‹ï¼Ÿã€** ï¼ˆçŠ¶æ³ãƒ»å…·ä½“ãƒ»æ„Ÿæƒ…ï¼‰\n3.  å‡ºåŠ›ã¯ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«å•ã„ã‹ã‘ã‚‹è³ªå•æ–‡ãã®ã‚‚ã®ã ã‘ã«ã—ã¦ãã ã•ã„ã€‚\n\
            \n## å¿œç­”ã®ãƒ‘ãƒ¼ã‚½ãƒŠãƒ©ã‚¤ã‚ºã«é–¢ã™ã‚‹ãƒ«ãƒ¼ãƒ«\n- ã‚‚ã—ã€Œãƒ¦ãƒ¼ã‚¶ãƒ¼ã®åå‰ã€ãŒåˆ¤æ˜ã—ã¦ã„ã‚‹å ´åˆã¯ã€å¿œç­”ã®å†’é ­ã§ã€Œã€‡ã€‡ã•ã‚“ã€ã€ã¨è‡ªç„¶ã«å‘¼ã³ã‹ã‘ã‚‹ã“ã¨ã‹ã‚‰å§‹ã‚ã¦ãã ã•ã„ã€‚\n\
            - ãŸã ã—ã€ä¸è‡ªç„¶ã«ãªã‚‰ãªã„ã‚ˆã†ã€æ¯å›å¿…ãšå‘¼ã³ã‹ã‘ã‚‹å¿…è¦ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚æ–‡è„ˆã«å¿œã˜ã¦ã€æœ€ã‚‚äººé–“ã‚‰ã—ã„ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’é¸æŠã—ã¦ãã ã•ã„ã€‚"
        - id: 8fe09b2d-c8de-4437-ae80-8e1bd55fceab
          role: assistant
          text: '# å‡ºåŠ›ä¾‹ï¼ˆãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒã€Œãƒ“ã‚¸ãƒ§ãƒ³ã¯ãªã„ã€ã¨ç­”ãˆãŸå ´åˆï¼‰

            ã¨ã‚“ã§ã‚‚ãªã„ã§ã™ï¼ãƒ“ã‚¸ãƒ§ãƒ³ã‚„ç›®æ¨™ãªã‚“ã¦ã€ã™ãã«è¨€è‘‰ã«ã§ãã‚‹æ–¹ãŒçã—ã„ã§ã™ã‹ã‚‰ã€ã¾ã£ãŸããŠæ°—ã«ãªã•ã‚‰ãªã„ã§ãã ã•ã„ã­ã€‚


            ã§ã¯ã€å°‘ã—ã ã‘è¦–ç‚¹ã‚’å¤‰ãˆã¦ã€ã‚‚ã£ã¨èº«è¿‘ãªã“ã¨ã‹ã‚‰ãŠä¼ºã„ã•ã›ã¦ãã ã•ã„ã€‚æœ€è¿‘ã®ãŠä»•äº‹ã®ä¸­ã§ã€å¤§å¤‰ã ã£ãŸã‘ã©ã€Œã“ã‚Œã‚’ä¹—ã‚Šè¶Šãˆã¦è‰¯ã‹ã£ãŸï¼ã€ã¨æ„Ÿã˜ãŸã‚ˆã†ãªã€é”æˆæ„Ÿã®ã‚ã£ãŸå‡ºæ¥äº‹ã¯ä½•ã‹ã‚ã‚Šã¾ã—ãŸã‹ï¼Ÿ```'
        retry_config:
          max_retries: 3
          retry_enabled: true
          retry_interval: 1000
        selected: false
        structured_output:
          schema:
            properties:
              reasoning:
                type: string
              status:
                type: string
            required:
            - status
            - reasoning
            type: object
        structured_output_enabled: false
        title: ä»£æ›¿è³ªå•ç”Ÿæˆ
        type: llm
        variables: []
        vision:
          configs:
            detail: high
          enabled: false
      height: 155
      id: '17551658398830'
      position:
        x: 7317
        y: 1201.5
      positionAbsolute:
        x: 7317
        y: 1201.5
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        answer: '{{#17551658398830.text#}}'
        desc: ''
        selected: false
        title: ä»£æ›¿è³ªå•å¿œç­”
        type: answer
        variables: []
      height: 105
      id: '17551660070480'
      position:
        x: 7651
        y: 1244.5
      positionAbsolute:
        x: 7651
        y: 1244.5
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        context:
          enabled: false
          variable_selector: []
        desc: ''
        error_strategy: fail-branch
        memory:
          query_prompt_template: "# ã‚ãªãŸãŒåˆ©ç”¨ã§ãã‚‹æƒ…å ±ï¼ˆã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆï¼‰\n\n- ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®å…¥åŠ›ï¼š{{#sys.query#}}\n\
            - ãªãœæ¬¡ã®è³ªå•ãŒå¿…è¦ã‹ã®ç†ç”±ï¼ˆãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«å®Œæˆåº¦ãƒã‚§ãƒƒã‚¯æ™‚ã®è‡ªå·±åˆ†æï¼‰: {{#17550661175780.structured_output.reasoning#}}\n\
            - ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®å”åŠ›çš„ãªæœ€æ–°ã®å¿œç­”ã®è¦ç´„: {{#17551596791270.structured_output.summary#}}\n\
            - ç¾åœ¨ã®ãƒ¯ãƒ¼ã‚­ãƒ³ã‚°ãƒ¡ãƒ¢ãƒªã®çŠ¶æ…‹ï¼ˆç©ºã®å ´åˆã‚‚ã‚ã‚Šã¾ã™ï¼‰: {{#conversation.memory#}}\n- ã“ã‚ŒãŒã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‹ã‚‰å—ã‘å–ã£ãŸæœ€æ–°ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆæƒ…å ±ã§ã™ã€‚\n\
            \  - ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒªã‚¯ã‚¨ã‚¹ãƒˆ: {{#17555998217170.requests_context#}}\n- å‚è€ƒã¾ã§ã«ã€ã“ã‚ŒãŒãƒ¦ãƒ¼ã‚¶ãƒ¼è‡ªèº«ã®ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ã§ã™ã€‚\n\
            \  - ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«: {{#17555998217170.profile_context#}}"
          role_prefix:
            assistant: ''
            user: ''
          window:
            enabled: false
            size: 50
        model:
          completion_params:
            temperature: 0.7
          mode: chat
          name: gpt-4o
          provider: langgenius/openai/openai
        prompt_template:
        - id: 4447a6dc-5818-47ff-9b4d-a64792e4e8dc
          role: system
          text: '# ã‚ãªãŸã®å½¹å‰²ï¼ˆã‚¢ã‚¤ãƒ‡ãƒ³ãƒ†ã‚£ãƒ†ã‚£ï¼‰


            ã‚ãªãŸã¯ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®è¨€è‘‰ã«æ·±ãå…±æ„Ÿã—ã€ãã®äººã®å†…é¢ã«ã‚ã‚‹ç´ æ™´ã‚‰ã—ã„ãƒ“ã‚¸ãƒ§ãƒ³ã‚„æƒ…ç†±ã‚’å¼•ãå‡ºã™ã®ãŒå¾—æ„ãªã€è¶…ä¸€æµã®ã‚¤ãƒ³ã‚¿ãƒ“ãƒ¥ã‚¢ãƒ¼ã§ã™ã€‚'
        - id: 58624808-3673-4fac-8fc8-95d7e6fc9c70
          role: user
          text: '# ã‚ãªãŸã®å³å¯†ãªã‚¿ã‚¹ã‚¯

            ã‚ãªãŸã®å½¹å‰²ã¯ã€ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã‚’åˆ†æã—ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å®Œæˆã•ã›ã‚‹ãŸã‚ã«ã€**æ¬¡ã«èãã¹ãæœ€ã‚‚é‡è¦ã§ã€ã‹ã¤æ¸©ã‹ã¿ã®ã‚ã‚‹è³ªå•ã‚’1ã¤ã ã‘**ç”Ÿæˆã™ã‚‹ã“ã¨ã§ã™ã€‚


            ## è³ªå•ç”Ÿæˆã®ãƒ«ãƒ¼ãƒ«

            1.  **è‚¯å®šã¨å…±æ„Ÿã‹ã‚‰å§‹ã‚ã‚‹:** ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®å”åŠ›çš„ãªå¿œç­”ã«å¿ƒã‹ã‚‰ã®æ„Ÿè¬ã¨èˆˆå‘³ã‚’ç¤ºã—ã¦ãã ã•ã„ã€‚ï¼ˆä¾‹ï¼šã€Œã€‡ã€‡ã¨ã„ã†ãŠè€ƒãˆã€ã¨ã¦ã‚‚ç´ æ•µã§ã™ã­ï¼ã€ï¼‰

            2.  **æ€è€ƒãƒ—ãƒ­ã‚»ã‚¹ã‚’ç¿»è¨³ã™ã‚‹:** `reasoning`ã§ç¤ºå”†ã•ã‚Œã¦ã„ã‚‹ã€Œæ¬¡ã«èãã¹ãã“ã¨ã€ã«ã¤ã„ã¦ã€è‡ªç„¶ãªä¼šè©±ã®æµã‚Œã§è³ªå•ã—ã¦ãã ã•ã„ã€‚

            3.  **ç›¸æ‰‹ã®å¯èƒ½æ€§ã‚’å¼•ãå‡ºã™èãæ–¹ã‚’ã™ã‚‹:** ãƒã‚¸ãƒ†ã‚£ãƒ–ã§æœªæ¥å¿—å‘ã®è³ªå•ã‚’å¿ƒãŒã‘ã¦ãã ã•ã„ã€‚

            4.  å‡ºåŠ›ã¯ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«å•ã„ã‹ã‘ã‚‹è³ªå•æ–‡ãã®ã‚‚ã®ã ã‘ã«ã—ã¦ãã ã•ã„ã€‚


            ## å¿œç­”ã®ãƒ‘ãƒ¼ã‚½ãƒŠãƒ©ã‚¤ã‚ºã«é–¢ã™ã‚‹ãƒ«ãƒ¼ãƒ«

            - ã‚‚ã—ã€Œãƒ¦ãƒ¼ã‚¶ãƒ¼ã®åå‰ã€ãŒåˆ¤æ˜ã—ã¦ã„ã‚‹å ´åˆã¯ã€å¿œç­”ã®å†’é ­ã§ã€Œã€‡ã€‡ã•ã‚“ã€ã€ã¨è‡ªç„¶ã«å‘¼ã³ã‹ã‘ã‚‹ã“ã¨ã‹ã‚‰å§‹ã‚ã¦ãã ã•ã„ã€‚

            - ãŸã ã—ã€ä¸è‡ªç„¶ã«ãªã‚‰ãªã„ã‚ˆã†ã€æ¯å›å¿…ãšå‘¼ã³ã‹ã‘ã‚‹å¿…è¦ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚æ–‡è„ˆã«å¿œã˜ã¦ã€æœ€ã‚‚äººé–“ã‚‰ã—ã„ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’é¸æŠã—ã¦ãã ã•ã„ã€‚'
        - id: 8fe09b2d-c8de-4437-ae80-8e1bd55fceab
          role: assistant
          text: '# å‡ºåŠ›ä¾‹ï¼ˆreasoningãŒã€Œä¾¡å€¤è¦³ãŒä¸æ˜ç¢ºã€ã ã£ãŸå ´åˆï¼‰

            ç´ æ™´ã‚‰ã—ã„ãƒ“ã‚¸ãƒ§ãƒ³ã§ã™ã­ï¼ãŠè©±ã‚’èã„ã¦ã„ã‚‹ã ã‘ã§ã€ã“ã¡ã‚‰ã¾ã§ãƒ¯ã‚¯ãƒ¯ã‚¯ã—ã¦ãã¾ã™ã€‚

            ã‚‚ã—ã‚ˆã‚ã—ã‘ã‚Œã°æ¬¡ã«ã€ã‚ãªãŸãŒãã®ãƒ“ã‚¸ãƒ§ãƒ³ã‚’å®Ÿç¾ã™ã‚‹ä¸Šã§ã€Œã“ã‚Œã ã‘ã¯è­²ã‚Œãªã„ã€ã¨è€ƒãˆã¦ã„ã‚‹ä¿¡æ¡ã‚„ã€å¤§åˆ‡ã«ã—ã¦ã„ã‚‹ä¾¡å€¤è¦³ã«ã¤ã„ã¦æ•™ãˆã¦ã„ãŸã ã‘ã¾ã™ã‹ï¼Ÿ'
        retry_config:
          max_retries: 3
          retry_enabled: true
          retry_interval: 1000
        selected: false
        structured_output:
          schema:
            properties:
              reasoning:
                type: string
              status:
                type: string
            required:
            - status
            - reasoning
            type: object
        structured_output_enabled: false
        title: æ·±æ˜ã‚Šè³ªå•ç”Ÿæˆ
        type: llm
        variables: []
        vision:
          configs:
            detail: high
          enabled: false
      height: 155
      id: '17551660546480'
      position:
        x: 6983
        y: 1013.5
      positionAbsolute:
        x: 6983
        y: 1013.5
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        context:
          enabled: false
          variable_selector: []
        default_value:
        - key: text
          type: string
          value: ''
        desc: ''
        error_strategy: default-value
        memory:
          query_prompt_template: "# ã‚ãªãŸãŒåˆ©ç”¨ã§ãã‚‹æƒ…å ±ï¼ˆã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆï¼‰\n- ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®å…¥åŠ›ï¼š{{#sys.query#}}\n\
            - ã“ã‚ŒãŒã€ç¾åœ¨ã®ãƒ¯ãƒ¼ã‚­ãƒ³ã‚°ãƒ¡ãƒ¢ãƒªã®çŠ¶æ…‹ã§ã™ã€‚æ¬¡ã«ã©ã®æƒ…å ±ã‚’å¾—ã‚‹ã¹ãã‹ã‚’åˆ¤æ–­ã™ã‚‹ãŸã‚ã®ã€æœ€ã‚‚é‡è¦ãªæ‰‹ãŒã‹ã‚Šã§ã™ã€‚\n- ã“ã‚Œã¯ã€æƒ…å ±ã‚’å«ã¾ãªã‹ã£ãŸã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ç›´è¿‘ã®å¿œç­”ã§ã™ã€‚\n\
            \  - ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®å¿œç­”ã®è¦ç´„: {{#17551596791270.structured_output.summary#}}\n- ã“ã‚ŒãŒã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‹ã‚‰å—ã‘å–ã£ãŸæœ€æ–°ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆæƒ…å ±ã§ã™ã€‚\n\
            \  - ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒªã‚¯ã‚¨ã‚¹ãƒˆ: {{#17555998217170.requests_context#}}\n- å‚è€ƒã¾ã§ã«ã€ã“ã‚ŒãŒãƒ¦ãƒ¼ã‚¶ãƒ¼è‡ªèº«ã®ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ã§ã™ã€‚\n\
            \  - ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«: {{#17555998217170.profile_context#}}"
          role_prefix:
            assistant: ''
            user: ''
          window:
            enabled: false
            size: 50
        model:
          completion_params:
            temperature: 0.7
          mode: chat
          name: gpt-4o
          provider: langgenius/openai/openai
        prompt_template:
        - id: 4447a6dc-5818-47ff-9b4d-a64792e4e8dc
          role: system
          text: '# ã‚ãªãŸã®å½¹å‰²ï¼ˆã‚¢ã‚¤ãƒ‡ãƒ³ãƒ†ã‚£ãƒ†ã‚£ï¼‰


            ã‚ãªãŸã¯ã€ä¼šè©±ã®æµã‚Œã‚’å·§ã¿ã«ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ã™ã‚‹ã€çµŒé¨“è±Šå¯Œãªãƒ•ã‚¡ã‚·ãƒªãƒ†ãƒ¼ã‚¿ãƒ¼ã§ã™ã€‚'
        - id: 58624808-3673-4fac-8fc8-95d7e6fc9c70
          role: user
          text: "# ã‚ãªãŸã®å³å¯†ãªã‚¿ã‚¹ã‚¯\nå¯¾è©±ã‚’æœ¬é¡Œã«æˆ»ã™ãŸã‚ã®ã€**ãã®çŠ¶æ³ã«æœ€ã‚‚ãµã•ã‚ã—ã„ã€ä¸å¯§ã§æ¸©ã‹ã¿ã®ã‚ã‚‹è³ªå•ã‚’1ã¤ã ã‘**ç”Ÿæˆã—ã¦ãã ã•ã„ã€‚\n\
            \n## æ€è€ƒã®ã‚¹ãƒ†ãƒƒãƒ—\n1.  ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®å¿œç­”ï¼ˆ`summary`ï¼‰ã«ã€Œã”ç¢ºèªã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ã€ã®ã‚ˆã†ã«è»½ãè§¦ã‚Œã¦ãã ã•ã„ã€‚\n\n\
            2.  ã€Œç¾åœ¨ã®ãƒ¯ãƒ¼ã‚­ãƒ³ã‚°ãƒ¡ãƒ¢ãƒªã€ã‚’åˆ†æã—ã€å¯¾è©±ã®ç¾åœ¨åœ°ã¨æ¬¡ã«é”æˆã™ã¹ãç›®æ¨™ã‚’ç‰¹å®šã—ã¾ã™ã€‚\n    - **Case A: `name`ãŒã¾ã ãªã„å ´åˆ**\
            \ â†’ æ¬¡ã®ç›®æ¨™ã¯ã€Œåå‰ã‚’èãã“ã¨ã€ã§ã™ã€‚\n    - **Case B: `profile`ãŒæœªå®Œæˆã®å ´åˆ** â†’ æ¬¡ã®ç›®æ¨™ã¯ã€Œãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«é …ç›®ï¼ˆä¾‹ï¼šrole,\
            \ core_visionï¼‰ã‚’åŸ‹ã‚ã‚‹ã“ã¨ã€ã§ã™ã€‚\n    - **Case C: `profile`ã¯å®Œæˆã—ãŸãŒã€`requests`ãŒã¾ã ãªã„å ´åˆ**\
            \ â†’ æ¬¡ã®ç›®æ¨™ã¯ã€Œä¼šã„ãŸã„äººç‰©åƒã®ãƒ’ã‚¢ãƒªãƒ³ã‚°ã‚’é–‹å§‹ã™ã‚‹ã“ã¨ã€ã§ã™ã€‚\n    - **Case D: `requests`ã®ãƒ’ã‚¢ãƒªãƒ³ã‚°ä¸­ã®å ´åˆ**\
            \ â†’ æ¬¡ã®ç›®æ¨™ã¯ã€Œãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’ã•ã‚‰ã«æ·±æ˜ã‚Šã™ã‚‹ã“ã¨ã€ã§ã™ã€‚\n\n3.  ç‰¹å®šã—ãŸç›®æ¨™ã«åŸºã¥ãã€æœ€ã‚‚è‡ªç„¶ãªè³ªå•ã‚’ç”Ÿæˆã—ã¾ã™ã€‚\n    -\
            \ Case Aãªã‚‰ã€ã€Œã‚‚ã—ã‚ˆã‚ã—ã‘ã‚Œã°ã€ã¾ãšã‚ãªãŸã®ãŠåå‰ã‹ã‚‰æ•™ãˆã¦ã„ãŸã ã‘ã¾ã™ã‹ï¼Ÿã€\n    - Case Bãªã‚‰ã€ã€Œã€‡ã€‡ã•ã‚“ã€æ¬¡ã«ã‚ãªãŸã®ãŠä»•äº‹ã«ã¤ã„ã¦æ•™ãˆã¦ã„ãŸã ã‘ã¾ã™ã‹ï¼Ÿã€\n\
            \    - Case Cãªã‚‰ã€ã€Œã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ï¼ãã‚Œã§ã¯æ¬¡ã«ã€ã€‡ã€‡ã•ã‚“ãŒä¼šã£ã¦ã¿ãŸã„äººç‰©ã«ã¤ã„ã¦ã€ãŠè©±ã‚’èã‹ã›ã¦ã‚‚ã‚‰ãˆã¾ã™ã‹ï¼Ÿã€\n\
            \    - Case Dãªã‚‰ã€ã€Œãªã‚‹ã»ã©ã€‚ãã®ç‚¹ã«ã¤ã„ã¦ã€ã‚‚ã†å°‘ã—è©³ã—ããŠä¼ºã„ã—ã¦ã‚‚ã‚ˆã‚ã—ã„ã§ã™ã‹ï¼Ÿã€"
        - id: 8fe09b2d-c8de-4437-ae80-8e1bd55fceab
          role: assistant
          text: '# å‡ºåŠ›ä¾‹ï¼ˆãƒ¡ãƒ¢ãƒªã«åå‰ã ã‘ã‚ã‚Šã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒã€Œãªã‚‹ã»ã©ã€ã¨ç­”ãˆãŸå ´åˆï¼‰

            ã”ç¢ºèªã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ã€‚

            å°‘ã—ãšã¤ã‚ãªãŸã®ã“ã¨ãŒè¦‹ãˆã¦ãã‚‹ã‚ˆã†ã§ã€ã¨ã¦ã‚‚èˆˆå‘³æ·±ã„ã§ã™ã€‚ã‚‚ã—ã‚ˆã‚ã—ã‘ã‚Œã°ã€ã‚‚ã†å°‘ã—ã ã‘ã‚ãªãŸã®ã€Œä»Šã€ã«ã¤ã„ã¦æ•™ãˆã¦ãã ã•ã„ã€‚ç¾åœ¨ã€ã©ã®ã‚ˆã†ãªä¼šç¤¾ã§ã€ã©ã‚“ãªå½¹å‰²ã‚’æ‹…ã£ã¦ã„ã‚‰ã£ã—ã‚ƒã‚‹ã®ã§ã—ã‚‡ã†ã‹ï¼Ÿ'
        retry_config:
          max_retries: 3
          retry_enabled: true
          retry_interval: 1000
        selected: false
        structured_output:
          schema:
            properties:
              reasoning:
                type: string
              status:
                type: string
            required:
            - status
            - reasoning
            type: object
        structured_output_enabled: false
        title: å¯¾è©±å†èª˜å°
        type: llm
        variables: []
        vision:
          configs:
            detail: high
          enabled: false
      height: 155
      id: '17551688288560'
      position:
        x: 7651
        y: 1389.5
      positionAbsolute:
        x: 7651
        y: 1389.5
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        answer: '{{#17551688288560.text#}}'
        desc: ''
        selected: false
        title: å¯¾è©±å†èª˜å°å¿œç­”
        type: answer
        variables: []
      height: 105
      id: '17551689386760'
      position:
        x: 7985
        y: 1404
      positionAbsolute:
        x: 7985
        y: 1404
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        answer: '{{#17551660546480.text#}}'
        desc: ''
        selected: false
        title: æ·±å €ã‚Šè³ªå•å¿œç­”
        type: answer
        variables: []
      height: 105
      id: '17551689434150'
      position:
        x: 7317
        y: 1056.5
      positionAbsolute:
        x: 7317
        y: 1056.5
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        answer: 'ç”³ã—è¨³ã‚ã‚Šã¾ã›ã‚“ã€ç¾åœ¨ã‚·ã‚¹ãƒ†ãƒ ã§ä¸€æ™‚çš„ãªå•é¡ŒãŒç™ºç”Ÿã—ãŸã‚ˆã†ã§ã™ã€‚


          å¤§å¤‰ãŠæ‰‹æ•°ã§ã™ãŒã€å°‘ã—æ™‚é–“ã‚’ãŠã„ã¦ã‹ã‚‰ã€ã‚‚ã†ä¸€åº¦ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’é€ä¿¡ã—ã¦ã„ãŸã ã‘ã¾ã™ã§ã—ã‚‡ã†ã‹ã€‚'
        desc: ''
        selected: false
        title: æ±ç”¨ã‚¨ãƒ©ãƒ¼å¿œç­”
        type: answer
        variables: []
      height: 166
      id: '1755214503739'
      position:
        x: 7317
        y: 2331
      positionAbsolute:
        x: 7317
        y: 2331
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        code: "import json\n\ndef main(current_memory: list) -> dict:\n    try:\n\
          \        if isinstance(current_memory, list) and len(current_memory) > 0:\n\
          \            memory_object = current_memory[0]\n        elif isinstance(current_memory,\
          \ dict):\n            memory_object = current_memory\n        else:\n  \
          \          memory_object = {}\n\n        if \"interaction_state\" not in\
          \ memory_object:\n            memory_object[\"interaction_state\"] = {}\n\
          \        \n        memory_object[\"interaction_state\"][\"phase\"] = \"\
          request_hearing\"\n        \n        # â˜…â˜…â˜… ã“ã“ãŒé‡è¦ â˜…â˜…â˜…\n        # æ›´æ–°ã—ãŸã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ã€é…åˆ—ã§ãƒ©ãƒƒãƒ—ã—ã¦è¿”ã™\n\
          \        return {\n            \"updated_memory_output\": [memory_object]\n\
          \        }\n\n    except Exception as e:\n        return { \"error\": str(e)\
          \ }"
        code_language: python3
        desc: ''
        outputs:
          updated_memory_output:
            children: null
            type: array[object]
        selected: false
        title: ä¼šè©±ãƒ•ã‚§ãƒ¼ã‚ºã‚’æ›´æ–°
        type: code
        variables:
        - value_selector:
          - conversation
          - memory
          value_type: array[object]
          variable: current_memory
      height: 54
      id: '1755253097776'
      position:
        x: 6983
        y: 528
      positionAbsolute:
        x: 6983
        y: 528
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        desc: ''
        items:
        - input_type: variable
          operation: over-write
          value:
          - '1755253097776'
          - updated_memory_output
          variable_selector:
          - conversation
          - memory
          write_mode: over-write
        selected: false
        title: æ›´æ–°æ¸ˆã¿ãƒ¡ãƒ¢ãƒªã‚’ä¿å­˜
        type: assigner
        version: '2'
      height: 86
      id: '1755253253995'
      position:
        x: 7317
        y: 530
      positionAbsolute:
        x: 7317
        y: 530
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        context:
          enabled: false
          variable_selector: []
        desc: ''
        memory:
          query_prompt_template: "# ã‚ãªãŸãŒåˆ©ç”¨ã§ãã‚‹æƒ…å ±ï¼ˆã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆï¼‰\n- ã“ã‚ŒãŒ**æ›´æ–°å‰**ã®ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«æƒ…å ±ã§ã™ã€‚ç©ºï¼ˆ{}ï¼‰ã®å ´åˆã¯ã€ã“ã‚ŒãŒæœ€åˆã®æƒ…å ±å…¥åŠ›ã§ã™ã€‚\n\
            \  - å‰å›ã®ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«æƒ…å ±:{{#conversation.memory#}}\n- ã“ã‚ŒãŒã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‹ã‚‰æä¾›ã•ã‚ŒãŸ**æ–°ã—ã„æƒ…å ±**ã§ã™ã€‚\n\
            \  - ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æœ€æ–°ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸: {{#sys.query#}}"
          role_prefix:
            assistant: ''
            user: ''
          window:
            enabled: false
            size: 50
        model:
          completion_params: {}
          mode: chat
          name: gpt-4o
          provider: langgenius/openai/openai
        prompt_template:
        - id: c99691e0-c192-4f14-8caa-3ea897c01bea
          role: system
          text: '# ã‚ãªãŸã®å½¹å‰²ï¼ˆã‚¢ã‚¤ãƒ‡ãƒ³ãƒ†ã‚£ãƒ†ã‚£ï¼‰

            ã‚ãªãŸã¯ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒä¼šã„ãŸã„äººç‰©åƒï¼ˆãƒªã‚¯ã‚¨ã‚¹ãƒˆï¼‰ã‚’ã€å¯¾è©±ã‚’é€šã˜ã¦å…·ä½“åŒ–ã—ã€æ§‹é€ åŒ–ã•ã‚ŒãŸJSONãƒ‡ãƒ¼ã‚¿ã«å¤‰æ›ã™ã‚‹ã€å°‚é–€ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚¢ãƒŠãƒªã‚¹ãƒˆã§ã™ã€‚'
        - id: 5476fec1-333c-4236-a6ca-9c135097f7bb
          role: user
          text: "    # ã‚ãªãŸã®å³å¯†ãªã‚¿ã‚¹ã‚¯\n    ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æœ€æ–°ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’åˆ†æã—ã€ã€Œä¼šã„ãŸã„äººç‰©åƒã€ã«é–¢ã™ã‚‹æƒ…å ±ã‚’ã€ä»¥ä¸‹ã®JSONã‚¹ã‚­ãƒ¼ãƒã«å¾“ã£ã¦æŠ½å‡ºãƒ»æ§‹é€ åŒ–ã—ã¦ãã ã•ã„ã€‚\n\
            \    - ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®è¨€è‘‰ã‹ã‚‰ã€å…·ä½“çš„ãªã‚¹ã‚­ãƒ«ã€å½¹å‰²ã€ä¾¡å€¤è¦³ãªã©ã‚’æ¨è«–ã—ã€é©åˆ‡ãªã‚­ãƒ¼ã«å‰²ã‚Šå½“ã¦ã¦ãã ã•ã„ã€‚\n    - å‡ºåŠ›ã¯ã€ç”Ÿã®JSONã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®ã¿ã§ãªã‘ã‚Œã°ãªã‚Šã¾ã›ã‚“ã€‚"
        - id: 13387976-3250-48f3-9619-8306c8dd42cd
          role: assistant
          text: "#### **ã‚·ãƒŠãƒªã‚ª1ï¼šæŠ€è¡“çš„ãªç›¸è«‡ç›¸æ‰‹ã‚’æ¢ã—ã¦ã„ã‚‹**\n\n*   **ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸:**\n    > `ãã†ã§ã™ã­ã€ç§ã®ã“ã®ã€Œå‡ºä¼šã„ã®ã‚µã‚¤ã‚¨ãƒ³ã‚¹ã€ã¨ã„ã†ã‚¢ã‚¤ãƒ‡ã‚¢ã‚’ã€æŠ€è¡“çš„ã«ã©ã†å®Ÿç¾ã§ãã‚‹ã‹ç›¸è«‡ã§ãã‚‹äººãŒæ¬²ã—ã„ã§ã™ã€‚ç‰¹ã«ã€AIã‚„LLMã‚’ä½¿ã£ãŸã‚¢ãƒ—ãƒªé–‹ç™ºã®çµŒé¨“ãŒè±Šå¯Œãªã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã®æ–¹ã¨ã€ä¸€åº¦å£æ‰“ã¡ã—ã¦ã¿ãŸã„ã§ã™ã­ã€‚`\n\
            \n*   **AIãŒå‡ºåŠ›ã™ã¹ãJSONï¼ˆãŠæ‰‹æœ¬ï¼‰:**\n    ```json\n    {\n      \"needs\": [\n\
            \        \"æŠ€è¡“çš„ãªç›¸è«‡ç›¸æ‰‹\",\n        \"å£æ‰“ã¡ç›¸æ‰‹\"\n      ],\n      \"must_have_skills\"\
            : [\n        \"AI\",\n        \"LLM\",\n        \"ã‚¢ãƒ—ãƒªé–‹ç™º\"\n      ],\n\
            \      \"should_have_roles\": [\n        \"ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢\"\n      ],\n      \"\
            qualitative_traits\": [\n        \"è±Šå¯ŒãªçµŒé¨“\"\n      ]\n    }\n    ```\n\n\
            ---\n\n#### **ã‚·ãƒŠãƒªã‚ª2ï¼šäº‹æ¥­ã®æ–¹å‘æ€§ã«ã¤ã„ã¦ç›¸è«‡ã—ãŸã„**\n\n*   **ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸:**\n    > `ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã®ã‚¢ã‚¤ãƒ‡ã‚¢ã¯ã‚ã‚‹ã‚“ã§ã™ãŒã€ã“ã‚ŒãŒæœ¬å½“ã«ãƒ“ã‚¸ãƒã‚¹ã¨ã—ã¦æˆã‚Šç«‹ã¤ã®ã‹ã€è‡ªä¿¡ãŒãªãã¦ã€‚åŒã˜ã‚ˆã†ãªSaaSæ¥­ç•Œã§ã€ã‚¼ãƒ­ã‹ã‚‰äº‹æ¥­ã‚’ç«‹ã¡ä¸Šã’ãŸçµŒé¨“ã®ã‚ã‚‹èµ·æ¥­å®¶ã®æ–¹ã«ã€ãƒ¡ãƒ³ã‚¿ãƒ¼ã«ãªã£ã¦ã‚‚ã‚‰ãˆãŸã‚‰æœ€é«˜ã§ã™ã€‚`\n\
            \n*   **AIãŒå‡ºåŠ›ã™ã¹ãJSONï¼ˆãŠæ‰‹æœ¬ï¼‰:**\n    ```json\n    {\n      \"needs\": [\n\
            \        \"ãƒ¡ãƒ³ã‚¿ãƒ¼\",\n        \"äº‹æ¥­ç›¸è«‡\"\n      ],\n      \"must_have_skills\"\
            : [\n        \"SaaSäº‹æ¥­ã®ç«‹ã¡ä¸Šã’\"\n      ],\n      \"should_have_roles\": [\n\
            \        \"èµ·æ¥­å®¶\",\n        \"å‰µæ¥­è€…\"\n      ],\n      \"qualitative_traits\"\
            : [\n        \"ã‚¼ãƒ­ã‚¤ãƒã®çµŒé¨“\"\n      ]\n    }\n    ```\n---\n\n#### **ã‚·ãƒŠãƒªã‚ª3ï¼šä¾¡å€¤è¦³ã®åˆã†ä»²é–“ã‚’æ¢ã—ã¦ã„ã‚‹**\n\
            \n*   **ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸:**\n    > `ã‚¹ã‚­ãƒ«ã‚‚å¤§äº‹ã§ã™ãŒã€ãã‚Œä»¥ä¸Šã«ã€Œãƒ†ã‚¯ãƒãƒ­ã‚¸ãƒ¼ã§ç¤¾ä¼šã‚’è‰¯ãã—ãŸã„ã€ã¨ã„ã†åŒã˜å¿—ã‚’æŒã£ã¦ã„ã‚‹äººã¨ç¹‹ãŒã‚ŠãŸã„ã§ã™ã€‚è·ç¨®ã¯å•ã„ã¾ã›ã‚“ãŒã€æŒ‘æˆ¦çš„ãªãƒã‚¤ãƒ³ãƒ‰ã‚’æŒã£ã¦ã„ã‚‹äººãŒã„ã„ã§ã™ã­ã€‚`\n\
            \n*   **AIãŒå‡ºåŠ›ã™ã¹ãJSONï¼ˆãŠæ‰‹æœ¬ï¼‰:**\n    ```json\n    {\n      \"needs\": [\n\
            \        \"ä»²é–“æ¢ã—\"\n      ],\n      \"must_have_skills\": [],\n      \"\
            should_have_roles\": [],\n      \"qualitative_traits\": [\n        \"\
            åŒã˜å¿—ã‚’æŒã¤\",\n        \"ç¤¾ä¼šã‚’è‰¯ãã—ãŸã„\",\n        \"æŒ‘æˆ¦çš„ãªãƒã‚¤ãƒ³ãƒ‰\"\n      ]\n    }"
        retry_config:
          max_retries: 3
          retry_enabled: true
          retry_interval: 1000
        selected: false
        structured_output:
          schema:
            properties:
              must_have_skills:
                description: ä¼šã„ãŸã„ç›¸æ‰‹ãŒã€å¿…ãšã€æŒã£ã¦ã„ã‚‹ã¹ãå°‚é–€çš„ãªã‚¹ã‚­ãƒ«ã‚„çŸ¥è­˜ï¼ˆä¾‹ï¼šAI, LLM, UXãƒ‡ã‚¶ã‚¤ãƒ³, SaaSäº‹æ¥­é–‹ç™º,
                  è³‡é‡‘èª¿é”ï¼‰
                items:
                  type: string
                type: array
              needs:
                description: ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒå¿…è¦ã¨ã—ã¦ã„ã‚‹åŠ©ã‘ã®ç¨®é¡ã‚„é–¢ä¿‚æ€§ï¼ˆä¾‹ï¼šãƒ¡ãƒ³ã‚¿ãƒ¼ã€å£æ‰“ã¡ç›¸æ‰‹ã€å…±åŒå‰µæ¥­è€…ã€ã‚¢ãƒ‰ãƒã‚¤ã‚¶ãƒ¼ã€æŠ•è³‡å®¶ï¼‰
                items:
                  type: string
                type: array
              qualitative_traits:
                description: ä¼šã„ãŸã„ç›¸æ‰‹ã«æ±‚ã‚ã‚‹ã€ã‚¹ã‚­ãƒ«ä»¥å¤–ã®å®šæ€§çš„ãªç‰¹æ€§ï¼ˆä¾¡å€¤è¦³ã€æ€§æ ¼ã€æ€æƒ³ãªã©ï¼‰ï¼ˆä¾‹ï¼šåŒã˜å¿—ã‚’æŒã¤, æŒ‘æˆ¦çš„, å®Ÿå‹™çµŒé¨“ãŒè±Šå¯Œï¼‰
                items:
                  type: string
                type: array
              should_have_roles:
                description: ä¼šã„ãŸã„ç›¸æ‰‹ãŒçµŒé¨“ã—ã¦ã„ã‚‹ã¨ã€æœ›ã¾ã—ã„ã€å½¹å‰²ã‚„çµŒæ­´ï¼ˆä¾‹ï¼šå‰µæ¥­è€…, ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢, æŠ•è³‡å®¶, ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼ï¼‰
                items:
                  type: string
                type: array
            required: []
            type: object
        structured_output_enabled: true
        title: ãƒªã‚¯ã‚¨ã‚¹ãƒˆæŠ½å‡º
        type: llm
        variables: []
        vision:
          configs:
            detail: high
          enabled: false
      height: 119
      id: '17555693082030'
      position:
        x: 4979
        y: 896.5
      positionAbsolute:
        x: 4979
        y: 896.5
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        code: "import json\nimport datetime\n\n# Difyã®å¤‰æ•°è¨­å®šã§å®šç¾©ã•ã‚ŒãŸ 'arg1' ã¨ 'current_memory'\
          \ ã‚’å¼•æ•°ã¨ã—ã¦ç›´æ¥å—ã‘å–ã‚Šã¾ã™ã€‚\ndef main(arg1: str, current_memory: list) -> dict:\n\
          \    \"\"\"\n    ç¾åœ¨ã®ãƒ¯ãƒ¼ã‚­ãƒ³ã‚°ãƒ¡ãƒ¢ãƒª(current_memory)ã¨ã€æ–°ã—ã„ãƒªã‚¯ã‚¨ã‚¹ãƒˆæƒ…å ±(arg1)ã‚’å—ã‘å–ã‚Šã€\n \
          \   requestsã‚»ã‚¯ã‚·ãƒ§ãƒ³ã«æ–°ã—ã„ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’è¿½åŠ ã—ã¦ã€æ›´æ–°å¾Œã®ãƒ¡ãƒ¢ãƒªã‚’è¿”ã™ã€‚\n    \"\"\"\n    try:\n    \
          \    # --- ä¿®æ­£ç‚¹ 1: æ­£ã—ã„å¤‰æ•°(arg1)ã‹ã‚‰JSONæ–‡å­—åˆ—ã‚’èª­ã¿è¾¼ã¿ã€ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«å¤‰æ› ---\n        llm_output_str\
          \ = arg1\n        new_request_obj = {}\n        # LLMå‡ºåŠ›ã«å«ã¾ã‚Œã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹ãƒãƒ¼ã‚¯ãƒ€ã‚¦ãƒ³ã‚’é™¤å»ã—ã¦å®‰å…¨ã«ãƒ‘ãƒ¼ã‚¹\n\
          \        start_index = llm_output_str.find('{')\n        end_index = llm_output_str.rfind('}')\
          \ + 1\n        if start_index != -1 and end_index != 0:\n            json_str\
          \ = llm_output_str[start_index:end_index]\n            new_request_obj =\
          \ json.loads(json_str)\n\n        # --- ä¿®æ­£ç‚¹ 2: æ­£ã—ã„å¤‰æ•°(current_memory)ã‹ã‚‰æ—¢å­˜ã®ãƒ¡ãƒ¢ãƒªã‚’èª­ã¿è¾¼ã‚€\
          \ ---\n        if isinstance(current_memory, list) and len(current_memory)\
          \ > 0:\n            updated_memory = current_memory[0]\n        else:\n\
          \            # ãƒ¡ãƒ¢ãƒªãŒç©ºã®å ´åˆã®åˆæœŸåŒ–\n            updated_memory = {}\n\n       \
          \ # requestsã‚­ãƒ¼ãŒå­˜åœ¨ã—ãªã„å ´åˆã«å‚™ãˆã¦åˆæœŸåŒ–\n        if \"requests\" not in updated_memory:\n\
          \            updated_memory[\"requests\"] = {}\n        \n        # æ–°ã—ã„ãƒªã‚¯ã‚¨ã‚¹ãƒˆIDã‚’ç”Ÿæˆ\n\
          \        new_request_id = f\"req_{len(updated_memory.get('requests', {}))\
          \ + 1:03d}\"\n\n        # æ–°ã—ã„ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’æ§‹ç¯‰\n        new_request = {\n \
          \           \"id\": new_request_id,\n            \"status\": \"Active\"\
          ,\n            \"timestamp\": datetime.datetime.utcnow().isoformat() + \"\
          Z\",\n            \"structured_query\": new_request_obj # ã“ã“ã«ãƒ‘ãƒ¼ã‚¹ã—ãŸã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãŒå…¥ã‚‹\n\
          \        }\n\n        # ãƒ¯ãƒ¼ã‚­ãƒ³ã‚°ãƒ¡ãƒ¢ãƒªã®requestsã‚»ã‚¯ã‚·ãƒ§ãƒ³ã«ã€æ–°ã—ã„ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’è¿½åŠ \n        updated_memory[\"\
          requests\"][new_request_id] = new_request\n        \n        # æ›´æ–°ã—ãŸã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’é…åˆ—ã§ãƒ©ãƒƒãƒ—ã—ã¦è¿”ã™\n\
          \        return {\n            \"final_memory_output\": [updated_memory]\n\
          \        }\n\n    except Exception as e:\n        return { \"error\": f\"\
          An error occurred: {str(e)}\" }"
        code_language: python3
        desc: ''
        outputs:
          final_memory_output:
            children: null
            type: array[object]
        selected: false
        title: JSON -> ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆå¤‰æ›
        type: code
        variables:
        - value_selector:
          - '17555693082030'
          - text
          value_type: string
          variable: arg1
        - value_selector:
          - conversation
          - memory
          value_type: array[object]
          variable: current_memory
      height: 54
      id: '17555701360760'
      position:
        x: 5313
        y: 932.5
      positionAbsolute:
        x: 5313
        y: 932.5
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        desc: ''
        items:
        - input_type: variable
          operation: over-write
          value:
          - '17555701360760'
          - final_memory_output
          variable_selector:
          - conversation
          - memory
          write_mode: over-write
        selected: false
        title: æ›´æ–°æ¸ˆã¿ãƒ¡ãƒ¢ãƒªä¿å­˜
        type: assigner
        version: '2'
      height: 86
      id: '17555702366390'
      position:
        x: 5647
        y: 896.5
      positionAbsolute:
        x: 5647
        y: 896.5
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        author: Dify
        desc: ''
        height: 558
        selected: false
        showAuthor: true
        text: '{"root":{"children":[{"children":[{"detail":0,"format":1,"mode":"normal","style":"","text":"ğŸ¯
          ã‚„ã‚ŠãŸã„ã“ã¨ï¼ˆã‚´ãƒ¼ãƒ«ï¼‰","type":"text","version":1}],"direction":"ltr","format":"","indent":0,"type":"paragraph","version":1,"textFormat":1,"textStyle":""},{"children":[],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[{"children":[{"detail":0,"format":1,"mode":"normal","style":"","text":"ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒè©±ã™é †ç•ªã«ä¾å­˜ã›ãš","type":"text","version":1},{"detail":0,"format":0,"mode":"normal","style":"","text":"ã€ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãŒå¸¸ã«ã€Œä»Šä½•ã‚’èãã¹ãã‹ã€ã‚’æ­£ã—ãåˆ¤æ–­ã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹ã€‚","type":"text","version":1}],"direction":"ltr","format":"","indent":0,"type":"listitem","version":1,"textFormat":1,"value":1},{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"ç‰¹ã«ã€Œãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«å…¥åŠ›ã®é€”ä¸­ã§ã€ã„ããªã‚Šãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’è©±ã—å§‹ã‚ã‚‹ã€ã‚±ãƒ¼ã‚¹ã§ã‚‚ã€è‡ªç„¶ã«ä¼šè©±ã‚’èª˜å°ã§ãã‚‹ã‚ˆã†ã«ã—ãŸã„ã€‚","type":"text","version":1}],"direction":"ltr","format":"","indent":0,"type":"listitem","version":1,"value":2},{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"çµæœã¨ã—ã¦ã€","type":"text","version":1},{"detail":0,"format":1,"mode":"normal","style":"","text":"èé€šã®åŠ¹ããƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒªãƒ³ã‚°ãƒ—ãƒ­ã‚»ã‚¹","type":"text","version":1},{"detail":0,"format":0,"mode":"normal","style":"","text":"ã‚’å®Ÿç¾ã—ã€å¯¾è©±å…¨ä½“ã®è‡ªç„¶ã•ã¨ç²¾åº¦ã‚’é«˜ã‚ã‚‹ã€‚","type":"text","version":1}],"direction":"ltr","format":"","indent":0,"type":"listitem","version":1,"value":3}],"direction":"ltr","format":"","indent":0,"type":"list","version":1,"listType":"bullet","start":1,"tag":"ul"},{"children":[],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[{"detail":0,"format":1,"mode":"normal","style":"","text":"ğŸ› ï¸
          ã‚„ã‚‹ã“ã¨ï¼ˆå…·ä½“çš„ã‚¹ãƒ†ãƒƒãƒ—ï¼‰","type":"text","version":1}],"direction":"ltr","format":"","indent":0,"type":"paragraph","version":1,"textFormat":1,"textStyle":""},{"children":[],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[{"detail":0,"format":1,"mode":"normal","style":"","text":"Step
          1: ã€Œ2. æ€è€ƒã¨åˆ¤æ–­ã€ãƒãƒ¼ãƒ‰ã®ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰","type":"text","version":1}],"direction":"ltr","format":"","indent":0,"type":"paragraph","version":1,"textFormat":1,"textStyle":""},{"children":[],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"ã“ã‚Œã¾ã§ã®ã€Œæ¬¡ã«å–ã‚‹ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚’æ±ºã‚ã‚‹ã€å½¹å‰²ã«åŠ ãˆã¦ã€","type":"text","version":1},{"detail":0,"format":1,"mode":"normal","style":"","text":"ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™ºè¨€ã®ãƒˆãƒ”ãƒƒã‚¯åˆ†é¡","type":"text","version":1},{"detail":0,"format":0,"mode":"normal","style":"","text":"ã‚’è¡Œã†ã€‚","type":"text","version":1}],"direction":"ltr","format":"","indent":0,"type":"listitem","version":1,"value":1},{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"ãƒˆãƒ”ãƒƒã‚¯ã¯æœ€ä½é™2ã¤ã«åˆ†é¡ï¼š","type":"text","version":1}],"direction":"ltr","format":"","indent":0,"type":"listitem","version":1,"value":2},{"children":[{"children":[{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"PROFILING
          = è‡ªåˆ†è‡ªèº«ã®è©±ï¼ˆãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«æƒ…å ±ï¼‰","type":"text","version":1}],"direction":"ltr","format":"","indent":1,"type":"listitem","version":1,"value":1},{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"REQUEST
          = ä¼šã„ãŸã„äººç‰©ã‚„å¸Œæœ›ã®è©±","type":"text","version":1}],"direction":"ltr","format":"","indent":1,"type":"listitem","version":1,"value":2}],"direction":"ltr","format":"","indent":0,"type":"list","version":1,"listType":"bullet","start":1,"tag":"ul"}],"direction":"ltr","format":"","indent":0,"type":"listitem","version":1,"value":3},{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"topic
          ã‚’åˆ¤å®šã—ãŸä¸Šã§ã€phase ã¨çµ„ã¿åˆã‚ã›ã¦ next_action ã‚’æ±ºå®šã™ã‚‹æ–°ãƒ«ãƒ¼ãƒ«ã‚’å°å…¥ã€‚","type":"text","version":1}],"direction":"ltr","format":"","indent":0,"type":"listitem","version":1,"value":3},{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"ç‰¹ã«ã€phase
          = profiling ãªã®ã« topic = REQUEST ã®å ´åˆã¯ã€","type":"text","version":1},{"detail":0,"format":1,"mode":"normal","style":"","text":"GUIDE_TO_PROFILING","type":"text","version":1},{"detail":0,"format":0,"mode":"normal","style":"","text":"
          ã¨ã„ã†æ–°ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚’è¿”ã™ã€‚","type":"text","version":1}],"direction":"ltr","format":"","indent":0,"type":"listitem","version":1,"value":4}],"direction":"ltr","format":"","indent":0,"type":"list","version":1,"listType":"bullet","start":1,"tag":"ul"},{"children":[],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[{"detail":0,"format":1,"mode":"normal","style":"","text":"Step
          2: ã€Œ3. ã‚¢ã‚¯ã‚·ãƒ§ãƒ³åˆ†å²ã€ã«æ–°ã—ã„ãƒ«ãƒ¼ãƒˆã‚’è¿½åŠ ","type":"text","version":1}],"direction":"ltr","format":"","indent":0,"type":"paragraph","version":1,"textFormat":1,"textStyle":""},{"children":[],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"æ—¢å­˜ã®
          UPDATE_MEMORY / PROCESS_REQUEST / ANALYZE_RESPONSE_INTENT ã«åŠ ãˆã€","type":"text","version":1}],"direction":"ltr","format":"","indent":0,"type":"listitem","version":1,"value":1},{"children":[{"detail":0,"format":1,"mode":"normal","style":"","text":"IF
          next_action = GUIDE_TO_PROFILING â†’ æ–°ã—ã„èª˜å°ãƒ•ãƒ­ãƒ¼ã¸","type":"text","version":1}],"direction":"ltr","format":"","indent":0,"type":"listitem","version":1,"textFormat":1,"value":2}],"direction":"ltr","format":"","indent":0,"type":"list","version":1,"textFormat":1,"listType":"bullet","start":1,"tag":"ul"},{"children":[],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[{"detail":0,"format":1,"mode":"normal","style":"","text":"Step
          3: ã€Œå¯¾è©±èª˜å°ã€ãƒãƒ¼ãƒ‰ã®æ–°è¨­","type":"text","version":1}],"direction":"ltr","format":"","indent":0,"type":"paragraph","version":1,"textFormat":1,"textStyle":""},{"children":[],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’ä¸€æ—¦å—ã‘æ­¢ã‚ã¤ã¤ã€å„ªã—ããƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«å…¥åŠ›ã«æˆ»ã™ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ç”Ÿæˆã€‚","type":"text","version":1}],"direction":"ltr","format":"","indent":0,"type":"listitem","version":1,"value":1},{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"ä¾‹:","type":"text","version":1},{"type":"linebreak","version":1},{"detail":0,"format":0,"mode":"normal","style":"","text":"ã€ŒAIã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã®æ–¹ã¨ä¼šã„ãŸã„ã€ã¨ã®ã“ã¨ã€æ‰¿çŸ¥ã—ã¾ã—ãŸï¼ãã®å‡ºä¼šã„ã‚’å®Ÿç¾ã™ã‚‹ãŸã‚ã«ã€ã¾ãšã€ã‚ãªãŸã”è‡ªèº«ã®ã“ã¨ã‚’å°‘ã—ã ã‘æ•™ãˆã¦ã„ãŸã ã‘ã¾ã™ã‹ï¼Ÿ","type":"text","version":1}],"direction":"ltr","format":"","indent":0,"type":"listitem","version":1,"value":2}],"direction":"ltr","format":"","indent":0,"type":"list","version":1,"listType":"bullet","start":1,"tag":"ul"},{"children":[],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[{"detail":0,"format":1,"mode":"normal","style":"","text":"âœ…
          ã“ã®æ”¹ä¿®ã®åŠ¹æœ","type":"text","version":1}],"direction":"ltr","format":"","indent":0,"type":"paragraph","version":1,"textFormat":1,"textStyle":""},{"children":[],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒã©ã®é †ç•ªã§è©±ã—ã¦ã‚‚ã€AIãŒã€Œä»Šã®ç™ºè¨€ã¯ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ãªã®ã‹ãƒªã‚¯ã‚¨ã‚¹ãƒˆãªã®ã‹ã€ã‚’ç†è§£ã§ãã‚‹ã€‚","type":"text","version":1}],"direction":"ltr","format":"","indent":0,"type":"listitem","version":1,"value":1},{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"ä¼šè©±ã‚’è‡ªç„¶ã«ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒªãƒ³ã‚°ã«èª˜å°ã§ãã€","type":"text","version":1},{"detail":0,"format":1,"mode":"normal","style":"","text":"ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ãŒå´©å£Šã—ãªããªã‚‹","type":"text","version":1},{"detail":0,"format":0,"mode":"normal","style":"","text":"ã€‚","type":"text","version":1}],"direction":"ltr","format":"","indent":0,"type":"listitem","version":1,"value":2},{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãŒä¼šè©±ã®ä¸»å°æ¨©ã‚’æ¡ã‚Šç¶šã‘ã€ã‚ˆã‚Šè‡ªç„¶ã§è³¢ã„å¯¾è©±ãŒå®Ÿç¾ã§ãã‚‹ã€‚","type":"text","version":1}],"direction":"ltr","format":"","indent":0,"type":"listitem","version":1,"value":3}],"direction":"ltr","format":"","indent":0,"type":"list","version":1,"listType":"bullet","start":1,"tag":"ul"},{"children":[],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"ã¾ã¨ã‚ã‚‹ã¨ã€","type":"text","version":1}],"direction":"ltr","format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"ğŸ‘‰
          ã€Œé †ç•ªãŒé•ã†å…¥åŠ›ã€ã«ã‚‚å¯¾å¿œã§ãã‚‹ã‚ˆã†ã«ã€","type":"text","version":1},{"detail":0,"format":1,"mode":"normal","style":"","text":"æ€è€ƒãƒãƒ¼ãƒ‰ã§ãƒˆãƒ”ãƒƒã‚¯åˆ†é¡
          â†’ æ–°ã‚¢ã‚¯ã‚·ãƒ§ãƒ³GUIDE_TO_PROFILING â†’ èª˜å°ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ç”Ÿæˆ","type":"text","version":1},{"detail":0,"format":0,"mode":"normal","style":"","text":"ã¨ã„ã†æµã‚Œã‚’çµ„ã¿è¾¼ã‚€ã®ãŒä»Šå›ã®æ”¹ä¿®ã§ã™ã€‚","type":"text","version":1}],"direction":"ltr","format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[],"direction":null,"format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"ã“ã®æ•´ç†ã§é€²ã‚ã¦ã„ã‘ã°ã€è¨­è¨ˆã¨å®Ÿè£…ãŒä¸€æ°—ã«ã‚¯ãƒªã‚¢ã«ãªã‚‹ã¨æ€ã„ã¾ã™ï¼","type":"text","version":1}],"direction":"ltr","format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""},{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"ã“ã®ã‚ã¨ã€å®Ÿè£…ã®ãŸã‚ã®
          ","type":"text","version":1},{"detail":0,"format":1,"mode":"normal","style":"","text":"å…·ä½“çš„ãªãƒ—ãƒ­ãƒ³ãƒ—ãƒˆè¨­è¨ˆä¾‹","type":"text","version":1},{"detail":0,"format":0,"mode":"normal","style":"","text":"
          ã‚’ã•ã‚‰ã«æ·±æ˜ã‚Šã—ã¦ã„ãã¾ã—ã‚‡ã†ã‹ï¼Ÿ","type":"text","version":1}],"direction":"ltr","format":"","indent":0,"type":"paragraph","version":1,"textFormat":0,"textStyle":""}],"direction":"ltr","format":"","indent":0,"type":"root","version":1}}'
        theme: blue
        title: ''
        type: ''
        width: 560
      height: 558
      id: '1755570404778'
      position:
        x: 678.4826595470287
        y: 2196.244444991803
      positionAbsolute:
        x: 678.4826595470287
        y: 2196.244444991803
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom-note
      width: 560
    - data:
        answer: 'æ‰¿çŸ¥ã„ãŸã—ã¾ã—ãŸã€‚ãŠè©±ã‚’ã¾ã¨ã‚ã•ã›ã¦ã„ãŸã ãã¾ã™ã­ã€‚


          {{#17555693082030.structured_output.must_have_skills#}}ãªã©ã®ã‚¹ã‚­ãƒ«ã‚’æŒã¡ã€{{#17555693082030.structured_output.should_have_roles#}}ã®ã”çµŒé¨“ãŒã‚ã‚‹ã€{{#17555693082030.structured_output.needs#}}ã‚’æ¢ã—ã¦ã„ã‚‰ã£ã—ã‚ƒã‚‹ã®ã§ã™ã­ã€‚


          ãŸã ã„ã¾ã€ç§ã®ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã®ä¸­ã‹ã‚‰ã€ãã®ã”è¦æœ›ã«æœ€ã‚‚ãƒãƒƒãƒã™ã‚‹æ–¹ã‚’æ¢ã—å§‹ã‚ã¾ã™ã€‚æœ€é«˜ã®å‡ºä¼šã„ã‚’ãŠå±Šã‘ã§ãã‚‹ã‚ˆã†ã€å°‘ã—ãŠæ™‚é–“ã‚’ã„ãŸã ãã¾ã™ãŒã€ã©ã†ãæ¥½ã—ã¿ã«ãŠå¾…ã¡ãã ã•ã„ï¼âœ¨'
        desc: ''
        selected: false
        title: ãƒªã‚¯ã‚¨ã‚¹ãƒˆå—å–å®Œäº†å¿œç­”
        type: answer
        variables: []
      height: 302
      id: '17555706503860'
      position:
        x: 7651
        y: 828.5
      positionAbsolute:
        x: 7651
        y: 828.5
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        context:
          enabled: false
          variable_selector: []
        desc: ''
        error_strategy: fail-branch
        memory:
          query_prompt_template: "# ã‚ãªãŸãŒåˆ©ç”¨ã§ãã‚‹æƒ…å ±ï¼ˆã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆï¼‰\n- ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æœ€æ–°ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸: {{#sys.query#}}\n\
            - ã‚ãªãŸè‡ªèº«ã®æ€è€ƒãƒ—ãƒ­ã‚»ã‚¹: \n{{#17550600850210.structured_output.thinking_process#}}"
          role_prefix:
            assistant: ''
            user: ''
          window:
            enabled: false
            size: 50
        model:
          completion_params:
            temperature: 0.7
          mode: chat
          name: gpt-4o
          provider: langgenius/openai/openai
        prompt_template:
        - id: 4447a6dc-5818-47ff-9b4d-a64792e4e8dc
          role: system
          text: '# ã‚ãªãŸã®å½¹å‰²ï¼ˆã‚¢ã‚¤ãƒ‡ãƒ³ãƒ†ã‚£ãƒ†ã‚£ï¼‰

            ã‚ãªãŸã¯ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¨ã®ä¼šè©±ã®ç›®çš„ã‚’è¦‹å¤±ã‚ãšã€å¸¸ã«å¿ƒåœ°ã‚ˆã„å¯¾è©±ã®æµã‚Œã‚’ç¶­æŒã™ã‚‹ã®ãŒå¾—æ„ãªã€çµŒé¨“è±Šå¯Œãªã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãƒ»ãƒŠãƒ“ã‚²ãƒ¼ã‚¿ãƒ¼ã§ã™ã€‚'
        - id: 58624808-3673-4fac-8fc8-95d7e6fc9c70
          role: user
          text: '# ã‚ãªãŸã®å³å¯†ãªã‚¿ã‚¹ã‚¯

            ã‚ãªãŸã®å”¯ä¸€ã®ã‚¿ã‚¹ã‚¯ã¯ã€**ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ã€Œä¼šã„ãŸã„ã€ã¨ã„ã†æ°—æŒã¡ã‚’ä¸€åº¦å—ã‘æ­¢ã‚ãŸä¸Šã§ã€ã€Œãã®ç´ æ™´ã‚‰ã—ã„å‡ºä¼šã„ã‚’å®Ÿç¾ã™ã‚‹ãŸã‚ã«ã€ã¾ãšã‚ãªãŸã®ã“ã¨ã‚’æ•™ãˆã¦ãã ã•ã„ã€ã¨ã€å„ªã—ãå¯¾è©±ã‚’ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒªãƒ³ã‚°ã«å¼•ãæˆ»ã™ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ç”Ÿæˆã™ã‚‹ã“ã¨**ã§ã™ã€‚


            ## å¿œç­”ç”Ÿæˆã®ãƒ«ãƒ¼ãƒ«

            1.  **å…±æ„Ÿã¨è‚¯å®š:** ã¾ãšã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒè©±ã—ã¦ãã‚ŒãŸã€Œä¼šã„ãŸã„äººã€ã®å†…å®¹ï¼ˆ`sys.query`ï¼‰ã‚’è‚¯å®šçš„ã«è¦ç´„ã—ã€ãã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆãŒç´ æ™´ã‚‰ã—ã„ã‚‚ã®ã§ã‚ã‚‹ã“ã¨ã‚’ä¼ãˆã¦ãã ã•ã„ã€‚

            2.  **ç›®çš„ã®æç¤º:** æ¬¡ã«ã€ã€Œæœ€é«˜ã®å‡ºä¼šã„ã‚’è¦‹ã¤ã‘ã‚‹ãŸã‚ã«ã¯ã€ã¾ãšã‚ãªãŸã”è‡ªèº«ã®ã“ã¨ã‚’æ·±ãç†è§£ã™ã‚‹ã“ã¨ãŒä¸å¯æ¬ ã§ã™ã€ã¨ã„ã†ã‚ˆã†ã«ã€ãªãœãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒªãƒ³ã‚°ãŒå¿…è¦ãªã®ã‹ã€ãã®ç†ç”±ã‚’ä¸å¯§ã«èª¬æ˜ã—ã¦ãã ã•ã„ã€‚

            3.  **å…·ä½“çš„ãªè¡Œå‹•å–šèµ·:** æœ€å¾Œã«ã€ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒªãƒ³ã‚°ã‚’é–‹å§‹ã™ã‚‹ãŸã‚ã®ã€å…·ä½“çš„ã§ç­”ãˆã‚„ã™ã„æœ€åˆã®è³ªå•ï¼ˆä¾‹ï¼šåå‰ã‚„ä»•äº‹ã«ã¤ã„ã¦ï¼‰ã‚’æŠ•ã’ã‹ã‘ã¦ãã ã•ã„ã€‚

            4.  å‡ºåŠ›ã¯ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«èªã‚Šã‹ã‘ã‚‹ã€è‡ªç„¶ã§æ¸©ã‹ã¿ã®ã‚ã‚‹å¿œç­”ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãã®ã‚‚ã®ã ã‘ã«ã—ã¦ãã ã•ã„ã€‚


            ## å¿œç­”ã®ãƒ‘ãƒ¼ã‚½ãƒŠãƒ©ã‚¤ã‚ºã«é–¢ã™ã‚‹ãƒ«ãƒ¼ãƒ«

            - ã‚‚ã—ã€Œãƒ¦ãƒ¼ã‚¶ãƒ¼ã®åå‰ã€ãŒåˆ¤æ˜ã—ã¦ã„ã‚‹å ´åˆã¯ã€å¿œç­”ã®å†’é ­ã§ã€Œã€‡ã€‡ã•ã‚“ã€ã€ã¨è‡ªç„¶ã«å‘¼ã³ã‹ã‘ã‚‹ã“ã¨ã‹ã‚‰å§‹ã‚ã¦ãã ã•ã„ã€‚

            - ãŸã ã—ã€ä¸è‡ªç„¶ã«ãªã‚‰ãªã„ã‚ˆã†ã€æ¯å›å¿…ãšå‘¼ã³ã‹ã‘ã‚‹å¿…è¦ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚æ–‡è„ˆã«å¿œã˜ã¦ã€æœ€ã‚‚äººé–“ã‚‰ã—ã„ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’é¸æŠã—ã¦ãã ã•ã„ã€‚'
        - id: 8fe09b2d-c8de-4437-ae80-8e1bd55fceab
          role: assistant
          text: '# å‡ºåŠ›ä¾‹

            ã€ŒAIã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã®æ–¹ã¨ä¼šã„ãŸã„ã€ã¨ã®ã“ã¨ã€æ‰¿çŸ¥ã„ãŸã—ã¾ã—ãŸï¼ç´ æ™´ã‚‰ã—ã„ç›®æ¨™ã§ã™ã­ã€‚ãã®å®Ÿç¾ã«å‘ã‘ã¦ã€å…¨åŠ›ã§ãŠæ‰‹ä¼ã„ã•ã›ã¦ãã ã•ã„ã€‚


            ã‚ãªãŸã«ã¨ã£ã¦æœ€é«˜ã®å‡ºä¼šã„ã‚’å‰µå‡ºã™ã‚‹ãŸã‚ã«ã€ã¾ãšã€ã‚ãªãŸã”è‡ªèº«ã®ã“ã¨ã‚’ã‚‚ã†å°‘ã—ã ã‘æ•™ãˆã¦ã„ãŸã ã‘ã¾ã™ã§ã—ã‚‡ã†ã‹ã€‚


            ãŠåå‰ã‚„ã€ç¾åœ¨ã©ã®ã‚ˆã†ãªãŠä»•äº‹ã‚’ã•ã‚Œã¦ã„ã‚‹ã‹ãªã©ã€ç°¡å˜ãªè‡ªå·±ç´¹ä»‹ã‹ã‚‰ãŠä¼ºã„ã—ã¦ã‚‚ã‚ˆã‚ã—ã„ã§ã™ã‹ï¼Ÿ'
        retry_config:
          max_retries: 3
          retry_enabled: true
          retry_interval: 1000
        selected: false
        structured_output:
          schema:
            properties:
              intent:
                type: string
              summary:
                type: string
            required:
            - intent
            - summary
            type: object
        structured_output_enabled: false
        title: å¯¾è©±èª˜å°ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ç”Ÿæˆ
        type: llm
        variables: []
        vision:
          configs:
            detail: high
          enabled: false
      height: 155
      id: '17555754302730'
      position:
        x: 5647
        y: 1491.5
      positionAbsolute:
        x: 5647
        y: 1491.5
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        answer: '{{#17555754302730.text#}}'
        desc: ''
        selected: false
        title: å¯¾è©±èª˜å°å¿œç­”
        type: answer
        variables: []
      height: 105
      id: '17555756807370'
      position:
        x: 5981
        y: 1533
      positionAbsolute:
        x: 5981
        y: 1533
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        desc: ''
        items:
        - input_type: variable
          operation: over-write
          value:
          - '17550600850210'
          - structured_output
          - captured_request
          variable_selector:
          - conversation
          - captured_request_cache
          write_mode: over-write
        - input_type: variable
          operation: over-write
          value:
          - '17550600850210'
          - structured_output
          - captured_profile_info
          variable_selector:
          - conversation
          - captured_profile_cache
          write_mode: over-write
        selected: false
        title: ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’ä¸€æ™‚ä¿å­˜
        type: assigner
        version: '2'
      height: 112
      id: '1755576682837'
      position:
        x: 5313
        y: 1533
      positionAbsolute:
        x: 5313
        y: 1533
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        context:
          enabled: false
          variable_selector: []
        desc: ''
        error_strategy: fail-branch
        memory:
          query_prompt_template: "# ã‚ãªãŸãŒåˆ©ç”¨ã§ãã‚‹æƒ…å ±ï¼ˆã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆï¼‰\n- ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æœ€æ–°ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸: {{#sys.query#}}\n\
            - ã“ã‚Œã¯ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒªãƒ³ã‚°ä¸­ã«ã€å…ˆè¡Œã—ã¦è©±ã—ã¦ãã‚ŒãŸã€Œä¼šã„ãŸã„äººã€ã«é–¢ã™ã‚‹æƒ…å ±ã®ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã§ã™ã€‚ç©ºã®å ´åˆã‚‚ã‚ã‚Šã¾ã™ã€‚: {{#conversation.captured_request_cache#}}\n\
            \n- ã“ã‚ŒãŒã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‹ã‚‰å—ã‘å–ã£ãŸæœ€æ–°ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆæƒ…å ±ã§ã™ã€‚\n  - ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒªã‚¯ã‚¨ã‚¹ãƒˆ: {{#17555998217170.requests_context#}}\n\
            - å‚è€ƒã¾ã§ã«ã€ã“ã‚ŒãŒãƒ¦ãƒ¼ã‚¶ãƒ¼è‡ªèº«ã®ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ã§ã™ã€‚\n  - ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«: {{#17555998217170.profile_context#}}"
          role_prefix:
            assistant: ''
            user: ''
          window:
            enabled: false
            size: 50
        model:
          completion_params:
            temperature: 0.7
          mode: chat
          name: gpt-4o
          provider: langgenius/openai/openai
        prompt_template:
        - id: 4447a6dc-5818-47ff-9b4d-a64792e4e8dc
          role: system
          text: '# ã‚ãªãŸã®å½¹å‰²ï¼ˆã‚¢ã‚¤ãƒ‡ãƒ³ãƒ†ã‚£ãƒ†ã‚£ï¼‰

            ã‚ãªãŸã¯ã€ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒªãƒ³ã‚°ã®å®Œäº†ã‚’ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ä¼ãˆã€æ¬¡ã®å¯¾è©±ãƒ•ã‚§-ã‚ºã§ã‚ã‚‹ã€Œãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒ’ã‚¢ãƒªãƒ³ã‚°ã€ã¸ã¨ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’è‡ªç„¶ã«ã€ãã—ã¦å·§ã¿ã«ç§»è¡Œã•ã›ã‚‹ã€çµŒé¨“è±Šå¯Œãªã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãƒ»ãƒŠãƒ“ã‚²ãƒ¼ã‚¿ãƒ¼ã§ã™ã€‚'
        - id: 58624808-3673-4fac-8fc8-95d7e6fc9c70
          role: user
          text: "# ã‚ãªãŸã®å³å¯†ãªã‚¿ã‚¹ã‚¯\nã‚ãªãŸã®å”¯ä¸€ã®ã‚¿ã‚¹ã‚¯ã¯ã€ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã‚’åˆ†æã—ã€**çŠ¶æ³ã«å¿œã˜ãŸæœ€é©ãªå¿œç­”ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’1ã¤ã ã‘ç”Ÿæˆã™ã‚‹ã“ã¨**ã§ã™ã€‚\n\
            \n## å¿œç­”ç”Ÿæˆã®çµ¶å¯¾çš„ãªãƒ«ãƒ¼ãƒ«\n1.  **ã‚‚ã—`å…ˆè¡Œãƒªã‚¯ã‚¨ã‚¹ãƒˆã®ã‚­ãƒ£ãƒƒã‚·ãƒ¥`ã«å…·ä½“çš„ãªå†…å®¹ãŒå«ã¾ã‚Œã¦ã„ã‚‹å ´åˆ:**\n    - **ã‚¹ãƒ†ãƒƒãƒ—1:**\
            \ ã¾ãšã€ã€Œã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ã€‚ã‚ãªãŸã¸ã®ç†è§£ãŒæ·±ã¾ã‚Šã€ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ã®ä½œæˆãŒå®Œäº†ã—ã¾ã—ãŸã€‚ã€ã¨ä¼ãˆã¾ã™ã€‚\n    - **ã‚¹ãƒ†ãƒƒãƒ—2:**\
            \ æ¬¡ã«ã€ã€Œã•ã¦ã€ãŠè©±ã®æœ€åˆã®æ–¹ã§ ã€{{#conversation.captured_request_cache#}}ã€ã¨ãŠã£ã—ã‚ƒã£ã¦ã„ã¾ã—ãŸãŒã€ã€ã¨ã„ã†ã‚ˆã†ã«ã€**AIãŒãã®å†…å®¹ã‚’è¦šãˆã¦ã„ãŸã“ã¨**ã‚’æ˜ç¢ºã«ç¤ºã—ã¦ãã ã•ã„ã€‚\n\
            \    - **ã‚¹ãƒ†ãƒƒãƒ—3:** æœ€å¾Œã«ã€ãã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã«ã¤ã„ã¦ã€ã‚ˆã‚Šè©³ã—ãæ·±æ˜ã‚Šã™ã‚‹ãŸã‚ã®ã€å…·ä½“çš„ã§ã‚ªãƒ¼ãƒ—ãƒ³ãªè³ªå•ã‚’æŠ•ã’ã‹ã‘ã¦ãã ã•ã„ã€‚\n\
            \n2.  **ã‚‚ã—`å…ˆè¡Œãƒªã‚¯ã‚¨ã‚¹ãƒˆã®ã‚­ãƒ£ãƒƒã‚·ãƒ¥`ãŒç©ºï¼ˆnullï¼‰ã®å ´åˆ:**\n    - **ã‚¹ãƒ†ãƒƒãƒ—1:** ã¾ãšã€ã€Œã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ã€‚ã‚ãªãŸã¸ã®ç†è§£ãŒæ·±ã¾ã‚Šã€ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ã®ä½œæˆãŒå®Œäº†ã—ã¾ã—ãŸã€‚ã€ã¨ä¼ãˆã¾ã™ã€‚\n\
            \    - **ã‚¹ãƒ†ãƒƒãƒ—2:** æ¬¡ã«ã€ã€Œã¤ãã¾ã—ã¦ã¯ã€æ¬¡ã«ã‚ãªãŸãŒã€å…·ä½“çš„ã«ä¼šã£ã¦ã¿ãŸã„ã€ã¨æ„Ÿã˜ã‚‹äººç‰©åƒã«ã¤ã„ã¦ã€ãŠä¼ºã„ã—ã¦ã‚‚ã‚ˆã‚ã—ã„ã§ã—ã‚‡ã†ã‹ï¼Ÿã€ã¨ã€**åˆã‚ã¦ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’å°‹ã­ã‚‹**è‡ªç„¶ãªè³ªå•ã‚’ã—ã¦ãã ã•ã„ã€‚\n\
            \n# å‡ºåŠ›ã¯ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«èªã‚Šã‹ã‘ã‚‹å¿œç­”ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãã®ã‚‚ã®ã ã‘ã«ã—ã¦ãã ã•ã„ã€‚\n\n## å¿œç­”ã®ãƒ‘ãƒ¼ã‚½ãƒŠãƒ©ã‚¤ã‚ºã«é–¢ã™ã‚‹ãƒ«ãƒ¼ãƒ«\n- ã‚‚ã—ã€Œãƒ¦ãƒ¼ã‚¶ãƒ¼ã®åå‰ã€ãŒåˆ¤æ˜ã—ã¦ã„ã‚‹å ´åˆã¯ã€å¿œç­”ã®å†’é ­ã§ã€Œã€‡ã€‡ã•ã‚“ã€ã€ã¨è‡ªç„¶ã«å‘¼ã³ã‹ã‘ã‚‹ã“ã¨ã‹ã‚‰å§‹ã‚ã¦ãã ã•ã„ã€‚\n\
            - ãŸã ã—ã€ä¸è‡ªç„¶ã«ãªã‚‰ãªã„ã‚ˆã†ã€æ¯å›å¿…ãšå‘¼ã³ã‹ã‘ã‚‹å¿…è¦ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚æ–‡è„ˆã«å¿œã˜ã¦ã€æœ€ã‚‚äººé–“ã‚‰ã—ã„ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’é¸æŠã—ã¦ãã ã•ã„ã€‚"
        - id: 8fe09b2d-c8de-4437-ae80-8e1bd55fceab
          role: assistant
          text: '# å‡ºåŠ›ä¾‹ï¼ˆå…ˆè¡Œãƒªã‚¯ã‚¨ã‚¹ãƒˆã®ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãŒã‚ã‚‹å ´åˆï¼‰

            ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ï¼ã‚ãªãŸã®ãŠè©±ã‚’é€šã˜ã¦ã€ã‚ãªãŸã®ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ã¨ã€ãã®èƒŒæ™¯ã«ã‚ã‚‹ãƒ“ã‚¸ãƒ§ãƒ³ã«ã¤ã„ã¦æ·±ãç†è§£ã™ã‚‹ã“ã¨ãŒã§ãã¾ã—ãŸã€‚


            ã•ã¦ã€ãŠè©±ã®æœ€åˆã®æ–¹ã§ã€ŒAIã«è©³ã—ã„ã‚·ãƒ‹ã‚¢ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã¨æŠ€è¡“çš„ãªå£æ‰“ã¡ãŒã—ãŸã„ã€ã¨ãŠã£ã—ã‚ƒã£ã¦ã„ã¾ã—ãŸãŒã€ãã®ç‚¹ã«ã¤ã„ã¦ã€ã‚‚ã†å°‘ã—ã ã‘è©³ã—ããŠä¼ºã„ã—ã¦ã‚‚ã‚ˆã‚ã—ã„ã§ã—ã‚‡ã†ã‹ï¼Ÿ

            ä¾‹ãˆã°ã€ãã®ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã®æ–¹ã«ã¯ã€ã©ã®ã‚ˆã†ãªçµŒé¨“ã‚„ä¾¡å€¤è¦³ã‚’æŒã£ã¦ã„ã‚‹ã¨ç†æƒ³çš„ã ã¨ãŠè€ƒãˆã§ã™ã‹ï¼Ÿ



            # å‡ºåŠ›ä¾‹ï¼ˆå…ˆè¡Œãƒªã‚¯ã‚¨ã‚¹ãƒˆã®ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãŒãªã„å ´åˆï¼‰

            ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ï¼ã‚ãªãŸã®ãŠè©±ã‚’é€šã˜ã¦ã€ã‚ãªãŸã®ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ã¨ã€ãã®èƒŒæ™¯ã«ã‚ã‚‹ãƒ“ã‚¸ãƒ§ãƒ³ã«ã¤ã„ã¦æ·±ãç†è§£ã™ã‚‹ã“ã¨ãŒã§ãã¾ã—ãŸã€‚


            ã“ã®æƒ…å ±ã‚’å…ƒã«ã€ã‚ãªãŸã«ã¨ã£ã¦æœ€é«˜ã®å‡ºä¼šã„ã‚’å‰µå‡ºã™ã‚‹æº–å‚™ã‚’é€²ã‚ã¦ã„ãã¾ã™ã€‚


            ã¤ãã¾ã—ã¦ã¯ã€æ¬¡ã«ã‚ãªãŸãŒã€Œå…·ä½“çš„ã«ä¼šã£ã¦ã¿ãŸã„ã€ã¨æ„Ÿã˜ã‚‹äººç‰©åƒã«ã¤ã„ã¦ã€ãŠä¼ºã„ã—ã¦ã‚‚ã‚ˆã‚ã—ã„ã§ã—ã‚‡ã†ã‹ï¼Ÿ'
        retry_config:
          max_retries: 3
          retry_enabled: true
          retry_interval: 1000
        selected: false
        structured_output:
          schema:
            properties:
              intent:
                type: string
              summary:
                type: string
            required:
            - intent
            - summary
            type: object
        structured_output_enabled: false
        title: å®Œäº†å¿œç­”ï¼†æ¬¡ã‚¹ãƒ†ãƒƒãƒ—ç§»è¡Œ
        type: llm
        variables: []
        vision:
          configs:
            detail: high
          enabled: false
      height: 155
      id: '17555772893160'
      position:
        x: 6649
        y: 493.5
      positionAbsolute:
        x: 6649
        y: 493.5
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        cases:
        - case_id: 'true'
          conditions:
          - comparison_operator: not empty
            id: 552a347c-efe5-4f10-9018-b79385c13bb6
            value: ''
            varType: string
            variable_selector:
            - conversation
            - captured_request_cache
          id: 'true'
          logical_operator: and
        desc: ''
        selected: false
        title: ã‚­ãƒ£ãƒƒã‚·ãƒ¥å­˜åœ¨ãƒã‚§ãƒƒã‚¯
        type: if-else
      height: 126
      id: '1755581527444'
      position:
        x: 5313
        y: 497
      positionAbsolute:
        x: 5313
        y: 497
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        context:
          enabled: false
          variable_selector: []
        desc: ''
        memory:
          query_prompt_template: "# ã‚ãªãŸãŒåˆ©ç”¨ã§ãã‚‹æƒ…å ±ï¼ˆã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆï¼‰\n- ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æœ€æ–°ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸: {{#sys.query#}}\n\
            - ã“ã‚ŒãŒã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒªãƒ³ã‚°ã®åˆæœŸæ®µéšã§è©±ã—ãŸã€ä¼šã„ãŸã„äººç‰©ã«é–¢ã™ã‚‹ç™ºè¨€ã®ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã§ã™ã€‚\n  - ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ç™ºè¨€ã‚­ãƒ£ãƒƒã‚·ãƒ¥:\
            \ {{#conversation.captured_request_cache#}}\n- ã“ã‚Œã¯ã€ç¾åœ¨å®Œæˆã—ã¦ã„ã‚‹ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«æƒ…å ±ã§ã™ã€‚ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’è§£é‡ˆã™ã‚‹éš›ã®å‚è€ƒã«ã—ã¦ãã ã•ã„ã€‚\n\
            \  - å®Œæˆæ¸ˆã¿ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«: {{#conversation.memory#}}"
          role_prefix:
            assistant: ''
            user: ''
          window:
            enabled: false
            size: 50
        model:
          completion_params: {}
          mode: chat
          name: gpt-4o
          provider: langgenius/openai/openai
        prompt_template:
        - id: c99691e0-c192-4f14-8caa-3ea897c01bea
          role: system
          text: '# ã‚ãªãŸã®å½¹å‰²ï¼ˆã‚¢ã‚¤ãƒ‡ãƒ³ãƒ†ã‚£ãƒ†ã‚£ï¼‰

            ã‚ãªãŸã¯ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒä¼šã„ãŸã„äººç‰©åƒï¼ˆãƒªã‚¯ã‚¨ã‚¹ãƒˆï¼‰ã‚’ã€å¯¾è©±ã‚’é€šã˜ã¦å…·ä½“åŒ–ã—ã€æ§‹é€ åŒ–ã•ã‚ŒãŸJSONãƒ‡ãƒ¼ã‚¿ã«å¤‰æ›ã™ã‚‹ã€å°‚é–€ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚¢ãƒŠãƒªã‚¹ãƒˆã§ã™ã€‚'
        - id: 5476fec1-333c-4236-a6ca-9c135097f7bb
          role: user
          text: '# ã‚ãªãŸã®å³å¯†ãªã‚¿ã‚¹ã‚¯

            **ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ç™ºè¨€ã‚­ãƒ£ãƒƒã‚·ãƒ¥**ã‚’åˆ†æã—ã€ã€Œä¼šã„ãŸã„äººç‰©åƒã€ã«é–¢ã™ã‚‹æƒ…å ±ã‚’ã€ä»¥ä¸‹ã®JSONã‚¹ã‚­ãƒ¼ãƒã«å¾“ã£ã¦æŠ½å‡ºãƒ»æ§‹é€ åŒ–ã—ã¦ãã ã•ã„ã€‚

            - ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®è¨€è‘‰ã‹ã‚‰ã€å…·ä½“çš„ãªã‚¹ã‚­ãƒ«ã€å½¹å‰²ã€ä¾¡å€¤è¦³ãªã©ã‚’æ¨è«–ã—ã€é©åˆ‡ãªã‚­ãƒ¼ã«å‰²ã‚Šå½“ã¦ã¦ãã ã•ã„ã€‚

            - å‡ºåŠ›ã¯ã€ç”Ÿã®JSONã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®ã¿ã§ãªã‘ã‚Œã°ãªã‚Šã¾ã›ã‚“ã€‚'
        - id: 13387976-3250-48f3-9619-8306c8dd42cd
          role: assistant
          text: "#### **ã‚·ãƒŠãƒªã‚ªï¼šäº‹æ¥­ã®æ–¹å‘æ€§ã«ã¤ã„ã¦ç›¸è«‡ã—ãŸã„**\n\n*   **ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ç™ºè¨€ã‚­ãƒ£ãƒƒã‚·ãƒ¥:**\n    > `ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã®ã‚¢ã‚¤ãƒ‡ã‚¢ã¯ã‚ã‚‹ã‚“ã§ã™ãŒã€ã“ã‚ŒãŒæœ¬å½“ã«ãƒ“ã‚¸ãƒã‚¹ã¨ã—ã¦æˆã‚Šç«‹ã¤ã®ã‹ã€è‡ªä¿¡ãŒãªãã¦ã€‚åŒã˜ã‚ˆã†ãªSaaSæ¥­ç•Œã§ã€ã‚¼ãƒ­ã‹ã‚‰äº‹æ¥­ã‚’ç«‹ã¡ä¸Šã’ãŸçµŒé¨“ã®ã‚ã‚‹èµ·æ¥­å®¶ã®æ–¹ã«ã€ãƒ¡ãƒ³ã‚¿ãƒ¼ã«ãªã£ã¦ã‚‚ã‚‰ãˆãŸã‚‰æœ€é«˜ã§ã™ã€‚`\n\
            \n*   **AIãŒå‡ºåŠ›ã™ã¹ãJSONï¼ˆãŠæ‰‹æœ¬ï¼‰:**\n    ```json\n    {\n      \"needs\": [\n\
            \        \"ãƒ¡ãƒ³ã‚¿ãƒ¼\",\n        \"äº‹æ¥­ç›¸è«‡\"\n      ],\n      \"must_have_skills\"\
            : [\n        \"SaaSäº‹æ¥­ã®ç«‹ã¡ä¸Šã’\"\n      ],\n      \"should_have_roles\": [\n\
            \        \"èµ·æ¥­å®¶\",\n        \"å‰µæ¥­è€…\"\n      ],\n      \"qualitative_traits\"\
            : [\n        \"ã‚¼ãƒ­ã‚¤ãƒã®çµŒé¨“\"\n      ]\n    }\n    ```"
        retry_config:
          max_retries: 3
          retry_enabled: true
          retry_interval: 1000
        selected: false
        structured_output:
          schema:
            properties:
              must_have_skills:
                description: ä¼šã„ãŸã„ç›¸æ‰‹ãŒã€å¿…ãšã€æŒã£ã¦ã„ã‚‹ã¹ãå°‚é–€çš„ãªã‚¹ã‚­ãƒ«ã‚„çŸ¥è­˜ï¼ˆä¾‹ï¼šAI, LLM, UXãƒ‡ã‚¶ã‚¤ãƒ³, SaaSäº‹æ¥­é–‹ç™º,
                  è³‡é‡‘èª¿é”ï¼‰
                items:
                  type: string
                type: array
              needs:
                description: ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒå¿…è¦ã¨ã—ã¦ã„ã‚‹åŠ©ã‘ã®ç¨®é¡ã‚„é–¢ä¿‚æ€§ï¼ˆä¾‹ï¼šãƒ¡ãƒ³ã‚¿ãƒ¼ã€å£æ‰“ã¡ç›¸æ‰‹ã€å…±åŒå‰µæ¥­è€…ã€ã‚¢ãƒ‰ãƒã‚¤ã‚¶ãƒ¼ã€æŠ•è³‡å®¶ï¼‰
                items:
                  type: string
                type: array
              qualitative_traits:
                description: ä¼šã„ãŸã„ç›¸æ‰‹ã«æ±‚ã‚ã‚‹ã€ã‚¹ã‚­ãƒ«ä»¥å¤–ã®å®šæ€§çš„ãªç‰¹æ€§ï¼ˆä¾¡å€¤è¦³ã€æ€§æ ¼ã€æ€æƒ³ãªã©ï¼‰ï¼ˆä¾‹ï¼šåŒã˜å¿—ã‚’æŒã¤, æŒ‘æˆ¦çš„, å®Ÿå‹™çµŒé¨“ãŒè±Šå¯Œï¼‰
                items:
                  type: string
                type: array
              should_have_roles:
                description: ä¼šã„ãŸã„ç›¸æ‰‹ãŒçµŒé¨“ã—ã¦ã„ã‚‹ã¨ã€æœ›ã¾ã—ã„ã€å½¹å‰²ã‚„çµŒæ­´ï¼ˆä¾‹ï¼šå‰µæ¥­è€…, ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢, æŠ•è³‡å®¶, ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼ï¼‰
                items:
                  type: string
                type: array
            required: []
            type: object
        structured_output_enabled: true
        title: ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‹ã‚‰ãƒªã‚¯ã‚¨ã‚¹ãƒˆæŠ½å‡º
        type: llm
        variables: []
        vision:
          configs:
            detail: high
          enabled: false
      height: 119
      id: '17555816082210'
      position:
        x: 5981
        y: 367.5
      positionAbsolute:
        x: 5981
        y: 367.5
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        code: "import json\nimport datetime\n\ndef main(arg1: str, current_memory:\
          \ list) -> dict:\n    try:\n        # --- LLMå‡ºåŠ›ã‹ã‚‰æ–°ã—ã„ãƒªã‚¯ã‚¨ã‚¹ãƒˆæƒ…å ±ã‚’ãƒ‘ãƒ¼ã‚¹ ---\n  \
          \      llm_output_str = arg1\n        new_request_obj = {}\n        start_index\
          \ = llm_output_str.find('{')\n        end_index = llm_output_str.rfind('}')\
          \ + 1\n        if start_index != -1 and end_index != 0:\n            json_str\
          \ = llm_output_str[start_index:end_index]\n            new_request_obj =\
          \ json.loads(json_str)\n\n        # --- ç¾åœ¨ã®ãƒ¡ãƒ¢ãƒªã‚’ãƒ­ãƒ¼ãƒ‰ ---\n        if isinstance(current_memory,\
          \ list) and len(current_memory) > 0:\n            updated_memory = current_memory[0]\n\
          \        else:\n            updated_memory = {}\n\n        # --- â˜…â˜…â˜…ã“ã“ã‹ã‚‰ãŒä¿®æ­£ç®‡æ‰€â˜…â˜…â˜…\
          \ ---\n        # 1. ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’è¿½åŠ \n        if \"requests\" not in updated_memory:\n\
          \            updated_memory[\"requests\"] = {}\n        new_request_id =\
          \ f\"req_{len(updated_memory.get('requests', {})) + 1:03d}\"\n        new_request\
          \ = {\n            \"id\": new_request_id,\n            \"status\": \"Active\"\
          ,\n            \"timestamp\": datetime.datetime.utcnow().isoformat() + \"\
          Z\",\n            \"structured_query\": new_request_obj\n        }\n   \
          \     updated_memory[\"requests\"][new_request_id] = new_request\n\n   \
          \     # 2. åŒæ™‚ã«ãƒ•ã‚§ãƒ¼ã‚ºã‚‚æ›´æ–°\n        if \"interaction_state\" not in updated_memory:\n\
          \            updated_memory[\"interaction_state\"] = {}\n        updated_memory[\"\
          interaction_state\"][\"phase\"] = \"request_hearing\"\n        # --- â˜…â˜…â˜…ä¿®æ­£ç®‡æ‰€ã“ã“ã¾ã§â˜…â˜…â˜…\
          \ ---\n\n        # æœ€çµ‚çš„ãªã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’é…åˆ—ã§ãƒ©ãƒƒãƒ—ã—ã¦è¿”ã™\n        return {\n           \
          \ \"final_memory_output\": [updated_memory]\n        }\n\n    except Exception\
          \ as e:\n        return { \"error\": f\"An error occurred: {str(e)}\" }"
        code_language: python3
        desc: ''
        outputs:
          final_memory_output:
            children: null
            type: array[object]
        selected: false
        title: 5c. ãƒªã‚¯ã‚¨ã‚¹ãƒˆè¿½åŠ ï¼†ãƒ•ã‚§ãƒ¼ã‚ºæ›´æ–°
        type: code
        variables:
        - value_selector:
          - '17555816082210'
          - text
          value_type: string
          variable: arg1
        - value_selector:
          - conversation
          - memory
          value_type: array[object]
          variable: current_memory
      height: 54
      id: '1755583116426'
      position:
        x: 6315
        y: 367.5
      positionAbsolute:
        x: 6315
        y: 367.5
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        desc: ''
        items:
        - input_type: variable
          operation: over-write
          value:
          - '1755583116426'
          - final_memory_output
          variable_selector:
          - conversation
          - memory
          write_mode: over-write
        selected: false
        title: æ›´æ–°æ¸ˆã¿ãƒ¡ãƒ¢ãƒªã‚’ä¿å­˜
        type: assigner
        version: '2'
      height: 86
      id: '17555832109000'
      position:
        x: 6649
        y: 367.5
      positionAbsolute:
        x: 6649
        y: 367.5
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        answer: 'æ‰¿çŸ¥ã„ãŸã—ã¾ã—ãŸã€‚ãŠè©±ã‚’ã¾ã¨ã‚ã•ã›ã¦ã„ãŸã ãã¾ã™ã­ã€‚


          {{#17555816082210.structured_output.must_have_skills#}}ãªã©ã®ã‚¹ã‚­ãƒ«ã‚’æŒã¡ã€{{#17555816082210.structured_output.should_have_roles#}}ã®ã”çµŒé¨“ãŒã‚ã‚‹ã€{{#17555816082210.structured_output.needs#}}ã‚’æ¢ã—ã¦ã„ã‚‰ã£ã—ã‚ƒã‚‹ã®ã§ã™ã­ã€‚


          ãŸã ã„ã¾ã€ç§ã®ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã®ä¸­ã‹ã‚‰ã€ãã®ã”è¦æœ›ã«æœ€ã‚‚ãƒãƒƒãƒã™ã‚‹æ–¹ã‚’æ¢ã—å§‹ã‚ã¾ã™ã€‚æœ€é«˜ã®å‡ºä¼šã„ã‚’ãŠå±Šã‘ã§ãã‚‹ã‚ˆã†ã€å°‘ã—ãŠæ™‚é–“ã‚’ã„ãŸã ãã¾ã™ãŒã€ã©ã†ãæ¥½ã—ã¿ã«ãŠå¾…ã¡ãã ã•ã„ï¼âœ¨'
        desc: ''
        selected: false
        title: ãƒªã‚¯ã‚¨ã‚¹ãƒˆå—å–å®Œäº†å›ç­”
        type: answer
        variables: []
      height: 302
      id: '17555832835340'
      position:
        x: 8653
        y: 397.5
      positionAbsolute:
        x: 8653
        y: 397.5
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        context:
          enabled: false
          variable_selector: []
        desc: ''
        memory:
          query_prompt_template: '# ã‚ãªãŸãŒåˆ©ç”¨ã§ãã‚‹æƒ…å ±ï¼ˆã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆï¼‰

            - ç¾åœ¨ã®ãƒ¯ãƒ¼ã‚­ãƒ³ã‚°ãƒ¡ãƒ¢ãƒª: {{#conversation.memory#}}

            - ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æœ€æ–°ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸: {{#sys.query#}}'
          role_prefix:
            assistant: ''
            user: ''
          window:
            enabled: false
            size: 50
        model:
          completion_params:
            temperature: 0.7
          mode: chat
          name: gpt-4o
          provider: langgenius/openai/openai
        prompt_template:
        - id: 02249eb7-6bb4-4361-ab19-e1bbfa587f6f
          role: system
          text: '# ã‚ãªãŸã®å½¹å‰²ï¼ˆã‚¢ã‚¤ãƒ‡ãƒ³ãƒ†ã‚£ãƒ†ã‚£ï¼‰

            ã‚ãªãŸã¯ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æœ€åˆã®ç™ºè¨€ã‚’åˆ†æã—ã€ãã®å¯¾è©±ã®ç›®çš„ã‚„æ„å›³ã‚’ç¬æ™‚ã«è¦‹æŠœãã€é«˜åº¦ãªè‡ªç„¶è¨€èªç†è§£ï¼ˆNLUï¼‰ã‚¨ãƒ³ã‚¸ãƒ³ã§ã™ã€‚ã‚ãªãŸã®ä»•äº‹ã¯ã€å¾Œç¶šã®AIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãŒæœ€é©ãªå¿œç­”æˆ¦ç•¥ã‚’é¸æŠã§ãã‚‹ã‚ˆã†ã€æœ€åˆã®å…¥åŠ›ã‚’çš„ç¢ºã«åˆ†é¡ã™ã‚‹ã“ã¨ã§ã™ã€‚'
        - id: 84964e32-1c7a-47df-b231-3597464fe44a
          role: user
          text: "# ã‚ãªãŸã®å³å¯†ãªã‚¿ã‚¹ã‚¯\nã‚ãªãŸã®å”¯ä¸€ã®ã‚¿ã‚¹ã‚¯ã¯ã€ä»¥ä¸‹ã®ãƒ«ãƒ¼ãƒ«ã«**å³å¯†ã«**å¾“ã£ã¦ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æ„å›³ã‚’åˆ¤æ–­ã™ã‚‹ã“ã¨ã§ã™ã€‚ã‚ãªãŸã®å‡ºåŠ›ã¯ã€ã€Œintentã€ã¨ã€Œsummaryã€ã®2ã¤ã®ã‚­ãƒ¼ã‚’æŒã¤JSONã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã§ãªã‘ã‚Œã°ãªã‚Šã¾ã›ã‚“ã€‚\n\
            \n## æ€è€ƒã®ã‚¹ãƒ†ãƒƒãƒ—\n1.  **ãƒ¡ãƒ¢ãƒªã‚’ç¢ºèªã™ã‚‹:** ã¾ãšã€ãƒ¯ãƒ¼ã‚­ãƒ³ã‚°ãƒ¡ãƒ¢ãƒªã«`profile.static_info.name`ãŒå­˜åœ¨ã™ã‚‹ã‹ã©ã†ã‹ã‚’ç¢ºèªã—ã¾ã™ã€‚\n\
            \    - **ã‚‚ã—åå‰ãŒæ—¢ã«å­˜åœ¨ã™ã‚‹å ´åˆ:** ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯è‡ªå·±ç´¹ä»‹æ¸ˆã¿ã§ã™ã€‚å¾Œç¶šã®ãƒ«ãƒ¼ãƒ«ã«å¾“ã„ã€`intent`ã‚’`CONCRETE_INTRODUCTION`ã‹`AMBIGUOUS_CONSULTATION`ã«åˆ†é¡ã—ã¦ãã ã•ã„ã€‚\n\
            \    - **ã‚‚ã—åå‰ãŒã¾ã å­˜åœ¨ã—ãªã„å ´åˆ:** ã“ã‚ŒãŒæœ€åˆã®æœ¬æ ¼çš„ãªå¯¾è©±ã§ã™ã€‚æ¬¡ã®ãƒ«ãƒ¼ãƒ«ã«é€²ã‚“ã§ãã ã•ã„ã€‚\n\n2.  **ã€æœ€å„ªå…ˆã€‘å…·ä½“çš„ãªæƒ…å ±ãŒå«ã¾ã‚Œã¦ã„ã‚‹ã‹ï¼Ÿ**\
            \ ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æœ€æ–°ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã«ã€**åå‰ã€ä¼šç¤¾åã€å½¹è·ã€å…·ä½“çš„ãªç›®æ¨™ï¼ˆã€Œã€‡ã€‡ã—ãŸã„ã€ï¼‰**ã¨ã„ã£ãŸã€ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒªãƒ³ã‚°ã«ç›´æ¥ä½¿ãˆã‚‹å…·ä½“çš„ãªæƒ…å ±ãŒ**ä¸€ã¤ã§ã‚‚å«ã¾ã‚Œã¦ã„ã‚‹ã‹**ã‚’æœ€å„ªå…ˆã§ç¢ºèªã—ã¾ã™ã€‚\n\
            \    - **ã‚‚ã—å«ã¾ã‚Œã¦ã„ã‚‹å ´åˆ:** `intent`ã¯å¿…ãš`CONCRETE_INTRODUCTION`ã«ãªã‚Šã¾ã™ã€‚\n    -\
            \ **ã‚‚ã—å«ã¾ã‚Œã¦ã„ãªã„å ´åˆ:** æ¬¡ã®ãƒ«ãƒ¼ãƒ«ã«é€²ã‚“ã§ãã ã•ã„ã€‚\n\n3.  **ã€æ¬¡ã«ã€‘æ¼ ç„¶ã¨ã—ãŸç›¸è«‡ã‹ï¼Ÿ** ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒã€ã€Œæ‚©ã‚“ã§ã„ã‚‹ã€ã€Œã©ã†ã™ã‚Œã°ã„ã„ã‹ã€ã¨ã„ã£ãŸã€æ„Ÿæƒ…ã‚„çŠ¶æ…‹ã«é–¢ã™ã‚‹æƒ…å ±ãŒä¸­å¿ƒã‹ã‚’ç¢ºèªã—ã¾ã™ã€‚\n\
            \    - **ã‚‚ã—ãã†ã§ã‚ã‚Œã°:** `intent`ã¯`AMBIGUOUS_CONSULTATION`ã«ãªã‚Šã¾ã™ã€‚\n\n4.  **ã€æœ€å¾Œã«ã€‘ãã‚Œä»¥å¤–ã®å ´åˆ:**\
            \ ä¸Šè¨˜ã®ã„ãšã‚Œã«ã‚‚å½“ã¦ã¯ã¾ã‚‰ãªã„ã€æŒ¨æ‹¶ã‚„ç›¸æ§Œã®ã¿ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®å ´åˆã€`intent`ã¯`NEED_TO_ASK_NAME`ã«ã—ã¦ãã ã•ã„ã€‚\n\
            \n## summaryã®ãƒ«ãƒ¼ãƒ«\n- ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ç™ºè¨€ã®è¦ç‚¹ã‚’ã€20æ–‡å­—ä»¥å†…ã§ç°¡æ½”ã«è¦ç´„ã—ã¦ãã ã•ã„ã€‚"
        - id: 28b7d853-f77f-45d1-a74e-bcab51a75d09
          role: assistant
          text: '# åˆ¤æ–­ã®å…·ä½“ä¾‹


            ## ã€å…·ä½“çš„ãªæƒ…å ±ã‚ã‚Š â†’ CONCRETE_INTRODUCTIONã€‘

            ### ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸: ã€Œã“ã‚“ã«ã¡ã¯ã€ä½è—¤çœŸç†å­ã§ã™ã€‚ã€

            { "intent": "CONCRETE_INTRODUCTION", "summary": "ä½è—¤çœŸç†å­ã¨è‡ªå·±ç´¹ä»‹" }

            ### ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸: ã€Œæ ªå¼ä¼šç¤¾ãƒ—ãƒ¬ãƒ¼ãƒªãƒ¼ã§åƒã„ã¦ã„ã¾ã™ã€‚ã€

            { "intent": "CONCRETE_INTRODUCTION", "summary": "æ ªå¼ä¼šç¤¾ãƒ—ãƒ¬ãƒ¼ãƒªãƒ¼å‹¤å‹™" }


            ---


            ## ã€æ¼ ç„¶ã¨ã—ãŸç›¸è«‡ â†’ AMBIGUOUS_CONSULTATIONã€‘

            ### ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸: ã€Œã‚­ãƒ£ãƒªã‚¢ã«æ‚©ã‚“ã§ã„ã¦â€¦ã€

            { "intent": "AMBIGUOUS_CONSULTATION", "summary": "ã‚­ãƒ£ãƒªã‚¢ã«é–¢ã™ã‚‹æ¼ ç„¶ã¨ã—ãŸæ‚©ã¿" }


            ---


            ## ã€ä¸Šè¨˜ä»¥å¤– â†’ NEED_TO_ASK_NAMEã€‘

            ### ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸: ã€Œã‚ˆã‚ã—ããŠé¡˜ã„ã—ã¾ã™ã€‚ã€

            { "intent": "NEED_TO_ASK_NAME", "summary": "æŒ¨æ‹¶ã®ã¿" }'
        selected: false
        structured_output:
          schema:
            properties:
              intent:
                description: ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®å…¥åŠ›ã®æ„å›³ã€‚
                enum:
                - CONCRETE_INTRODUCTION
                - AMBIGUOUS_CONSULTATION
                - NEED_TO_ASK_NAME
                type: string
              summary:
                description: ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®å…¥åŠ›ã®ç°¡æ½”ãªè¦ç´„ã€‚
                type: string
            required:
            - intent
            - summary
            type: object
        structured_output_enabled: true
        title: 0. åˆæœŸæ„å›³åˆ†æ
        type: llm
        variables: []
        vision:
          enabled: false
      height: 90
      id: '1755583954150'
      position:
        x: 789
        y: 1996.5
      positionAbsolute:
        x: 789
        y: 1996.5
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        cases:
        - case_id: 19e220aa-d4b8-4c18-a8be-0d8d897de6a4
          conditions:
          - comparison_operator: is
            id: 374d3bdd-db83-48ee-8f99-38ea9c13e4ff
            value: NEED_TO_ASK_NAME
            varType: object
            variable_selector:
            - '1755583954150'
            - structured_output
            - intent
          id: 19e220aa-d4b8-4c18-a8be-0d8d897de6a4
          logical_operator: and
        - case_id: 'true'
          conditions:
          - comparison_operator: is
            id: b10eeaae-ebab-4cd0-9289-9d1f585a9628
            value: AMBIGUOUS_CONSULTATION
            varType: object
            variable_selector:
            - '1755583954150'
            - structured_output
            - intent
          id: 'true'
          logical_operator: and
        desc: ''
        selected: false
        title: å¤§åˆ†å²
        type: if-else
      height: 174
      id: '1755584117347'
      position:
        x: 1123
        y: 1996.5
      positionAbsolute:
        x: 1123
        y: 1996.5
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        context:
          enabled: false
          variable_selector: []
        desc: ''
        memory:
          query_prompt_template: '# ã‚ãªãŸãŒåˆ©ç”¨ã§ãã‚‹æƒ…å ±ï¼ˆã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆï¼‰

            - ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æœ€æ–°ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸: {{#sys.query#}}

            - ç¾åœ¨ã®ãƒ¯ãƒ¼ã‚­ãƒ³ã‚°ãƒ¡ãƒ¢ãƒª: {{#conversation.memory#}}

            - ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æœ€åˆã®ç™ºè¨€ã®è¦ç´„:{{#1755583954150.structured_output.summary#}}'
          role_prefix:
            assistant: ''
            user: ''
          window:
            enabled: false
            size: 50
        model:
          completion_params:
            temperature: 0.7
          mode: chat
          name: gpt-4o
          provider: langgenius/openai/openai
        prompt_template:
        - id: a26e6c2c-ab14-49f5-a1d5-b6cbab08d809
          role: system
          text: '# ã‚ãªãŸã®å½¹å‰²ï¼ˆã‚¢ã‚¤ãƒ‡ãƒ³ãƒ†ã‚£ãƒ†ã‚£ï¼‰

            ã‚ãªãŸã¯ã€ç›¸æ‰‹ã®å¿ƒã®æ‰‰ã‚’å„ªã—ãé–‹ãã®ãŒå¾—æ„ãªã€çµŒé¨“è±Šå¯Œãªã‚³ãƒ¼ãƒãƒ³ã‚°ãƒ»ã‚«ã‚¦ãƒ³ã‚»ãƒ©ãƒ¼ã§ã™ã€‚ã‚ãªãŸã®ä»•äº‹ã¯ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒæŠ±ãˆã‚‹æ¼ ç„¶ã¨ã—ãŸä¸å®‰ã‚„æ‚©ã¿ã«æ·±ãå…±æ„Ÿã—ã€ãã‚ŒãŒãƒã‚¬ãƒ†ã‚£ãƒ–ãªã‚‚ã®ã§ã¯ãªãã€ç´ æ™´ã‚‰ã—ã„ã€Œæ¢æ±‚ã®å§‹ã¾ã‚Šã€ã§ã‚ã‚‹ã¨æ°—ã¥ã‹ã›ã‚‹ã“ã¨ã§ã™ã€‚ã‚ãªãŸã®ä»•äº‹ã¯ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æœ€åˆã®ç™ºè¨€ã‹ã‚‰ã€æ¬¡ã«è¡Œã†ã¹ãå¯¾è©±ã®ã€Œè¨­è¨ˆå›³ã€ã‚’ç¬æ™‚ã«ç”Ÿæˆã™ã‚‹ã“ã¨ã§ã™ã€‚'
        - id: 6b43c29a-7dd8-405c-b57f-15b385548cdf
          role: user
          text: "# ã‚ãªãŸã®å³å¯†ãªã‚¿ã‚¹ã‚¯\nã‚ãªãŸã®å”¯ä¸€ã®ã‚¿ã‚¹ã‚¯ã¯ã€ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã‚’åˆ†æã—ã€**ã€Œå…±æ„Ÿãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã€ã€Œæ¢æ±‚ã®ãŸã‚ã®è³ªå•ã€ã€Œå½¹å‰²ã®ææ¡ˆã€**ã¨ã„ã†3ã¤ã®è¦ç´ ã‚’ã™ã¹ã¦å«ã‚“ã ã€æ§‹é€ åŒ–ã•ã‚ŒãŸJSONã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’å‡ºåŠ›ã™ã‚‹ã“ã¨ã§ã™ã€‚\n\
            \n## å„è¦ç´ ã®ç”Ÿæˆãƒ«ãƒ¼ãƒ«\n1.  **`empathy_message` (å…±æ„Ÿãƒ¡ãƒƒã‚»ãƒ¼ã‚¸):**\n    - ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æ‚©ã¿ã‚’è‚¯å®šã—ã€ã€Œç´ æ™´ã‚‰ã—ã„æ¢æ±‚ã®å§‹ã¾ã‚Šã§ã™ã­ã€ã®ã‚ˆã†ã«ãƒã‚¸ãƒ†ã‚£ãƒ–ã«å†å®šç¾©ï¼ˆãƒªãƒ•ãƒ¬ãƒ¼ãƒŸãƒ³ã‚°ï¼‰ã™ã‚‹ã€çŸ­ãæ¸©ã‹ã„ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ç”Ÿæˆã—ã¦ãã ã•ã„ã€‚\n\
            \n2.  **`exploration_question` (æ¢æ±‚ã®ãŸã‚ã®è³ªå•):**\n    - ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒç¾å®Ÿçš„ãªåˆ¶ç´„ã‚’å¿˜ã‚Œã€è‡ªç”±ãªç™ºæƒ³ãŒã§ãã‚‹ã‚ˆã†ãªã€ãƒ‘ãƒ¯ãƒ•ãƒ«ãªã‚ªãƒ¼ãƒ—ãƒ³ã‚¯ã‚¨ã‚¹ãƒãƒ§ãƒ³ã‚’ç”Ÿæˆã—ã¦ãã ã•ã„ã€‚ï¼ˆä¾‹ï¼šã€Œã‚‚ã—ã€ä½•ã®åˆ¶ç´„ã‚‚ãªã‹ã£ãŸã¨ã—ãŸã‚‰â€¦ã€ï¼‰\n\
            \n3.  **`role_suggestion` (å½¹å‰²ã®ææ¡ˆ):**\n    - ä¸Šè¨˜ã®è³ªå•ã¸ã®å¿œç­”ã‚’é€šã˜ã¦ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æ€è€ƒã‚’æ•´ç†ã™ã‚‹æ‰‹ä¼ã„ã‚’ã—ãŸã„ã€ã¨ã„ã†æ„å›³ã‚’ä¼ãˆã¦ãã ã•ã„ã€‚\n\
            \    - ã€Œãã®ç­”ãˆã‚’ä¸€ç·’ã«è¦‹ã¤ã‘ã‚‹ã€æ€è€ƒã®å£æ‰“ã¡ç›¸æ‰‹ã€ã¨ã—ã¦â€¦ã€ã®ã‚ˆã†ã«ã€AIè‡ªèº«ã®å…·ä½“çš„ãªå½¹å‰²ã‚’æç¤ºã—ã¦ãã ã•ã„ã€‚"
        - id: 9201058e-fd44-4be1-a4fb-ad6cb9eead06
          role: assistant
          text: "{\n  \"empathy_message\": \"ãŠè©±ã—ã„ãŸã ãã€ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ã€‚ã”è‡ªèº«ã®ã‚­ãƒ£ãƒªã‚¢ã«ã¤ã„ã¦æ·±ãè€ƒãˆã‚‹ã€ãã®ç´ æ™´ã‚‰ã—ã„æ¢æ±‚ã®æ—…ãŒã€ä»Šã¾ã•ã«å§‹ã¾ã‚ã†ã¨ã—ã¦ã„ã‚‹ã®ã§ã™ã­ã€‚\"\
            ,\n  \"exploration_question\": \"ã‚‚ã—ã€ãŠé‡‘ã‚„æ™‚é–“ã€ä»–äººã®è©•ä¾¡ã¨ã„ã£ãŸã€ã‚ã‚‰ã‚†ã‚‹åˆ¶ç´„ãŒãªã‹ã£ãŸã¨ã—ãŸã‚‰ã€ä»Šã€ã‚ãªãŸã®å¿ƒãŒæœ€ã‚‚æƒ¹ã‹ã‚Œã‚‹ã®ã¯ã©ã®ã‚ˆã†ãªæŒ‘æˆ¦ã§ã™ã‹ï¼Ÿ\"\
            ,\n  \"role_suggestion\": \"ãã®ç­”ãˆã‚’ä¸€ç·’ã«è¦‹ã¤ã‘ã‚‹ãŸã‚ã®ã€Œæ€è€ƒã®å£æ‰“ã¡ç›¸æ‰‹ã€ã¨ã—ã¦ã€ã¾ãšã¯ãŠæ‰‹ä¼ã„ã•ã›ã¦ã„ãŸã ã‘ãªã„ã§ã—ã‚‡ã†ã‹ã€‚\"\
            \n}"
        selected: false
        structured_output:
          schema:
            properties:
              empathy_message:
                description: ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¸ã®å…±æ„Ÿã‚’ç¤ºã™ã€æ¸©ã‹ã„ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã€‚
                type: string
              exploration_question:
                description: ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®å†…é¢ã‚’æ¢ã‚‹ãŸã‚ã®ã€ã‚ªãƒ¼ãƒ—ãƒ³ãªè³ªå•ã€‚
                type: string
              role_suggestion:
                description: AIãŒæ‹…ã†å½¹å‰²ã®ææ¡ˆã¨ã€æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—ã¸ã®èª˜ã„ã€‚
                type: string
            required:
            - empathy_message
            - exploration_question
            - role_suggestion
            type: object
        structured_output_enabled: true
        title: P0-1. å…±æ„Ÿã¨å†å®šç¾©
        type: llm
        variables: []
        vision:
          enabled: false
      height: 90
      id: '1755584864069'
      position:
        x: 1882
        y: 1866.5
      positionAbsolute:
        x: 1882
        y: 1866.5
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        answer: '{{#1755584864069.structured_output.empathy_message#}}


          {{#1755584864069.structured_output.exploration_question#}}


          {{#1755584864069.structured_output.role_suggestion#}}


          ã‚‚ã—ã‚ˆã‚ã—ã‘ã‚Œã°ã€ã¾ãšã¯ã“ã®è³ªå•ã«å¯¾ã™ã‚‹ã‚ãªãŸã®è€ƒãˆã‚’ã€è‡ªç”±ã«ãŠèã‹ã›ãã ã•ã„ã€‚'
        desc: ''
        selected: false
        title: P0-2. å¿œç­”ã¨åˆæ„å½¢æˆ
        type: answer
        variables: []
      height: 190
      id: '1755585672345'
      position:
        x: 2216
        y: 1859
      positionAbsolute:
        x: 2216
        y: 1859
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        context:
          enabled: false
          variable_selector: []
        desc: ''
        model:
          completion_params:
            temperature: 0.7
          mode: chat
          name: gpt-4o
          provider: langgenius/openai/openai
        prompt_template:
        - id: 871141db-3846-47e3-8f43-9fa682066513
          role: system
          text: 'ã‚ãªãŸã¯ã€ç›¸æ‰‹ã®å¤¢ã‚„ç›®æ¨™ã«å…±æ„Ÿã‚’ç¤ºã—ã¤ã¤ã€è‡ªç„¶ãªæµã‚Œã§è‡ªå·±ç´¹ä»‹ã‚’ä¿ƒã™ã“ã¨ãŒã§ãã‚‹ã€ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®é”äººã§ã™ã€‚

            '
        - id: 79017565-b859-4e23-a4e2-3bc855e78dfc
          role: user
          text: '# ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆ

            - ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒèªã£ã¦ãã‚ŒãŸå¤¢ã‚„ç›®æ¨™: {{#sys.query#}}


            # ã‚ãªãŸã®ã‚¿ã‚¹ã‚¯

            ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒèªã£ã¦ãã‚ŒãŸå¤¢ã‚’è‚¯å®šçš„ã«å—ã‘æ­¢ã‚ãŸä¸Šã§ã€ã€Œãã®ç´ æ™´ã‚‰ã—ã„ãŠè©±ã‚’ã‚‚ã£ã¨ä¼ºã†ãŸã‚ã«ã€ã¾ãšã‚ãªãŸã®ãŠåå‰ã‚’æ•™ãˆã¦ã„ãŸã ã‘ã¾ã™ã‹ï¼Ÿã€ã¨ã„ã†ã€ä¸å¯§ã§è‡ªç„¶ãªè³ªå•ã‚’ç”Ÿæˆã—ã¦ãã ã•ã„ã€‚å‡ºåŠ›ã¯è³ªå•æ–‡ãã®ã‚‚ã®ã ã‘ã«ã—ã¦ãã ã•ã„ã€‚


            # å‡ºåŠ›ä¾‹

            ç´ æ™´ã‚‰ã—ã„å¤¢ã§ã™ã­ï¼åœ°å…ƒã§æ¡ã‚ŒãŸé£Ÿæã‚’ä½¿ã£ãŸã‚«ãƒ•ã‚§ã€æƒ³åƒã™ã‚‹ã ã‘ã§æ¸©ã‹ã„æ°—æŒã¡ã«ãªã‚Šã¾ã™ã€‚


            ãã®ç´ æ•µãªãŠè©±ã€ãœã²ã‚‚ã£ã¨æ·±ããŠä¼ºã„ã—ãŸã„ã§ã™ã€‚ã‚‚ã—ã‚ˆã‚ã—ã‘ã‚Œã°ã€ã¾ãšã€ã‚ãªãŸã®ãŠåå‰ã‹ã‚‰æ•™ãˆã¦ã„ãŸã ã‘ã¾ã™ã§ã—ã‚‡ã†ã‹ï¼Ÿ'
        selected: false
        title: åå‰ã‚’å°‹ã­ã‚‹è³ªå•ç”Ÿæˆ
        type: llm
        variables: []
        vision:
          enabled: false
      height: 90
      id: '1755587098480'
      position:
        x: 5981
        y: 1678
      positionAbsolute:
        x: 5981
        y: 1678
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        answer: '{{#1755587098480.text#}}'
        desc: ''
        selected: false
        title: åå‰ã‚’å°‹ã­ã‚‹è³ªå•
        type: answer
        variables: []
      height: 105
      id: '1755587184420'
      position:
        x: 6315
        y: 1638
      positionAbsolute:
        x: 6315
        y: 1638
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        context:
          enabled: false
          variable_selector: []
        desc: ''
        memory:
          query_prompt_template: "# ã‚ãªãŸãŒåˆ©ç”¨ã§ãã‚‹æƒ…å ±ï¼ˆã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆï¼‰\n- ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æœ€æ–°ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸: {{#sys.query#}}\n\
            - ã“ã‚ŒãŒã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‹ã‚‰å—ã‘å–ã£ãŸæœ€æ–°ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆæƒ…å ±ã§ã™ã€‚\n  - ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒªã‚¯ã‚¨ã‚¹ãƒˆ:  {{#1755599442832.requests_context#}}\n\
            - å‚è€ƒã¾ã§ã«ã€ã“ã‚ŒãŒãƒ¦ãƒ¼ã‚¶ãƒ¼è‡ªèº«ã®ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ã§ã™ã€‚\n  - ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«: {{#1755599442832.profile_context#}}"
          role_prefix:
            assistant: ''
            user: ''
          window:
            enabled: false
            size: 50
        model:
          completion_params:
            temperature: 0.7
          mode: chat
          name: gpt-4o
          provider: langgenius/openai/openai
        prompt_template:
        - id: 09ff833f-7074-4411-8b1e-54f2d7a140fc
          role: system
          text: '# ã‚ãªãŸã®å½¹å‰²ï¼ˆã‚¢ã‚¤ãƒ‡ãƒ³ãƒ†ã‚£ãƒ†ã‚£ï¼‰

            ã‚ãªãŸã¯ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆï¼ˆä¼šã„ãŸã„äººç‰©åƒï¼‰ã‚’åˆ†æã—ã€ãã®æƒ…å ±ãŒå…·ä½“çš„ã§ã€è¡Œå‹•å¯èƒ½ï¼ˆActionableï¼‰ãªãƒ¬ãƒ™ãƒ«ã«é”ã—ã¦ã„ã‚‹ã‹ã‚’è©•ä¾¡ã™ã‚‹ã€çµŒé¨“è±Šå¯Œãªãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚¢ãƒŠãƒªã‚¹ãƒˆã§ã™ã€‚ã‚ãªãŸã®è©•ä¾¡ãŒã€æ¬¡ã®å¯¾è©±ã®è³ªã‚’æ±ºå®šã—ã¾ã™ã€‚'
        - id: 4af57a25-021f-4eaf-9094-f8d859fc0fea
          role: user
          text: "# ã‚ãªãŸã®å³å¯†ãªã‚¿ã‚¹ã‚¯\nãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’æ³¨æ„æ·±ãåˆ†æã—ã€ä»¥ä¸‹ã®è©•ä¾¡åŸºæº–ã«åŸºã¥ã„ã¦ã€Œå®Œæˆåº¦ã€ã‚’åˆ¤æ–­ã—ã¦ãã ã•ã„ã€‚ã‚ãªãŸã®å‡ºåŠ›ã¯ã€ã€Œstatusã€ã¨ã€Œreasoningã€ã®2ã¤ã®ã‚­ãƒ¼ã‚’æŒã¤JSONã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã§ãªã‘ã‚Œã°ãªã‚Šã¾ã›ã‚“ã€‚\n\
            \n## è©•ä¾¡åŸºæº–\n- **`REQUEST_COMPLETE`**: ä»¥ä¸‹ã®é …ç›®ãŒã€ã™ã¹ã¦å…·ä½“çš„ã§æ˜ç¢ºãªè¨€è‘‰ã§è¡¨ç¾ã•ã‚Œã¦ã„ã‚‹å ´åˆã€‚\n\
            \    1.  **WHAT (ã‚¹ã‚­ãƒ«/å½¹å‰²):** ã©ã®ã‚ˆã†ãªã‚¹ã‚­ãƒ«ã€çµŒé¨“ã€å½¹å‰²ã‚’æŒã£ã¦ã„ã‚‹äººç‰©ã‹ (`must_have_skills`,\
            \ `should_have_roles`)ã€‚\n    2.  **WHY (ç›®çš„/èƒŒæ™¯):** ãªãœãã®äººç‰©ã«ä¼šã„ãŸã„ã®ã‹ã€‚ä¼šã£ã¦ä½•ã‚’é”æˆã—ãŸã„ã®ã‹\
            \ (`needs`)ã€‚\n    3.  **HOW (äººç‰©åƒ/ä¾¡å€¤è¦³):** ã©ã®ã‚ˆã†ãªä¾¡å€¤è¦³ã‚„äººé–“æ€§ã‚’æŒã£ã¦ã„ã‚‹ã¨ç†æƒ³çš„ã‹ (`qualitative_traits`)ã€‚\n\
            \n- **`NEED_MORE_DETAILS`**: ä¸Šè¨˜3ã¤ã®åŸºæº–ã®ã†ã¡ã€1ã¤ã§ã‚‚æ›–æ˜§ãªç‚¹ã‚„ä¸è¶³ã—ã¦ã„ã‚‹æƒ…å ±ãŒã‚ã‚‹å ´åˆã€‚\n\n##\
            \ reasoningã®ãƒ«ãƒ¼ãƒ«\n- `status`ãŒ`NEED_MORE_DETAILS`ã®å ´åˆã€**å…·ä½“çš„ã«ã©ã®é …ç›®ï¼ˆWHAT, WHY,\
            \ HOWï¼‰ã«ã¤ã„ã¦ã€ã©ã®ã‚ˆã†ãªæƒ…å ±ãŒä¸è¶³ã—ã¦ã„ã‚‹ã®ã‹**ã‚’ç°¡æ½”ã«è¨˜è¿°ã—ã¦ãã ã•ã„ã€‚ã“ã‚ŒãŒã€æ¬¡ã®æ·±æ˜ã‚Šè³ªå•ã‚’ç”Ÿæˆã™ã‚‹ãŸã‚ã®é‡è¦ãªãƒ’ãƒ³ãƒˆã«ãªã‚Šã¾ã™ã€‚"
        - id: 8c83f934-24bf-43f9-bdeb-4be3ab4f4fcd
          role: assistant
          text: "{\n  \"status\": \"NEED_MORE_DETAILS\",\n  \"reasoning\": \"WHYï¼ˆç›®çš„ï¼‰ãŒã¾ã å°‘ã—æ›–æ˜§ã€‚ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯ã€æŠ€è¡“çš„ãªå£æ‰“ã¡ç›¸æ‰‹ã€ã‚’æ±‚ã‚ã¦ã„ã‚‹ãŒã€ãã®å£æ‰“ã¡ã‚’é€šã˜ã¦ã€å…·ä½“çš„ã«ã©ã®ã‚ˆã†ãªèª²é¡Œã‚’è§£æ±ºã—ãŸã„ã®ã‹ã€ã©ã®ã‚ˆã†ãªæ„æ€æ±ºå®šã‚’ã—ãŸã„ã®ã‹ãŒä¸æ˜ç¢ºã€‚\"\
            \n}"
        selected: false
        structured_output:
          schema:
            properties:
              reasoning:
                description: ãã®ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã¨åˆ¤æ–­ã—ãŸç†ç”±ã€‚ç‰¹ã«ã€ä½•ãŒä¸è¶³ã—ã¦ã„ã‚‹ã‹ã®å…·ä½“çš„ãªèª¬æ˜ã€‚
                type: string
              status:
                description: ãƒªã‚¯ã‚¨ã‚¹ãƒˆã®å®Œæˆåº¦ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã€‚
                enum:
                - REQUEST_COMPLETE
                - NEED_MORE_DETAILS
                type: string
            required:
            - status
            - reasoning
            type: object
        structured_output_enabled: true
        title: 1a. ãƒªã‚¯ã‚¨ã‚¹ãƒˆå®Œæˆåº¦ãƒã‚§ãƒƒã‚¯
        type: llm
        variables: []
        vision:
          enabled: false
      height: 90
      id: '1755598782790'
      position:
        x: 7317
        y: 367.5
      positionAbsolute:
        x: 7317
        y: 367.5
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        context:
          enabled: false
          variable_selector: []
        desc: ''
        memory:
          query_prompt_template: "{{#sys.query#}}\n\n# ã‚ãªãŸãŒåˆ©ç”¨ã§ãã‚‹æƒ…å ±ï¼ˆã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆï¼‰\n- ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æœ€æ–°ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸:\
            \ {{#sys.query#}}\n- ã“ã‚ŒãŒã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‹ã‚‰å—ã‘å–ã£ãŸæœ€æ–°ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆæƒ…å ±ã§ã™ã€‚\n  - ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒªã‚¯ã‚¨ã‚¹ãƒˆ:  {{#17555996655750.requests_context#}}\n\
            - å‚è€ƒã¾ã§ã«ã€ã“ã‚ŒãŒãƒ¦ãƒ¼ã‚¶ãƒ¼è‡ªèº«ã®ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ã§ã™ã€‚\n  - ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«: {{#17555996655750.profile_context#}}"
          role_prefix:
            assistant: ''
            user: ''
          window:
            enabled: false
            size: 50
        model:
          completion_params:
            temperature: 0.7
          mode: chat
          name: gpt-4o
          provider: langgenius/openai/openai
        prompt_template:
        - id: 09ff833f-7074-4411-8b1e-54f2d7a140fc
          role: system
          text: '# ã‚ãªãŸã®å½¹å‰²ï¼ˆã‚¢ã‚¤ãƒ‡ãƒ³ãƒ†ã‚£ãƒ†ã‚£ï¼‰

            ã‚ãªãŸã¯ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆï¼ˆä¼šã„ãŸã„äººç‰©åƒï¼‰ã‚’åˆ†æã—ã€ãã®æƒ…å ±ãŒå…·ä½“çš„ã§ã€è¡Œå‹•å¯èƒ½ï¼ˆActionableï¼‰ãªãƒ¬ãƒ™ãƒ«ã«é”ã—ã¦ã„ã‚‹ã‹ã‚’è©•ä¾¡ã™ã‚‹ã€çµŒé¨“è±Šå¯Œãªãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚¢ãƒŠãƒªã‚¹ãƒˆã§ã™ã€‚ã‚ãªãŸã®è©•ä¾¡ãŒã€æ¬¡ã®å¯¾è©±ã®è³ªã‚’æ±ºå®šã—ã¾ã™ã€‚'
        - id: 4af57a25-021f-4eaf-9094-f8d859fc0fea
          role: user
          text: "# ã‚ãªãŸã®å³å¯†ãªã‚¿ã‚¹ã‚¯\nãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’æ³¨æ„æ·±ãåˆ†æã—ã€ä»¥ä¸‹ã®è©•ä¾¡åŸºæº–ã«åŸºã¥ã„ã¦ã€Œå®Œæˆåº¦ã€ã‚’åˆ¤æ–­ã—ã¦ãã ã•ã„ã€‚ã‚ãªãŸã®å‡ºåŠ›ã¯ã€ã€Œstatusã€ã¨ã€Œreasoningã€ã®2ã¤ã®ã‚­ãƒ¼ã‚’æŒã¤JSONã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã§ãªã‘ã‚Œã°ãªã‚Šã¾ã›ã‚“ã€‚\n\
            \n## è©•ä¾¡åŸºæº–\n- **`REQUEST_COMPLETE`**: ä»¥ä¸‹ã®é …ç›®ãŒã€ã™ã¹ã¦å…·ä½“çš„ã§æ˜ç¢ºãªè¨€è‘‰ã§è¡¨ç¾ã•ã‚Œã¦ã„ã‚‹å ´åˆã€‚\n\
            \    1.  **WHAT (ã‚¹ã‚­ãƒ«/å½¹å‰²):** ã©ã®ã‚ˆã†ãªã‚¹ã‚­ãƒ«ã€çµŒé¨“ã€å½¹å‰²ã‚’æŒã£ã¦ã„ã‚‹äººç‰©ã‹ (`must_have_skills`,\
            \ `should_have_roles`)ã€‚\n    2.  **WHY (ç›®çš„/èƒŒæ™¯):** ãªãœãã®äººç‰©ã«ä¼šã„ãŸã„ã®ã‹ã€‚ä¼šã£ã¦ä½•ã‚’é”æˆã—ãŸã„ã®ã‹\
            \ (`needs`)ã€‚\n    3.  **HOW (äººç‰©åƒ/ä¾¡å€¤è¦³):** ã©ã®ã‚ˆã†ãªä¾¡å€¤è¦³ã‚„äººé–“æ€§ã‚’æŒã£ã¦ã„ã‚‹ã¨ç†æƒ³çš„ã‹ (`qualitative_traits`)ã€‚\n\
            \n- **`NEED_MORE_DETAILS`**: ä¸Šè¨˜3ã¤ã®åŸºæº–ã®ã†ã¡ã€1ã¤ã§ã‚‚æ›–æ˜§ãªç‚¹ã‚„ä¸è¶³ã—ã¦ã„ã‚‹æƒ…å ±ãŒã‚ã‚‹å ´åˆã€‚\n\n##\
            \ reasoningã®ãƒ«ãƒ¼ãƒ«\n- `status`ãŒ`NEED_MORE_DETAILS`ã®å ´åˆã€**å…·ä½“çš„ã«ã©ã®é …ç›®ï¼ˆWHAT, WHY,\
            \ HOWï¼‰ã«ã¤ã„ã¦ã€ã©ã®ã‚ˆã†ãªæƒ…å ±ãŒä¸è¶³ã—ã¦ã„ã‚‹ã®ã‹**ã‚’ç°¡æ½”ã«è¨˜è¿°ã—ã¦ãã ã•ã„ã€‚ã“ã‚ŒãŒã€æ¬¡ã®æ·±æ˜ã‚Šè³ªå•ã‚’ç”Ÿæˆã™ã‚‹ãŸã‚ã®é‡è¦ãªãƒ’ãƒ³ãƒˆã«ãªã‚Šã¾ã™ã€‚"
        - id: 8c83f934-24bf-43f9-bdeb-4be3ab4f4fcd
          role: assistant
          text: "{\n  \"status\": \"NEED_MORE_DETAILS\",\n  \"reasoning\": \"WHYï¼ˆç›®çš„ï¼‰ãŒã¾ã å°‘ã—æ›–æ˜§ã€‚ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯ã€æŠ€è¡“çš„ãªå£æ‰“ã¡ç›¸æ‰‹ã€ã‚’æ±‚ã‚ã¦ã„ã‚‹ãŒã€ãã®å£æ‰“ã¡ã‚’é€šã˜ã¦ã€å…·ä½“çš„ã«ã©ã®ã‚ˆã†ãªèª²é¡Œã‚’è§£æ±ºã—ãŸã„ã®ã‹ã€ã©ã®ã‚ˆã†ãªæ„æ€æ±ºå®šã‚’ã—ãŸã„ã®ã‹ãŒä¸æ˜ç¢ºã€‚\"\
            \n}"
        selected: false
        structured_output:
          schema:
            properties:
              reasoning:
                description: ãã®ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã¨åˆ¤æ–­ã—ãŸç†ç”±ã€‚ç‰¹ã«ã€ä½•ãŒä¸è¶³ã—ã¦ã„ã‚‹ã‹ã®å…·ä½“çš„ãªèª¬æ˜ã€‚
                type: string
              status:
                description: ãƒªã‚¯ã‚¨ã‚¹ãƒˆã®å®Œæˆåº¦ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã€‚
                enum:
                - REQUEST_COMPLETE
                - NEED_MORE_DETAILS
                type: string
            required:
            - status
            - reasoning
            type: object
        structured_output_enabled: true
        title: 1a. ãƒªã‚¯ã‚¨ã‚¹ãƒˆå®Œæˆåº¦ãƒã‚§ãƒƒã‚¯ (1)
        type: llm
        variables: []
        vision:
          enabled: false
      height: 90
      id: '17555989086750'
      position:
        x: 6315
        y: 878.5
      positionAbsolute:
        x: 6315
        y: 878.5
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        cases:
        - case_id: 'true'
          conditions:
          - comparison_operator: is
            id: 61060d6c-a040-4d73-846e-e3f3ef2e75d1
            value: NEED_MORE_DETAILS
            varType: object
            variable_selector:
            - '17555989086750'
            - structured_output
            - status
          id: 'true'
          logical_operator: and
        desc: ''
        selected: false
        title: 1b. æ·±æ˜ã‚Šåˆ†å²
        type: if-else
      height: 126
      id: '1755599062653'
      position:
        x: 6649
        y: 876.5
      positionAbsolute:
        x: 6649
        y: 876.5
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        cases:
        - case_id: 'true'
          conditions:
          - comparison_operator: contains
            id: 61060d6c-a040-4d73-846e-e3f3ef2e75d1
            value: NEED_MORE_DETAILS
            varType: string
            variable_selector:
            - '1755598782790'
            - structured_output
            - status
          id: 'true'
          logical_operator: and
        desc: ''
        selected: false
        title: 1b. æ·±æ˜ã‚Šåˆ†å²
        type: if-else
      height: 126
      id: '17555991306140'
      position:
        x: 7651
        y: 367.5
      positionAbsolute:
        x: 7651
        y: 367.5
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        code: "import json\n\ndef main(memory: list) -> dict:\n    \"\"\"\n    Difyã®memoryå¤‰æ•°(Array[Object])ã‹ã‚‰ã€\n\
          \    profileã¨requestsã‚’æŠ½å‡ºã—ã€JSONæ–‡å­—åˆ—ã¨ã—ã¦å‡ºåŠ›ã™ã‚‹ã€‚\n    \"\"\"\n    try:\n      \
          \  # é…åˆ—ã®æœ€åˆã®è¦ç´ ã‚’å–å¾—\n        if isinstance(memory, list) and len(memory) >\
          \ 0:\n            memory_obj = memory[0]\n        else:\n            memory_obj\
          \ = {}\n\n        # å¿…è¦ãªæƒ…å ±ã‚’æŠ½å‡º\n        profile_str = json.dumps(memory_obj.get(\"\
          profile\", {}), ensure_ascii=False, indent=2)\n        requests_str = json.dumps(memory_obj.get(\"\
          requests\", {}), ensure_ascii=False, indent=2)\n\n        return {\n   \
          \         \"profile_context\": profile_str,\n            \"requests_context\"\
          : requests_str\n        }\n    except Exception as e:\n        return {\
          \ \"error\": str(e) }"
        code_language: python3
        desc: ''
        outputs:
          profile_context:
            children: null
            type: string
          requests_context:
            children: null
            type: string
        selected: false
        title: ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆæ•´å½¢ A
        type: code
        variables:
        - value_selector:
          - conversation
          - memory
          value_type: array[object]
          variable: memory
      height: 54
      id: '1755599442832'
      position:
        x: 6983
        y: 367.5
      positionAbsolute:
        x: 6983
        y: 367.5
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        code: "import json\n\ndef main(memory: list) -> dict:\n    \"\"\"\n    Difyã®memoryå¤‰æ•°(Array[Object])ã‹ã‚‰ã€\n\
          \    profileã¨requestsã‚’æŠ½å‡ºã—ã€JSONæ–‡å­—åˆ—ã¨ã—ã¦å‡ºåŠ›ã™ã‚‹ã€‚\n    \"\"\"\n    try:\n      \
          \  # é…åˆ—ã®æœ€åˆã®è¦ç´ ã‚’å–å¾—\n        if isinstance(memory, list) and len(memory) >\
          \ 0:\n            memory_obj = memory[0]\n        else:\n            memory_obj\
          \ = {}\n\n        # å¿…è¦ãªæƒ…å ±ã‚’æŠ½å‡º\n        profile_str = json.dumps(memory_obj.get(\"\
          profile\", {}), ensure_ascii=False, indent=2)\n        requests_str = json.dumps(memory_obj.get(\"\
          requests\", {}), ensure_ascii=False, indent=2)\n\n        return {\n   \
          \         \"profile_context\": profile_str,\n            \"requests_context\"\
          : requests_str\n        }\n    except Exception as e:\n        return {\
          \ \"error\": str(e) }"
        code_language: python3
        desc: ''
        outputs:
          profile_context:
            children: null
            type: string
          requests_context:
            children: null
            type: string
        selected: false
        title: ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆæ•´å½¢ B
        type: code
        variables:
        - value_selector:
          - conversation
          - memory
          value_type: array[object]
          variable: memory
      height: 54
      id: '17555996655750'
      position:
        x: 5981
        y: 929
      positionAbsolute:
        x: 5981
        y: 929
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        code: "import json\n\ndef main(memory: list) -> dict:\n    \"\"\"\n    Difyã®memoryå¤‰æ•°(Array[Object])ã‹ã‚‰ã€\n\
          \    profileã¨requestsã‚’æŠ½å‡ºã—ã€JSONæ–‡å­—åˆ—ã¨ã—ã¦å‡ºåŠ›ã™ã‚‹ã€‚\n    \"\"\"\n    try:\n      \
          \  # é…åˆ—ã®æœ€åˆã®è¦ç´ ã‚’å–å¾—\n        if isinstance(memory, list) and len(memory) >\
          \ 0:\n            memory_obj = memory[0]\n        else:\n            memory_obj\
          \ = {}\n\n        # å¿…è¦ãªæƒ…å ±ã‚’æŠ½å‡º\n        profile_str = json.dumps(memory_obj.get(\"\
          profile\", {}), ensure_ascii=False, indent=2)\n        requests_str = json.dumps(memory_obj.get(\"\
          requests\", {}), ensure_ascii=False, indent=2)\n\n        return {\n   \
          \         \"profile_context\": profile_str,\n            \"requests_context\"\
          : requests_str\n        }\n    except Exception as e:\n        return {\
          \ \"error\": str(e) }"
        code_language: python3
        desc: ''
        outputs:
          profile_context:
            children: null
            type: string
          requests_context:
            children: null
            type: string
        selected: false
        title: ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆæ•´å½¢
        type: code
        variables:
        - value_selector:
          - conversation
          - memory
          value_type: array[object]
          variable: memory
      height: 54
      id: '17555998217170'
      position:
        x: 3977
        y: 630
      positionAbsolute:
        x: 3977
        y: 630
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        code: "import json\n\ndef main(memory: list) -> dict:\n    \"\"\"\n    Difyã®memoryå¤‰æ•°(Array[Object])ã‹ã‚‰ã€\n\
          \    profileã¨requestsã‚’æŠ½å‡ºã—ã€JSONæ–‡å­—åˆ—ã¨ã—ã¦å‡ºåŠ›ã™ã‚‹ã€‚\n    \"\"\"\n    try:\n      \
          \  # é…åˆ—ã®æœ€åˆã®è¦ç´ ã‚’å–å¾—\n        if isinstance(memory, list) and len(memory) >\
          \ 0:\n            memory_obj = memory[0]\n        else:\n            memory_obj\
          \ = {}\n\n        # å¿…è¦ãªæƒ…å ±ã‚’æŠ½å‡º\n        profile_str = json.dumps(memory_obj.get(\"\
          profile\", {}), ensure_ascii=False, indent=2)\n        requests_str = json.dumps(memory_obj.get(\"\
          requests\", {}), ensure_ascii=False, indent=2)\n\n        return {\n   \
          \         \"profile_context\": profile_str,\n            \"requests_context\"\
          : requests_str\n        }\n    except Exception as e:\n        return {\
          \ \"error\": str(e) }"
        code_language: python3
        desc: ''
        outputs:
          profile_context:
            children: null
            type: string
          requests_context:
            children: null
            type: string
        selected: false
        title: ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆæ•´å½¢
        type: code
        variables:
        - value_selector:
          - conversation
          - memory
          value_type: array[object]
          variable: memory
      height: 54
      id: '17555998980340'
      position:
        x: 6315
        y: 528
      positionAbsolute:
        x: 6315
        y: 528
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        code: "import json\n\ndef main(memory: list) -> dict:\n    \"\"\"\n    Difyã®memoryå¤‰æ•°(Array[Object])ã‹ã‚‰ã€\n\
          \    profileã¨requestsã‚’æŠ½å‡ºã—ã€JSONæ–‡å­—åˆ—ã¨ã—ã¦å‡ºåŠ›ã™ã‚‹ã€‚\n    \"\"\"\n    try:\n      \
          \  # é…åˆ—ã®æœ€åˆã®è¦ç´ ã‚’å–å¾—\n        if isinstance(memory, list) and len(memory) >\
          \ 0:\n            memory_obj = memory[0]\n        else:\n            memory_obj\
          \ = {}\n\n        # å¿…è¦ãªæƒ…å ±ã‚’æŠ½å‡º\n        profile_str = json.dumps(memory_obj.get(\"\
          profile\", {}), ensure_ascii=False, indent=2)\n        requests_str = json.dumps(memory_obj.get(\"\
          requests\", {}), ensure_ascii=False, indent=2)\n\n        return {\n   \
          \         \"profile_context\": profile_str,\n            \"requests_context\"\
          : requests_str\n        }\n    except Exception as e:\n        return {\
          \ \"error\": str(e) }"
        code_language: python3
        desc: ''
        outputs:
          profile_context:
            children: null
            type: string
          requests_context:
            children: null
            type: string
        selected: false
        title: ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆæ•´å½¢ (1)
        type: code
        variables:
        - value_selector:
          - conversation
          - memory
          value_type: array[object]
          variable: memory
      height: 54
      id: '17556000000140'
      position:
        x: 6649
        y: 1080
      positionAbsolute:
        x: 6649
        y: 1080
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        code: "import json\n\ndef main(memory: list) -> dict:\n    \"\"\"\n    Difyã®memoryå¤‰æ•°(Array[Object])ã‹ã‚‰ã€\n\
          \    profileã¨requestsã‚’æŠ½å‡ºã—ã€JSONæ–‡å­—åˆ—ã¨ã—ã¦å‡ºåŠ›ã™ã‚‹ã€‚\n    \"\"\"\n    try:\n      \
          \  # é…åˆ—ã®æœ€åˆã®è¦ç´ ã‚’å–å¾—\n        if isinstance(memory, list) and len(memory) >\
          \ 0:\n            memory_obj = memory[0]\n        else:\n            memory_obj\
          \ = {}\n\n        # å¿…è¦ãªæƒ…å ±ã‚’æŠ½å‡º\n        profile_str = json.dumps(memory_obj.get(\"\
          profile\", {}), ensure_ascii=False, indent=2)\n        requests_str = json.dumps(memory_obj.get(\"\
          requests\", {}), ensure_ascii=False, indent=2)\n\n        return {\n   \
          \         \"profile_context\": profile_str,\n            \"requests_context\"\
          : requests_str\n        }\n    except Exception as e:\n        return {\
          \ \"error\": str(e) }"
        code_language: python3
        desc: ''
        outputs:
          profile_context:
            children: null
            type: string
          requests_context:
            children: null
            type: string
        selected: false
        title: ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆæ•´å½¢ (1)
        type: code
        variables:
        - value_selector:
          - conversation
          - memory
          value_type: array[object]
          variable: memory
      height: 54
      id: '17556000708650'
      position:
        x: 6983
        y: 1234
      positionAbsolute:
        x: 6983
        y: 1234
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        code: "import json\n\ndef main(memory: list) -> dict:\n    \"\"\"\n    Difyã®memoryå¤‰æ•°(Array[Object])ã‹ã‚‰ã€\n\
          \    profileã¨requestsã‚’æŠ½å‡ºã—ã€JSONæ–‡å­—åˆ—ã¨ã—ã¦å‡ºåŠ›ã™ã‚‹ã€‚\n    \"\"\"\n    try:\n      \
          \  # é…åˆ—ã®æœ€åˆã®è¦ç´ ã‚’å–å¾—\n        if isinstance(memory, list) and len(memory) >\
          \ 0:\n            memory_obj = memory[0]\n        else:\n            memory_obj\
          \ = {}\n\n        # å¿…è¦ãªæƒ…å ±ã‚’æŠ½å‡º\n        profile_str = json.dumps(memory_obj.get(\"\
          profile\", {}), ensure_ascii=False, indent=2)\n        requests_str = json.dumps(memory_obj.get(\"\
          requests\", {}), ensure_ascii=False, indent=2)\n\n        return {\n   \
          \         \"profile_context\": profile_str,\n            \"requests_context\"\
          : requests_str\n        }\n    except Exception as e:\n        return {\
          \ \"error\": str(e) }"
        code_language: python3
        desc: ''
        outputs:
          profile_context:
            children: null
            type: string
          requests_context:
            children: null
            type: string
        selected: false
        title: ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆæ•´å½¢ (1)
        type: code
        variables:
        - value_selector:
          - conversation
          - memory
          value_type: array[object]
          variable: memory
      height: 54
      id: '17556000775140'
      position:
        x: 7317
        y: 1422
      positionAbsolute:
        x: 7317
        y: 1422
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        context:
          enabled: false
          variable_selector: []
        desc: ''
        memory:
          query_prompt_template: '# ã‚ãªãŸãŒåˆ©ç”¨ã§ãã‚‹æƒ…å ±ï¼ˆã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆï¼‰

            - ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®å…¥åŠ›æƒ…å ±: {{#sys.query#}}

            - ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®åå‰ã‚„ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«æƒ…å ±: {{#conversation.memory#}}

            - ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ç¾åœ¨ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆå†…å®¹ï¼ˆJSONå½¢å¼ï¼‰: {{#1755599442832.requests_context#}}

            - ã“ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã«ä¸è¶³ã—ã¦ã„ã‚‹æƒ…å ±ã®åˆ†æçµæœï¼ˆã‚ãªãŸã®æ€è€ƒï¼‰: {{{#1755598782790.structured_output.reasoning#}}'
          role_prefix:
            assistant: ''
            user: ''
          window:
            enabled: false
            size: 50
        model:
          completion_params:
            temperature: 0.7
          mode: chat
          name: gpt-4o
          provider: langgenius/openai/openai
        prompt_template:
        - id: 368ccd6e-1aab-4d49-863b-d7186ed95891
          role: system
          text: '# ã‚ãªãŸã®å½¹å‰²ï¼ˆã‚¢ã‚¤ãƒ‡ãƒ³ãƒ†ã‚£ãƒ†ã‚£ï¼‰

            ã‚ãªãŸã¯ã€ç›¸æ‰‹ã®è¨€è‘‰ã®è£ã«ã‚ã‚‹çœŸã®ãƒ‹ãƒ¼ã‚ºã‚„ç›®çš„ã‚’å¼•ãå‡ºã™ã®ãŒå¾—æ„ãªã€è¶…ä¸€æµã®ã‚³ãƒ¼ãƒãƒ³ã‚°ãƒ»ã‚¤ãƒ³ã‚¿ãƒ“ãƒ¥ã‚¢ãƒ¼ã§ã™ã€‚ã‚ãªãŸã®è³ªå•ã¯ã€ç›¸æ‰‹ã«æ–°ãŸãªæ°—ã¥ãã‚’ä¸ãˆã€æ€è€ƒã‚’æ•´ç†ã•ã›ã¾ã™ã€‚'
        - id: 95535133-7d32-485a-81db-711a364926a1
          role: user
          text: '# ã‚ãªãŸã®å³å¯†ãªã‚¿ã‚¹ã‚¯

            ã‚ãªãŸã®å”¯ä¸€ã®ã‚¿ã‚¹ã‚¯ã¯ã€ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã‚’åˆ†æã—ã€**ãƒªã‚¯ã‚¨ã‚¹ãƒˆã«ä¸è¶³ã—ã¦ã„ã‚‹æƒ…å ±ï¼ˆreasoningï¼‰ã‚’è£œã†ãŸã‚ã®ã€æœ€ã‚‚çš„ç¢ºã§ã€ã‹ã¤æ¸©ã‹ã¿ã®ã‚ã‚‹æ·±æ˜ã‚Šè³ªå•ã‚’1ã¤ã ã‘**ç”Ÿæˆã™ã‚‹ã“ã¨ã§ã™ã€‚


            ## è³ªå•ç”Ÿæˆã®ãƒ«ãƒ¼ãƒ«

            1.  **è‚¯å®šã‹ã‚‰å§‹ã‚ã‚‹:** ã¾ãšã€ã€Œç´ æ™´ã‚‰ã—ã„ã§ã™ã­ã€ã€Œã‚ˆãè¦‹ãˆã¦ãã¾ã—ãŸã­ã€ã®ã‚ˆã†ã«ã€ç¾åœ¨ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆå†…å®¹ã‚’è‚¯å®šçš„ã«å—ã‘æ­¢ã‚ã¦ãã ã•ã„ã€‚

            2.  **æ€è€ƒãƒ—ãƒ­ã‚»ã‚¹ã‚’ç¿»è¨³ã™ã‚‹:** `reasoning`ã§ç¤ºã•ã‚Œã¦ã„ã‚‹ã€Œä¸è¶³ã—ã¦ã„ã‚‹ç‚¹ã€ã‚’ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«åˆ†ã‹ã‚Šã‚„ã™ã„ã€è‡ªç„¶ãªä¼šè©±è¨€è‘‰ã«ç¿»è¨³ã—ã¦è³ªå•ã—ã¦ãã ã•ã„ã€‚

            3.  **ç›¸æ‰‹ã®å¯èƒ½æ€§ã‚’å¼•ãå‡ºã™èãæ–¹:** ã€Œã‚‚ã—ã‚ˆã‚ã—ã‘ã‚Œã°â€¦ã€ã€Œä¾‹ãˆã°â€¦ã€ã¨ã„ã£ãŸã‚¯ãƒƒã‚·ãƒ§ãƒ³è¨€è‘‰ã‚’ä½¿ã„ã€ç›¸æ‰‹ãŒç­”ãˆã‚„ã™ã„ã‚ˆã†ã«é…æ…®ã—ã¦ãã ã•ã„ã€‚

            4.  å‡ºåŠ›ã¯ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«èªã‚Šã‹ã‘ã‚‹è³ªå•æ–‡ãã®ã‚‚ã®ã ã‘ã«ã—ã¦ãã ã•ã„ã€‚


            ## å¿œç­”ã®ãƒ‘ãƒ¼ã‚½ãƒŠãƒ©ã‚¤ã‚º

            - ã‚‚ã—ã€Œãƒ¦ãƒ¼ã‚¶ãƒ¼ã®åå‰ã€ãŒåˆ¤æ˜ã—ã¦ã„ã‚Œã°ã€å¿œç­”ã®å†’é ­ã§ã€Œã€‡ã€‡ã•ã‚“ã€ã€ã¨è‡ªç„¶ã«å‘¼ã³ã‹ã‘ã¦ãã ã•ã„ã€‚'
        - id: 4ed1e990-4159-4191-8f97-b1745788ea45
          role: assistant
          text: '# reasoningãŒã€ŒWHYï¼ˆç›®çš„ï¼‰ãŒä¸æ˜ç¢ºã€ã ã£ãŸå ´åˆã®å‡ºåŠ›ä¾‹


            ã€‡ã€‡ã•ã‚“ã€ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ã€‚ä¼šã„ãŸã„äººç‰©åƒãŒã€ã‹ãªã‚Šå…·ä½“çš„ã«ãªã£ã¦ãã¾ã—ãŸã­ï¼


            ã‚‚ã—ã‚ˆã‚ã—ã‘ã‚Œã°ã€ã‚‚ã†å°‘ã—ã ã‘æ·±ããŠä¼ºã„ã—ãŸã„ã®ã§ã™ãŒã€ãã®ã€ŒæŠ€è¡“çš„ãªå£æ‰“ã¡ç›¸æ‰‹ã€ã®æ–¹ã¨å‡ºä¼šã†ã“ã¨ã§ã€ã¿ã‚‰ã„ã•ã‚“ã”è‡ªèº«ã¯ã€æœ€çµ‚çš„ã«ã©ã®ã‚ˆã†ãªçŠ¶æ…‹ã«ãªã‚‹ã“ã¨ã‚’ç›®æŒ‡ã—ã¦ã„ã‚‰ã£ã—ã‚ƒã„ã¾ã™ã‹ï¼Ÿ

            ä¾‹ãˆã°ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«é–¢ã™ã‚‹ç‰¹å®šã®æ„æ€æ±ºå®šãŒã§ãã‚‹ã‚ˆã†ã«ãªã‚ŠãŸã„ã€ã¨ã„ã£ãŸç›®çš„ãŒã‚ã‚Œã°ã€ãœã²æ•™ãˆã¦ãã ã•ã„ã€‚'
        selected: false
        title: 1c. ãƒªã‚¯ã‚¨ã‚¹ãƒˆæ·±æ˜ã‚Šè³ªå•ç”Ÿæˆ
        type: llm
        variables: []
        vision:
          enabled: false
      height: 90
      id: '1755600212316'
      position:
        x: 8319
        y: 252.5
      positionAbsolute:
        x: 8319
        y: 252.5
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        answer: '{{#1755600212316.text#}}'
        desc: ''
        selected: false
        title: æ·±æ˜ã‚Šè³ªå•ç”Ÿæˆå›ç­”
        type: answer
        variables: []
      height: 105
      id: '1755600389924'
      position:
        x: 8653
        y: 252.5
      positionAbsolute:
        x: 8653
        y: 252.5
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        context:
          enabled: false
          variable_selector: []
        desc: ''
        memory:
          query_prompt_template: '# ã‚ãªãŸãŒåˆ©ç”¨ã§ãã‚‹æƒ…å ±ï¼ˆã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆï¼‰

            - ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®å…¥åŠ›æƒ…å ±: {{#sys.query#}}

            - ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®åå‰ã‚„ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«æƒ…å ±: {{#conversation.memory#}}

            - ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ç¾åœ¨ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆå†…å®¹ï¼ˆJSONå½¢å¼ï¼‰: {{#17555996655750.requests_context#}}

            - ã“ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã«ä¸è¶³ã—ã¦ã„ã‚‹æƒ…å ±ã®åˆ†æçµæœï¼ˆã‚ãªãŸã®æ€è€ƒï¼‰:  {{#17555989086750.structured_output.reasoning#}}'
          role_prefix:
            assistant: ''
            user: ''
          window:
            enabled: false
            size: 50
        model:
          completion_params:
            temperature: 0.7
          mode: chat
          name: gpt-4o
          provider: langgenius/openai/openai
        prompt_template:
        - id: 368ccd6e-1aab-4d49-863b-d7186ed95891
          role: system
          text: '# ã‚ãªãŸã®å½¹å‰²ï¼ˆã‚¢ã‚¤ãƒ‡ãƒ³ãƒ†ã‚£ãƒ†ã‚£ï¼‰

            ã‚ãªãŸã¯ã€ç›¸æ‰‹ã®è¨€è‘‰ã®è£ã«ã‚ã‚‹çœŸã®ãƒ‹ãƒ¼ã‚ºã‚„ç›®çš„ã‚’å¼•ãå‡ºã™ã®ãŒå¾—æ„ãªã€è¶…ä¸€æµã®ã‚³ãƒ¼ãƒãƒ³ã‚°ãƒ»ã‚¤ãƒ³ã‚¿ãƒ“ãƒ¥ã‚¢ãƒ¼ã§ã™ã€‚ã‚ãªãŸã®è³ªå•ã¯ã€ç›¸æ‰‹ã«æ–°ãŸãªæ°—ã¥ãã‚’ä¸ãˆã€æ€è€ƒã‚’æ•´ç†ã•ã›ã¾ã™ã€‚'
        - id: 95535133-7d32-485a-81db-711a364926a1
          role: user
          text: '# ã‚ãªãŸã®å³å¯†ãªã‚¿ã‚¹ã‚¯

            ã‚ãªãŸã®å”¯ä¸€ã®ã‚¿ã‚¹ã‚¯ã¯ã€ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã‚’åˆ†æã—ã€**ãƒªã‚¯ã‚¨ã‚¹ãƒˆã«ä¸è¶³ã—ã¦ã„ã‚‹æƒ…å ±ï¼ˆreasoningï¼‰ã‚’è£œã†ãŸã‚ã®ã€æœ€ã‚‚çš„ç¢ºã§ã€ã‹ã¤æ¸©ã‹ã¿ã®ã‚ã‚‹æ·±æ˜ã‚Šè³ªå•ã‚’1ã¤ã ã‘**ç”Ÿæˆã™ã‚‹ã“ã¨ã§ã™ã€‚


            ## è³ªå•ç”Ÿæˆã®ãƒ«ãƒ¼ãƒ«

            1.  **è‚¯å®šã‹ã‚‰å§‹ã‚ã‚‹:** ã¾ãšã€ã€Œç´ æ™´ã‚‰ã—ã„ã§ã™ã­ã€ã€Œã‚ˆãè¦‹ãˆã¦ãã¾ã—ãŸã­ã€ã®ã‚ˆã†ã«ã€ç¾åœ¨ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆå†…å®¹ã‚’è‚¯å®šçš„ã«å—ã‘æ­¢ã‚ã¦ãã ã•ã„ã€‚

            2.  **æ€è€ƒãƒ—ãƒ­ã‚»ã‚¹ã‚’ç¿»è¨³ã™ã‚‹:** `reasoning`ã§ç¤ºã•ã‚Œã¦ã„ã‚‹ã€Œä¸è¶³ã—ã¦ã„ã‚‹ç‚¹ã€ã‚’ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«åˆ†ã‹ã‚Šã‚„ã™ã„ã€è‡ªç„¶ãªä¼šè©±è¨€è‘‰ã«ç¿»è¨³ã—ã¦è³ªå•ã—ã¦ãã ã•ã„ã€‚

            3.  **ç›¸æ‰‹ã®å¯èƒ½æ€§ã‚’å¼•ãå‡ºã™èãæ–¹:** ã€Œã‚‚ã—ã‚ˆã‚ã—ã‘ã‚Œã°â€¦ã€ã€Œä¾‹ãˆã°â€¦ã€ã¨ã„ã£ãŸã‚¯ãƒƒã‚·ãƒ§ãƒ³è¨€è‘‰ã‚’ä½¿ã„ã€ç›¸æ‰‹ãŒç­”ãˆã‚„ã™ã„ã‚ˆã†ã«é…æ…®ã—ã¦ãã ã•ã„ã€‚

            4.  å‡ºåŠ›ã¯ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«èªã‚Šã‹ã‘ã‚‹è³ªå•æ–‡ãã®ã‚‚ã®ã ã‘ã«ã—ã¦ãã ã•ã„ã€‚


            ## å¿œç­”ã®ãƒ‘ãƒ¼ã‚½ãƒŠãƒ©ã‚¤ã‚º

            - ã‚‚ã—ã€Œãƒ¦ãƒ¼ã‚¶ãƒ¼ã®åå‰ã€ãŒåˆ¤æ˜ã—ã¦ã„ã‚Œã°ã€å¿œç­”ã®å†’é ­ã§ã€Œã€‡ã€‡ã•ã‚“ã€ã€ã¨è‡ªç„¶ã«å‘¼ã³ã‹ã‘ã¦ãã ã•ã„ã€‚'
        - id: 4ed1e990-4159-4191-8f97-b1745788ea45
          role: assistant
          text: '# reasoningãŒã€ŒWHYï¼ˆç›®çš„ï¼‰ãŒä¸æ˜ç¢ºã€ã ã£ãŸå ´åˆã®å‡ºåŠ›ä¾‹


            ã€‡ã€‡ã•ã‚“ã€ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ã€‚ä¼šã„ãŸã„äººç‰©åƒãŒã€ã‹ãªã‚Šå…·ä½“çš„ã«ãªã£ã¦ãã¾ã—ãŸã­ï¼


            ã‚‚ã—ã‚ˆã‚ã—ã‘ã‚Œã°ã€ã‚‚ã†å°‘ã—ã ã‘æ·±ããŠä¼ºã„ã—ãŸã„ã®ã§ã™ãŒã€ãã®ã€ŒæŠ€è¡“çš„ãªå£æ‰“ã¡ç›¸æ‰‹ã€ã®æ–¹ã¨å‡ºä¼šã†ã“ã¨ã§ã€ã¿ã‚‰ã„ã•ã‚“ã”è‡ªèº«ã¯ã€æœ€çµ‚çš„ã«ã©ã®ã‚ˆã†ãªçŠ¶æ…‹ã«ãªã‚‹ã“ã¨ã‚’ç›®æŒ‡ã—ã¦ã„ã‚‰ã£ã—ã‚ƒã„ã¾ã™ã‹ï¼Ÿ

            ä¾‹ãˆã°ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«é–¢ã™ã‚‹ç‰¹å®šã®æ„æ€æ±ºå®šãŒã§ãã‚‹ã‚ˆã†ã«ãªã‚ŠãŸã„ã€ã¨ã„ã£ãŸç›®çš„ãŒã‚ã‚Œã°ã€ãœã²æ•™ãˆã¦ãã ã•ã„ã€‚'
        selected: false
        title: 1c. ãƒªã‚¯ã‚¨ã‚¹ãƒˆæ·±æ˜ã‚Šè³ªå•ç”Ÿæˆ (1)
        type: llm
        variables: []
        vision:
          enabled: false
      height: 90
      id: '17556004106170'
      position:
        x: 7317
        y: 673
      positionAbsolute:
        x: 7317
        y: 673
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        answer: '{{#17556004106170.text#}}'
        desc: ''
        selected: false
        title: æ·±æ˜ã‚Šè³ªå•ç”Ÿæˆå›ç­”
        type: answer
        variables: []
      height: 105
      id: '17556004131570'
      position:
        x: 7651
        y: 683.5
      positionAbsolute:
        x: 7651
        y: 683.5
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        cases:
        - case_id: 'true'
          conditions:
          - comparison_operator: empty
            id: 68bb4aa0-aef9-4a14-a841-26e725cb62aa
            value: ''
            varType: array[object]
            variable_selector:
            - conversation
            - memory
          id: 'true'
          logical_operator: and
        desc: ''
        selected: false
        title: 0a. åˆå›å…¥åŠ›ãƒã‚§ãƒƒã‚¯
        type: if-else
      height: 126
      id: '1755604753838'
      position:
        x: 364
        y: 2153.5
      positionAbsolute:
        x: 364
        y: 2153.5
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        context:
          enabled: false
          variable_selector: []
        desc: ''
        memory:
          query_prompt_template: '# ã‚ãªãŸãŒåˆ©ç”¨ã§ãã‚‹æƒ…å ±ï¼ˆã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆï¼‰

            - ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æœ€åˆã®ç™ºè¨€ï¼ˆè¦ç´„ï¼‰: {{#1755583954150.structured_output.summary#}}

            - ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æœ€åˆã®ç™ºè¨€ï¼ˆå…¨æ–‡ï¼‰: {{#sys.query#}}

            '
          role_prefix:
            assistant: ''
            user: ''
          window:
            enabled: false
            size: 50
        model:
          completion_params:
            temperature: 0.7
          mode: chat
          name: gpt-4o
          provider: langgenius/openai/openai
        prompt_template:
        - id: 69057c2f-86b8-428b-9755-ceeef0d6b28a
          role: system
          text: ã‚ãªãŸã¯ã€å¯¾è©±ã®å†’é ­ã§ä¸»å°æ¨©ã‚’æ¡ã‚Šã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«å®‰å¿ƒæ„Ÿã‚’ä¸ãˆã¤ã¤ã€ä»Šå¾Œã®å¯¾è©±ã®é€²ã‚æ–¹ã‚’æ˜ç¢ºã«æç¤ºã§ãã‚‹ã€éå¸¸ã«å„ªç§€ãªã‚ªãƒ³ãƒœãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ãƒ»ã‚¹ãƒšã‚·ãƒ£ãƒªã‚¹ãƒˆã§ã™ã€‚
        - role: user
          text: '# ã‚ãªãŸã®å³å¯†ãªã‚¿ã‚¹ã‚¯

            ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æœ€åˆã®ç™ºè¨€ã«è»½ãå¿œç­”ã—ãŸå¾Œã€ä»Šå¾Œã®å¯¾è©±ã®å…¨ä½“åƒï¼ˆãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ—ï¼‰ã‚’æç¤ºã—ã€æœ€å¾Œã«ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ä½œæˆã®ç¬¬ä¸€æ­©ã¨ã—ã¦åå‰ã‚’å°‹ã­ã‚‹ã€ã¨ã„ã†3ã¤ã®è¦ç´ ã‚’ã™ã¹ã¦å«ã‚“ã ã€è‡ªç„¶ã§ä¸å¯§ãªå¿œç­”ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ç”Ÿæˆã—ã¦ãã ã•ã„ã€‚


            ## å¿œç­”ç”Ÿæˆã®ãƒ«ãƒ¼ãƒ«

            1.  **è»½ã„å¿œç­”:** ã¾ãšã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æœ€åˆã®ç™ºè¨€ï¼ˆ`summary`ï¼‰ã‚’å—ã‘æ­¢ã‚ã€ã€ŒãŠè©±ã—ã„ãŸã ãã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ã€ã€Œæ‰¿çŸ¥ã„ãŸã—ã¾ã—ãŸã€ã¨ã„ã£ãŸã€ç°¡æ½”ãªè‚¯å®šã®è¨€è‘‰ã‚’è¿”ã—ã¾ã™ã€‚

            2.  **ãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ—æç¤º:** æ¬¡ã«ã€ã€Œä»Šå¾Œã®é€²ã‚æ–¹ã«ã¤ã„ã¦ã€ç°¡å˜ã«ã”èª¬æ˜ã—ã¾ã™ã­ã€ã¨åˆ‡ã‚Šå‡ºã—ã€ã€Œâ‘ ã¾ãšã€ã„ãã¤ã‹è³ªå•ã‚’ã•ã›ã¦ã„ãŸã ãã€ã€ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ã€ã‚’ä¸€ç·’ã«ä½œæˆã—ã¾ã™ã€‚
            â‘¡ãã‚ŒãŒå®Œæˆã—ãŸã‚‰ã€æ¬¡ã«ã€ä¼šã„ãŸã„äººç‰©åƒã€ã‚’å…·ä½“åŒ–ã—ã€ãƒãƒƒãƒãƒ³ã‚°ã«é€²ã¿ã¾ã™ã€ã¨ã„ã†2ã‚¹ãƒ†ãƒƒãƒ—ã®è¨ˆç”»ã‚’æ˜ç¢ºã«ä¼ãˆã¦ãã ã•ã„ã€‚

            3.  **åå‰ã®è³ªå•:** æœ€å¾Œã«ã€ã€Œãã‚Œã§ã¯ã€ã¾ãšç¬¬ä¸€æ­©ã¨ã—ã¦ã€ã‚ãªãŸã®ãŠåå‰ã‹ã‚‰æ•™ãˆã¦ã„ãŸã ã‘ã¾ã™ã§ã—ã‚‡ã†ã‹ï¼Ÿã€ã¨ã€å…·ä½“çš„ã§ä¸å¯§ãªè³ªå•ã§ç· ã‚ããã£ã¦ãã ã•ã„ã€‚

            4.  å‡ºåŠ›ã¯ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«èªã‚Šã‹ã‘ã‚‹è‡ªç„¶ãªå¿œç­”ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãã®ã‚‚ã®ã ã‘ã«ã—ã¦ãã ã•ã„ã€‚'
        selected: false
        title: åå‰è³ªå•ï¼†ãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ—æç¤º
        type: llm
        variables: []
        vision:
          enabled: false
      height: 90
      id: '1756201560250'
      position:
        x: 1548
        y: 1721.5
      positionAbsolute:
        x: 1548
        y: 1721.5
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        answer: '{{#1756201560250.text#}}'
        desc: ''
        selected: false
        title: åå‰è³ªå•å¿œç­”
        type: answer
        variables: []
      height: 105
      id: '1756201679026'
      position:
        x: 1882
        y: 1721.5
      positionAbsolute:
        x: 1882
        y: 1721.5
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        context:
          enabled: false
          variable_selector: []
        desc: ''
        memory:
          query_prompt_template: '# ã‚ãªãŸãŒåˆ©ç”¨ã§ãã‚‹æƒ…å ±ï¼ˆã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆï¼‰

            - ç¾åœ¨ã®ãƒ¯ãƒ¼ã‚­ãƒ³ã‚°ãƒ¡ãƒ¢ãƒªã®çŠ¶æ…‹: {{#conversation.memory#}}

            - ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒç›´å‰ã«è©±ã—ã¦ãã‚ŒãŸæƒ…å ±ï¼ˆè¦ç´„ï¼‰: {{#2. æ€è€ƒã¨åˆ¤æ–­.structured_output.summary#}} /

            - ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æœ€æ–°ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ï¼ˆå…¨æ–‡ï¼‰: {{#sys.query#}}'
          role_prefix:
            assistant: ''
            user: ''
          window:
            enabled: false
            size: 50
        model:
          completion_params:
            temperature: 0.7
          mode: chat
          name: gpt-4o
          provider: langgenius/openai/openai
        prompt_template:
        - id: 0b775776-d818-461e-b7dd-940f869ca931
          role: system
          text: ã‚ãªãŸã¯ã€å¯¾è©±ã®å…¨ä½“åƒã‚’ç°¡æ½”ã‹ã¤åˆ†ã‹ã‚Šã‚„ã™ãèª¬æ˜ã—ã€ç›¸æ‰‹ã«å®‰å¿ƒæ„Ÿã‚’ä¸ãˆã¤ã¤ã€æ¬¡ã«ä½•ã‚’ã™ã¹ãã‹ã‚’æ˜ç¢ºã«æç¤ºã§ãã‚‹ã€å„ªã‚ŒãŸãƒ•ã‚¡ã‚·ãƒªãƒ†ãƒ¼ã‚¿ãƒ¼ã§ã™ã€‚
        - id: 65680001-3dd1-4ca8-a495-d4e67a5098a5
          role: user
          text: "# ã‚ãªãŸã®å³å¯†ãªã‚¿ã‚¹ã‚¯\nã¾ãšãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒæä¾›ã—ã¦ãã‚ŒãŸæƒ…å ±ï¼ˆ`sys.query`ï¼‰ã«æ„Ÿè¬ã—ã€ä»Šå¾Œã®å¯¾è©±ã®2ã‚¹ãƒ†ãƒƒãƒ—è¨ˆç”»ã‚’æç¤ºã—ã€æœ€å¾Œã«æ¬¡ã«èãã¹ãæœ€ã‚‚è‡ªç„¶ãªè³ªå•ã‚’æŠ•ã’ã‹ã‘ã‚‹ã€ã¨ã„ã†æ§‹æˆã®å¿œç­”ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ç”Ÿæˆã—ã¦ãã ã•ã„ã€‚\n\
            \n## å¿œç­”ç”Ÿæˆã®ãƒ«ãƒ¼ãƒ«\n1.  **æ„Ÿè¬ã¨è‚¯å®š:** ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒè©±ã—ã¦ãã‚ŒãŸæƒ…å ±ï¼ˆ`sys.query`ï¼‰ã‚’è‚¯å®šçš„ã«å—ã‘æ­¢ã‚ã¾ã™ã€‚ä¾‹ãˆã°ã€ã€Œã€æ ªå¼ä¼šç¤¾ã‚¹ã‚¿ã‚¸ã‚ªãƒ—ãƒ¬ãƒ¼ãƒªãƒ¼ã§åƒã„ã¦ã„ã¾ã™ã€ã¨ã®ã“ã¨ã€æ•™ãˆã¦ã„ãŸã ãã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ï¼ã€ã®ã‚ˆã†ã«ã€å…·ä½“çš„ãªè¨€è‘‰ã‚’å¼•ç”¨ã™ã‚‹ã¨ã‚ˆã‚Šè‡ªç„¶ã§ã™ã€‚\n\
            2.  **ãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ—æç¤º:** ã€Œä»Šå¾Œã®é€²ã‚æ–¹ã«ã¤ã„ã¦â€¦ã€ã¨åˆ‡ã‚Šå‡ºã—ã€ã€Œâ‘ ã¾ãšã€ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ã€ã‚’ä¸€ç·’ã«å®Œæˆã•ã›ã€â‘¡æ¬¡ã«ã€ä¼šã„ãŸã„äººç‰©åƒã€ã‚’å…·ä½“åŒ–ã—ã¾ã™ã€ã¨ã„ã†è¨ˆç”»ã‚’ä¼ãˆã¾ã™ã€‚\n\
            3.  **æ¬¡ã®è³ªå•:** ä»¥ä¸‹ã®ãƒ«ãƒ¼ãƒ«ã«å¾“ã„ã€æ¬¡ã«èãã¹ãè³ªå•ã‚’ç”Ÿæˆã—ã¾ã™ã€‚\n    - **ã‚‚ã—ãƒ¡ãƒ¢ãƒªã«ã¾ã `name`ãŒãªã„å ´åˆ:**\
            \ ã€Œãã‚Œã§ã¯ã¾ãšã€ã‚ãªãŸã®ãŠåå‰ã‹ã‚‰æ•™ãˆã¦ã„ãŸã ã‘ã¾ã™ã‹ï¼Ÿã€ã¨åå‰ã‚’å°‹ã­ã¦ãã ã•ã„ã€‚\n    - **ã‚‚ã—ãƒ¡ãƒ¢ãƒªã«`name`ã¯æ—¢ã«ã‚ã‚‹ãŒã€`role`ãŒãªã„å ´åˆ:**\
            \ ã€Œã€‡ã€‡ã•ã‚“ï¼ˆåå‰ã‚’å‘¼ã¶ï¼‰ã€æ¬¡ã«ã‚ãªãŸã®ãŠä»•äº‹ã«ã¤ã„ã¦æ•™ãˆã¦ã„ãŸã ã‘ã¾ã™ã‹ï¼Ÿã€ã¨å½¹è·ã‚’å°‹ã­ã¦ãã ã•ã„ã€‚\n    - **ã‚‚ã—`name`ã‚‚`role`ã‚‚ã‚ã‚‹å ´åˆ:**\
            \ ã€Œã€‡ã€‡ã•ã‚“ã€æ¬¡ã¯ãã®ãŠä»•äº‹ã‚’é€šã˜ã¦ã€ã©ã®ã‚ˆã†ãªã“ã¨ã‚’å®Ÿç¾ã—ãŸã„ã‹ã€ã‚ãªãŸã®ãƒ“ã‚¸ãƒ§ãƒ³ã«ã¤ã„ã¦æ•™ãˆã¦ã„ãŸã ã‘ã¾ã™ã‹ï¼Ÿã€ã¨ã€ã‚ˆã‚Šæ·±ã„è³ªå•ã«é€²ã‚“ã§ãã ã•ã„ã€‚"
        selected: false
        title: ãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ—æç¤ºãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ç”Ÿæˆ
        type: llm
        variables: []
        vision:
          enabled: false
      height: 90
      id: '1756202663914'
      position:
        x: 6315
        y: 1783
      positionAbsolute:
        x: 6315
        y: 1783
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        answer: '{{#1756202663914.text#}}'
        desc: ''
        selected: false
        title: ãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ—æç¤ºå¿œç­”
        type: answer
        variables: []
      height: 105
      id: '1756202837930'
      position:
        x: 6649
        y: 1791.5
      positionAbsolute:
        x: 6649
        y: 1791.5
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        context:
          enabled: false
          variable_selector: []
        desc: ''
        memory:
          query_prompt_template: '# ã‚ãªãŸãŒåˆ©ç”¨ã§ãã‚‹æƒ…å ±ï¼ˆã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆï¼‰

            - ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®åå‰ï¼ˆã‚‚ã—åˆ¤æ˜ã—ã¦ã„ã‚Œã°ï¼‰: {{#conversation.memory#}}

            - ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æ‚©ã¿ã‚„æ€è€ƒã®åœæ»ã‚’ç¤ºå”†ã™ã‚‹ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸: {{#sys.query#}}

            - ç§ãŸã¡ï¼ˆAIï¼‰ãŒç›´å‰ã«å°‹ã­ãŸãŒã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒç­”ãˆã«çª®ã—ã¦ã—ã¾ã£ãŸè³ªå•ã®å†…å®¹ï¼ˆreasoningï¼‰ã‚’æ¨æ¸¬ã™ã‚‹ãƒ‡ãƒ¼ã‚¿: {{#conversation.memory#}}'
          role_prefix:
            assistant: ''
            user: ''
          window:
            enabled: false
            size: 50
        model:
          completion_params:
            temperature: 0.7
          mode: chat
          name: gpt-4o
          provider: langgenius/openai/openai
        prompt_template:
        - id: 523c2edf-3a71-4045-bd9e-a72885e1d5ad
          role: system
          text: 'ã‚ãªãŸã¯ã€ç›¸æ‰‹ãŒè¡Œãè©°ã¾ã£ã¦ã„ã‚‹æ°—æŒã¡ã«æ·±ãå…±æ„Ÿã—ã€ãƒ—ãƒ¬ãƒƒã‚·ãƒ£ãƒ¼ã‚’ä¸ãˆãšã«è¦–ç‚¹ã‚’å¤‰ãˆã‚‹ã“ã¨ã§ã€æ–°ãŸãªæ°—ã¥ãã‚’ä¿ƒã™ã®ãŒå¾—æ„ãªã€çµŒé¨“è±Šå¯Œãªã‚³ãƒ¼ãƒã§ã™ã€‚

            '
        - id: 6d806ea7-b38d-4c3a-8672-0b603b51572c
          role: user
          text: "# ã‚ãªãŸã®å³å¯†ãªã‚¿ã‚¹ã‚¯\nãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ã€Œåˆ†ã‹ã‚‰ãªã„ã€ã€Œé›£ã—ã„ã€ã¨ã„ã†æ°—æŒã¡ã«å®Œå…¨ã«å¯„ã‚Šæ·»ã£ãŸä¸Šã§ã€ç›´å‰ã®è³ªå•ã‚’ã€ã‚ˆã‚Šç­”ãˆã‚„ã™ã„**ã€Œè¦–ç‚¹ã‚’å¤‰ãˆãŸä»£æ›¿è³ªå•ã€**ã«å¤‰æ›ã—ã€å¿œç­”ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ç”Ÿæˆã—ã¦ãã ã•ã„ã€‚\n\
            \n## å¿œç­”ç”Ÿæˆã®ãƒ«ãƒ¼ãƒ«\n1.  **å®Œå…¨ãªå…±æ„Ÿ:** ã¾ãšã€ã€Œã¨ã‚“ã§ã‚‚ãªã„ã§ã™ï¼ã€ã€Œãã†ã§ã™ã‚ˆã­ã€é›£ã—ã„è³ªå•ã§ã—ãŸã€ã®ã‚ˆã†ã«ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æ°—æŒã¡ã‚’å…¨é¢çš„ã«è‚¯å®šã—ã€å®‰å¿ƒã•ã›ã¦ãã ã•ã„ã€‚\n\
            2.  **è³ªå•ã®æˆ¦ç•¥çš„è»¢æ›:** ç›´å‰ã®è³ªå•ã®æœ¬è³ªï¼ˆä¾‹ï¼šã€Œãƒ“ã‚¸ãƒ§ãƒ³ã¯ï¼Ÿã€ï¼‰ã‚’æ‰ãˆã€ãã‚Œã‚’ã‚ˆã‚Šå…·ä½“çš„ã§ã€éå»ã®çµŒé¨“ã‚„æ„Ÿæƒ…ã«åŸºã¥ã„ãŸè³ªå•ã«å¤‰æ›ã—ã¦ãã ã•ã„ã€‚\n\
            \    - **ä¾‹1ï¼ˆãƒ“ã‚¸ãƒ§ãƒ³â†’çµŒé¨“ï¼‰:** ã€Œã§ã¯è³ªå•ã‚’å¤‰ãˆã¾ã™ã­ã€‚æœ€è¿‘ã®ãŠä»•äº‹ã§ã€å¤§å¤‰ã ã£ãŸã‘ã©ã€ã“ã‚Œã‚’ã‚„ã£ã¦è‰¯ã‹ã£ãŸï¼ã€ã¨å¿ƒã‹ã‚‰æ€ãˆãŸç¬é–“ã¯ã€ã©ã‚“ãªæ™‚ã§ã—ãŸã‹ï¼Ÿã€\n\
            \    - **ä¾‹2ï¼ˆä¾¡å€¤è¦³â†’æ„Ÿæƒ…ï¼‰:** ã€Œã§ã—ãŸã‚‰ã€å°‘ã—é•ã†è§’åº¦ã‹ã‚‰ãŠä¼ºã„ã—ã¾ã™ã­ã€‚ã©ã‚“ãªæ™‚ã«ã€è‰¯ã„ä»•äº‹ãŒã§ããŸãªã€ã¨ã€ã‚„ã‚ŠãŒã„ã‚„æº€è¶³æ„Ÿã‚’æ„Ÿã˜ã¾ã™ã‹ï¼Ÿã€\n\
            3.  å‡ºåŠ›ã¯ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«èªã‚Šã‹ã‘ã‚‹è‡ªç„¶ãªå¿œç­”ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãã®ã‚‚ã®ã ã‘ã«ã—ã¦ãã ã•ã„ã€‚"
        selected: false
        title: ã‚³ãƒ¼ãƒãƒ³ã‚°ä»‹å…¥
        type: llm
        variables: []
        vision:
          enabled: false
      height: 90
      id: '1756203059035'
      position:
        x: 6649
        y: 1936.5
      positionAbsolute:
        x: 6649
        y: 1936.5
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        answer: '{{#1756203059035.text#}}'
        desc: ''
        selected: false
        title: ã‚³ãƒ¼ãƒãƒ³ã‚°ä»‹å…¥å¿œç­”
        type: answer
        variables: []
      height: 105
      id: '1756203308614'
      position:
        x: 6983
        y: 1913
      positionAbsolute:
        x: 6983
        y: 1913
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    viewport:
      x: -3430.5912979819414
      y: -319.2489286694532
      zoom: 0.6993080413692311
